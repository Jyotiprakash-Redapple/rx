(this.webpackChunkpokerComponent=this.webpackChunkpokerComponent||[]).push([[612],{5612:()=>{(()=>{const t={4399:t=>{"use strict";let e=Object.prototype.hasOwnProperty,s="~";function i(){}function n(t,e,s){this.fn=t,this.context=e,this.once=s||!1}function r(t,e,i,r,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");const a=new n(i,r||t,o),h=s?s+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),a.prototype.eventNames=function(){let t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(s?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){const e=s?s+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(t){const e=s?s+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,r,o){const a=s?s+t:t;if(!this._events[a])return!1;let h,l,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,r),!0;case 6:return c.fn.call(c.context,e,i,n,r,o),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{let s,r=c.length;for(l=0;l<r;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,n);break;default:if(!h)for(s=1,h=new Array(u-1);s<u;s++)h[s-1]=arguments[s];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,s){return r(this,t,e,s,!1)},a.prototype.once=function(t,e,s){return r(this,t,e,s,!0)},a.prototype.removeListener=function(t,e,i,n){const r=s?s+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;const a=this._events[r];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||o(this,r);else{for(var h=0,l=[],c=a.length;h<c;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&l.push(a[h]);l.length?this._events[r]=1===l.length?l[0]:l:o(this,r)}return this},a.prototype.removeAllListeners=function(t){let e;return t?(e=s?s+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=s,a.EventEmitter=a,t.exports=a},5159:t=>{(function(){"use strict";const e=(()=>{const t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,n={};((e,s)=>{for(const i in s)t(e,i,{get:s[i],enumerable:!0})})(n,{AlphaTimeline:()=>j,Animation:()=>T,AnimationState:()=>ct,AnimationStateAdapter:()=>pt,AnimationStateData:()=>At,AssetManager:()=>es,AssetManagerBase:()=>Wt,AtlasAttachmentLoader:()=>Vt,Attachment:()=>v,AttachmentTimeline:()=>Z,BinaryInput:()=>fe,BlendMode:()=>ce,Bone:()=>_t,BoneData:()=>zt,BoundingBoxAttachment:()=>St,CURRENT:()=>vt,CanvasTexture:()=>ts,ClippingAttachment:()=>Mt,Color:()=>h,ConstraintData:()=>Ut,CurveTimeline:()=>Y,CurveTimeline1:()=>P,CurveTimeline2:()=>X,DebugUtils:()=>g,DeformTimeline:()=>K,Downloader:()=>qt,DrawOrderTimeline:()=>et,Event:()=>Gt,EventData:()=>jt,EventQueue:()=>dt,EventTimeline:()=>Q,EventType:()=>ft,FIRST:()=>gt,FakeTexture:()=>Ct,HOLD_FIRST:()=>wt,HOLD_MIX:()=>yt,HOLD_SUBSEQUENT:()=>xt,IkConstraint:()=>$t,IkConstraintData:()=>Ht,IkConstraintTimeline:()=>st,IntSet:()=>r,Interpolation:()=>u,MathUtils:()=>c,MeshAttachment:()=>Xt,MixBlend:()=>C,MixDirection:()=>R,PathAttachment:()=>Lt,PathConstraint:()=>ee,PathConstraintData:()=>Zt,PathConstraintMixTimeline:()=>ot,PathConstraintPositionTimeline:()=>nt,PathConstraintSpacingTimeline:()=>rt,PointAttachment:()=>Ot,Pool:()=>x,PositionMode:()=>Kt,Pow:()=>d,PowOut:()=>f,RGB2Timeline:()=>H,RGBA2Timeline:()=>$,RGBATimeline:()=>q,RGBTimeline:()=>G,RegionAttachment:()=>Bt,RotateMode:()=>Qt,RotateTimeline:()=>L,SETUP:()=>bt,SUBSEQUENT:()=>mt,ScaleTimeline:()=>V,ScaleXTimeline:()=>z,ScaleYTimeline:()=>N,SequenceTimeline:()=>ht,ShearTimeline:()=>_,ShearXTimeline:()=>U,ShearYTimeline:()=>W,Skeleton:()=>re,SkeletonBinary:()=>de,SkeletonBounds:()=>We,SkeletonClipping:()=>Ge,SkeletonData:()=>oe,SkeletonJson:()=>je,SkeletonRenderer:()=>ns,Skin:()=>he,SkinEntry:()=>ae,Slot:()=>se,SlotData:()=>le,SpacingMode:()=>Jt,StringSet:()=>o,Texture:()=>It,TextureAtlas:()=>Rt,TextureAtlasPage:()=>Yt,TextureAtlasRegion:()=>Pt,TextureFilter:()=>Et,TextureRegion:()=>Tt,TextureWrap:()=>kt,TimeKeeper:()=>y,Timeline:()=>F,TrackEntry:()=>ut,TransformConstraint:()=>ie,TransformConstraintData:()=>ue,TransformConstraintTimeline:()=>it,TransformMode:()=>Nt,TranslateTimeline:()=>O,TranslateXTimeline:()=>D,TranslateYTimeline:()=>B,Triangulator:()=>qe,Utils:()=>m,Vector2:()=>w,VertexAttachment:()=>S,WindowedMean:()=>b});var r=class{constructor(){this.array=new Array}add(t){const e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},o=class{constructor(){this.entries={},this.size=0}add(t){const e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){const e=this.size;for(let e=0,s=t.length;e<s;e++)this.add(t[e]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},a=class{constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new a).setFromString(t)}},h=a;h.WHITE=new a(1,1,1,1),h.RED=new a(1,0,0,1),h.GREEN=new a(0,1,0,1),h.BLUE=new a(0,0,1,1),h.MAGENTA=new a(1,0,1,1);var l=class{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*l.degRad)}static sinDeg(t){return Math.sin(t*l.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){const e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return l.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){const i=Math.random(),n=e-t;return i<=(s-t)/n?t+Math.sqrt(i*n*(s-t)):e-Math.sqrt((1-i)*n*(e-s))}static isPowerOfTwo(t){return t&&!(t&t-1)}},c=l;c.PI=3.1415927,c.PI2=2*l.PI,c.radiansToDegrees=180/l.PI,c.radDeg=l.radiansToDegrees,c.degreesToRadians=l.PI/180,c.degRad=l.degreesToRadians;var u=class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}},d=class extends u{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},f=class extends d{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},p=class{static arrayCopy(t,e,s,i,n){for(let r=e,o=i;r<e+n;r++,o++)s[o]=t[r]}static arrayFill(t,e,s,i){for(let n=e;n<s;n++)t[n]=i}static setArraySize(t,e,s=0){const i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let n=i;n<e;n++)t[n]=s;return t}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:p.setArraySize(t,e,s)}static newArray(t,e){const s=new Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(p.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(p.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return p.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return p.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=!0){for(let s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},m=p;m.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var g=class{static logBones(t){for(let e=0;e<t.bones.length;e++){const s=t.bones[e];console.log(`${s.data.name}, ${s.a}, ${s.b}, ${s.c}, ${s.d}, ${s.worldX}, ${s.worldY}`)}}},x=class{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},w=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){const t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},y=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){const t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},b=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}},v=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},A=class extends v{constructor(t){super(t),this.id=A.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,e,s,i,n,r){s=n+(s>>1)*r;let o=t.bone.skeleton,a=t.deform,h=this.vertices,l=this.bones;if(!l){a.length>0&&(h=a);const o=t.bone,l=o.worldX,c=o.worldY,u=o.a,d=o.b,f=o.c,p=o.d;for(let t=e,o=n;o<s;t+=2,o+=r){const e=h[t],s=h[t+1];i[o]=e*u+s*d+l,i[o+1]=e*f+s*p+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){const t=l[c];c+=t+1,u+=t}const d=o.bones;if(0==a.length)for(let t=n,e=3*u;t<s;t+=r){let s=0,n=0,r=l[c++];for(r+=c;c<r;c++,e+=3){const t=d[l[c]],i=h[e],r=h[e+1],o=h[e+2];s+=(i*t.a+r*t.b+t.worldX)*o,n+=(i*t.c+r*t.d+t.worldY)*o}i[t]=s,i[t+1]=n}else{const t=a;for(let e=n,o=3*u,a=u<<1;e<s;e+=r){let s=0,n=0,r=l[c++];for(r+=c;c<r;c++,o+=3,a+=2){const e=d[l[c]],i=h[o]+t[a],r=h[o+1]+t[a+1],u=h[o+2];s+=(i*e.a+r*e.b+e.worldX)*u,n+=(i*e.c+r*e.d+e.worldY)*u}i[e]=s,i[e+1]=n}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),m.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=m.newFloatArray(this.vertices.length),m.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}},S=A;S.nextID=0;var M=class{constructor(t){this.id=M.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){const t=new M(this.regions.length);return m.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;-1==s&&(s=this.setupIndex),s>=this.regions.length&&(s=this.regions.length-1);const i=this.regions[s];e.region!=i&&(e.region=i,e.updateRegion())}getPath(t,e){let s=t,i=(this.start+e).toString();for(let t=this.digits-i.length;t>0;t--)s+="0";return s+=i,s}static nextID(){return M._nextID++}},I=M;I._nextID=0;var E=(t=>(t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse",t))(E||{}),k=[0,1,2,3,4,5,6],T=class{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new o,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(let e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,n,r,o,a){if(!t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));const h=this.timelines;for(let i=0,l=h.length;i<l;i++)h[i].apply(t,e,s,n,r,o,a)}},C=(t=>(t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",t))(C||{}),R=(t=>(t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut",t))(R||{}),F=class{constructor(t,e){this.propertyIds=e,this.frames=m.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){const s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){const i=t.length;for(let n=s;n<i;n+=s)if(t[n]>e)return n-s;return i-s}},Y=class extends F{constructor(t,e,s){super(t,s),this.curves=m.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){const e=this.getFrameCount()+18*t;if(this.curves.length>e){const t=m.newFloatArray(e);m.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,s,i,n,r,o,a,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==s&&(u[e]=2+d);let f=.03*(i-2*r+a),p=.03*(n-2*o+h),m=.006*(3*(r-a)-i+l),g=.006*(3*(o-h)-n+c),x=2*f+m,w=2*p+g,y=.3*(r-i)+f+.16666667*m,b=.3*(o-n)+p+.16666667*g,v=i+y,A=n+b;for(let t=d+18;d<t;d+=2)u[d]=v,u[d+1]=A,y+=x,b+=w,x+=m,w+=g,v+=y,A+=b}getBezierValue(t,e,s,i){const n=this.curves;if(n[i]>t){const r=this.frames[e],o=this.frames[e+s];return o+(t-r)/(n[i]-r)*(n[i+1]-o)}const r=i+18;for(i+=2;i<r;i+=2)if(n[i]>=t){const e=n[i-2],s=n[i-1];return s+(t-e)/(n[i]-e)*(n[i+1]-s)}e+=this.getFrameEntries();const o=n[r-2],a=n[r-1];return a+(t-o)/(this.frames[e]-o)*(this.frames[e+s]-a)}},P=class extends Y{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}const i=this.curves[s>>1];switch(i){case 0:const i=e[s],n=e[s+1];return n+(t-i)/(e[s+2]-i)*(e[s+2+1]-n);case 1:return e[s+1]}return this.getBezierValue(t,s,1,i-2)}},X=class extends Y{constructor(t,e,s,i){super(t,e,[s,i])}getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}},L=class extends P{constructor(t,e,s){super(t,e,`0|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.rotation=a.data.rotation);case 1:a.rotation+=(a.data.rotation-a.rotation)*n}return}let h=this.getCurveValue(s);switch(r){case 0:a.rotation=a.data.rotation+h*n;break;case 1:case 2:h+=a.data.rotation-a.rotation;case 3:a.rotation+=h*n}}},O=class extends X{constructor(t,e,s){super(t,e,`1|${s}`,`2|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(s<h[0]){switch(r){case 0:return a.x=a.data.x,void(a.y=a.data.y);case 1:a.x+=(a.data.x-a.x)*n,a.y+=(a.data.y-a.y)*n}return}let l=0,c=0,u=F.search(h,s,3),d=this.curves[u/3];switch(d){case 0:const t=h[u];l=h[u+1],c=h[u+2];const e=(s-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}switch(r){case 0:a.x=a.data.x+l*n,a.y=a.data.y+c*n;break;case 1:case 2:a.x+=(a.data.x+l-a.x)*n,a.y+=(a.data.y+c-a.y)*n;break;case 3:a.x+=l*n,a.y+=c*n}}},D=class extends P{constructor(t,e,s){super(t,e,`1|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.x=a.data.x);case 1:a.x+=(a.data.x-a.x)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.x=a.data.x+h*n;break;case 1:case 2:a.x+=(a.data.x+h-a.x)*n;break;case 3:a.x+=h*n}}},B=class extends P{constructor(t,e,s){super(t,e,`2|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.y=a.data.y);case 1:a.y+=(a.data.y-a.y)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.y=a.data.y+h*n;break;case 1:case 2:a.y+=(a.data.y+h-a.y)*n;break;case 3:a.y+=h*n}}},V=class extends X{constructor(t,e,s){super(t,e,`3|${s}`,`4|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;let h,l,u=this.frames;if(s<u[0]){switch(r){case 0:return a.scaleX=a.data.scaleX,void(a.scaleY=a.data.scaleY);case 1:a.scaleX+=(a.data.scaleX-a.scaleX)*n,a.scaleY+=(a.data.scaleY-a.scaleY)*n}return}const d=F.search(u,s,3),f=this.curves[d/3];switch(f){case 0:const t=u[d];h=u[d+1],l=u[d+2];const e=(s-t)/(u[d+3]-t);h+=(u[d+3+1]-h)*e,l+=(u[d+3+2]-l)*e;break;case 1:h=u[d+1],l=u[d+2];break;default:h=this.getBezierValue(s,d,1,f-2),l=this.getBezierValue(s,d,2,f+18-2)}if(h*=a.data.scaleX,l*=a.data.scaleY,1==n)3==r?(a.scaleX+=h-a.data.scaleX,a.scaleY+=l-a.data.scaleY):(a.scaleX=h,a.scaleY=l);else{let t=0,e=0;if(1==o)switch(r){case 0:t=a.data.scaleX,e=a.data.scaleY,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n,a.scaleY=e+(Math.abs(l)*c.signum(e)-e)*n;break;case 1:case 2:t=a.scaleX,e=a.scaleY,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n,a.scaleY=e+(Math.abs(l)*c.signum(e)-e)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n,a.scaleY+=(l-a.data.scaleY)*n}else switch(r){case 0:t=Math.abs(a.data.scaleX)*c.signum(h),e=Math.abs(a.data.scaleY)*c.signum(l),a.scaleX=t+(h-t)*n,a.scaleY=e+(l-e)*n;break;case 1:case 2:t=Math.abs(a.scaleX)*c.signum(h),e=Math.abs(a.scaleY)*c.signum(l),a.scaleX=t+(h-t)*n,a.scaleY=e+(l-e)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n,a.scaleY+=(l-a.data.scaleY)*n}}}},z=class extends P{constructor(t,e,s){super(t,e,`3|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.scaleX=a.data.scaleX);case 1:a.scaleX+=(a.data.scaleX-a.scaleX)*n}return}const h=this.getCurveValue(s)*a.data.scaleX;if(1==n)3==r?a.scaleX+=h-a.data.scaleX:a.scaleX=h;else{let t=0;if(1==o)switch(r){case 0:t=a.data.scaleX,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 1:case 2:t=a.scaleX,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n}else switch(r){case 0:t=Math.abs(a.data.scaleX)*c.signum(h),a.scaleX=t+(h-t)*n;break;case 1:case 2:t=Math.abs(a.scaleX)*c.signum(h),a.scaleX=t+(h-t)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n}}}},N=class extends P{constructor(t,e,s){super(t,e,`4|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.scaleY=a.data.scaleY);case 1:a.scaleY+=(a.data.scaleY-a.scaleY)*n}return}const h=this.getCurveValue(s)*a.data.scaleY;if(1==n)3==r?a.scaleY+=h-a.data.scaleY:a.scaleY=h;else{let t=0;if(1==o)switch(r){case 0:t=a.data.scaleY,a.scaleY=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 1:case 2:t=a.scaleY,a.scaleY=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 3:a.scaleY+=(h-a.data.scaleY)*n}else switch(r){case 0:t=Math.abs(a.data.scaleY)*c.signum(h),a.scaleY=t+(h-t)*n;break;case 1:case 2:t=Math.abs(a.scaleY)*c.signum(h),a.scaleY=t+(h-t)*n;break;case 3:a.scaleY+=(h-a.data.scaleY)*n}}}},_=class extends X{constructor(t,e,s){super(t,e,`5|${s}`,`6|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(s<h[0]){switch(r){case 0:return a.shearX=a.data.shearX,void(a.shearY=a.data.shearY);case 1:a.shearX+=(a.data.shearX-a.shearX)*n,a.shearY+=(a.data.shearY-a.shearY)*n}return}let l=0,c=0,u=F.search(h,s,3),d=this.curves[u/3];switch(d){case 0:const t=h[u];l=h[u+1],c=h[u+2];const e=(s-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}switch(r){case 0:a.shearX=a.data.shearX+l*n,a.shearY=a.data.shearY+c*n;break;case 1:case 2:a.shearX+=(a.data.shearX+l-a.shearX)*n,a.shearY+=(a.data.shearY+c-a.shearY)*n;break;case 3:a.shearX+=l*n,a.shearY+=c*n}}},U=class extends P{constructor(t,e,s){super(t,e,`5|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.shearX=a.data.shearX);case 1:a.shearX+=(a.data.shearX-a.shearX)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.shearX=a.data.shearX+h*n;break;case 1:case 2:a.shearX+=(a.data.shearX+h-a.shearX)*n;break;case 3:a.shearX+=h*n}}},W=class extends P{constructor(t,e,s){super(t,e,`6|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.shearY=a.data.shearY);case 1:a.shearY+=(a.data.shearY-a.shearY)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.shearY=a.data.shearY+h*n;break;case 1:case 2:a.shearY+=(a.data.shearY+h-a.shearY)*n;break;case 3:a.shearY+=h*n}}},q=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`,`8|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,i,n,r){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color;if(s<h[0]){const t=a.data.color;switch(r){case 0:return void l.setFromColor(t);case 1:l.add((t.r-l.r)*n,(t.g-l.g)*n,(t.b-l.b)*n,(t.a-l.a)*n)}return}let c=0,u=0,d=0,f=0,p=F.search(h,s,5),m=this.curves[p/5];switch(m){case 0:const t=h[p];c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];const e=(s-t)/(h[p+5]-t);c+=(h[p+5+1]-c)*e,u+=(h[p+5+2]-u)*e,d+=(h[p+5+3]-d)*e,f+=(h[p+5+4]-f)*e;break;case 1:c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];break;default:c=this.getBezierValue(s,p,1,m-2),u=this.getBezierValue(s,p,2,m+18-2),d=this.getBezierValue(s,p,3,m+36-2),f=this.getBezierValue(s,p,4,m+54-2)}1==n?l.set(c,u,d,f):(0==r&&l.setFromColor(a.data.color),l.add((c-l.r)*n,(u-l.g)*n,(d-l.b)*n,(f-l.a)*n))}},G=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,n){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color;if(s<h[0]){const t=a.data.color;switch(r){case 0:return l.r=t.r,l.g=t.g,void(l.b=t.b);case 1:l.r+=(t.r-l.r)*n,l.g+=(t.g-l.g)*n,l.b+=(t.b-l.b)*n}return}let c=0,u=0,d=0,f=F.search(h,s,4),p=this.curves[f>>2];switch(p){case 0:const t=h[f];c=h[f+1],u=h[f+2],d=h[f+3];const e=(s-t)/(h[f+4]-t);c+=(h[f+4+1]-c)*e,u+=(h[f+4+2]-u)*e,d+=(h[f+4+3]-d)*e;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3];break;default:c=this.getBezierValue(s,f,1,p-2),u=this.getBezierValue(s,f,2,p+18-2),d=this.getBezierValue(s,f,3,p+36-2)}if(1==n)l.r=c,l.g=u,l.b=d;else{if(0==r){const t=a.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*n,l.g+=(u-l.g)*n,l.b+=(d-l.b)*n}}},j=class extends P{constructor(t,e,s){super(t,e,`8|${s}`),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.color;if(s<this.frames[0]){const t=a.data.color;switch(r){case 0:return void(h.a=t.a);case 1:h.a+=(t.a-h.a)*n}return}const l=this.getCurveValue(s);1==n?h.a=l:(0==r&&(h.a=a.data.color.a),h.a+=(l-h.a)*n)}},$=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`,`8|${s}`,`9|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,i,n,r,o,a,h){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=o,this.frames[t+6]=a,this.frames[t+7]=h}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color,c=a.darkColor;if(s<h[0]){const t=a.data.color,e=a.data.darkColor;switch(r){case 0:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.add((t.r-l.r)*n,(t.g-l.g)*n,(t.b-l.b)*n,(t.a-l.a)*n),c.r+=(e.r-c.r)*n,c.g+=(e.g-c.g)*n,c.b+=(e.b-c.b)*n}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=0,w=F.search(h,s,8),y=this.curves[w>>3];switch(y){case 0:const t=h[w];u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];const e=(s-t)/(h[w+8]-t);u+=(h[w+8+1]-u)*e,d+=(h[w+8+2]-d)*e,f+=(h[w+8+3]-f)*e,p+=(h[w+8+4]-p)*e,m+=(h[w+8+5]-m)*e,g+=(h[w+8+6]-g)*e,x+=(h[w+8+7]-x)*e;break;case 1:u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];break;default:u=this.getBezierValue(s,w,1,y-2),d=this.getBezierValue(s,w,2,y+18-2),f=this.getBezierValue(s,w,3,y+36-2),p=this.getBezierValue(s,w,4,y+54-2),m=this.getBezierValue(s,w,5,y+72-2),g=this.getBezierValue(s,w,6,y+90-2),x=this.getBezierValue(s,w,7,y+108-2)}if(1==n)l.set(u,d,f,p),c.r=m,c.g=g,c.b=x;else{if(0==r){l.setFromColor(a.data.color);const t=a.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((u-l.r)*n,(d-l.g)*n,(f-l.b)*n,(p-l.a)*n),c.r+=(m-c.r)*n,c.g+=(g-c.g)*n,c.b+=(x-c.b)*n}}},H=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`,`9|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,n,r,o,a){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=o,this.frames[t+6]=a}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color,c=a.darkColor;if(s<h[0]){const t=a.data.color,e=a.data.darkColor;switch(r){case 0:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.r+=(t.r-l.r)*n,l.g+=(t.g-l.g)*n,l.b+=(t.b-l.b)*n,c.r+=(e.r-c.r)*n,c.g+=(e.g-c.g)*n,c.b+=(e.b-c.b)*n}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=F.search(h,s,7),w=this.curves[x/7];switch(w){case 0:const t=h[x];u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];const e=(s-t)/(h[x+7]-t);u+=(h[x+7+1]-u)*e,d+=(h[x+7+2]-d)*e,f+=(h[x+7+3]-f)*e,p+=(h[x+7+4]-p)*e,m+=(h[x+7+5]-m)*e,g+=(h[x+7+6]-g)*e;break;case 1:u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];break;default:u=this.getBezierValue(s,x,1,w-2),d=this.getBezierValue(s,x,2,w+18-2),f=this.getBezierValue(s,x,3,w+36-2),p=this.getBezierValue(s,x,4,w+54-2),m=this.getBezierValue(s,x,5,w+72-2),g=this.getBezierValue(s,x,6,w+90-2)}if(1==n)l.r=u,l.g=d,l.b=f,c.r=p,c.g=m,c.b=g;else{if(0==r){const t=a.data.color,e=a.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(u-l.r)*n,l.g+=(d-l.g)*n,l.b+=(f-l.b)*n,c.r+=(p-c.r)*n,c.g+=(m-c.g)*n,c.b+=(g-c.b)*n}}},Z=class extends F{constructor(t,e){super(t,[`10|${e}`]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];a.bone.active&&(1!=o?s<this.frames[0]?0!=r&&1!=r||this.setAttachment(t,a,a.data.attachmentName):this.setAttachment(t,a,this.attachmentNames[F.search1(this.frames,s)]):0==r&&this.setAttachment(t,a,a.data.attachmentName))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}},K=class extends Y{constructor(t,e,s,i){super(t,e,[`11|${s}|${i.id}`]),this.slotIndex=0,this.slotIndex=s,this.attachment=i,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,n,r,o,a,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==s&&(u[e]=2+d);let f=.03*(i-2*r+a),p=.03*h-.06*o,m=.006*(3*(r-a)-i+l),g=.018*(o-h+.33333333),x=2*f+m,w=2*p+g,y=.3*(r-i)+f+.16666667*m,b=.3*o+p+.16666667*g,v=i+y,A=b;for(let t=d+18;d<t;d+=2)u[d]=v,u[d+1]=A,y+=x,b+=w,x+=m,w+=g,v+=y,A+=b}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:const s=this.frames[e];return(t-s)/(this.frames[e+this.getFrameEntries()]-s);case 1:return 0}if(i-=2,s[i]>t){const n=this.frames[e];return s[i+1]*(t-n)/(s[i]-n)}const n=i+18;for(i+=2;i<n;i+=2)if(s[i]>=t){const e=s[i-2],n=s[i-1];return n+(t-e)/(s[i]-e)*(s[i+1]-n)}const r=s[n-2],o=s[n-1];return o+(1-o)*(t-r)/(this.frames[e+this.getFrameEntries()]-r)}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.getAttachment();if(!h)return;if(!(h instanceof S)||h.timelineAttachment!=this.attachment)return;const l=a.deform;0==l.length&&(r=0);const c=this.vertices,u=c[0].length,d=this.frames;if(s<d[0]){switch(r){case 0:return void(l.length=0);case 1:if(1==n)return void(l.length=0);l.length=u;const t=h;if(t.bones)for(n=1-n,f=0;f<u;f++)l[f]*=n;else{const e=t.vertices;for(var f=0;f<u;f++)l[f]+=(e[f]-l[f])*n}}return}if(l.length=u,s>=d[d.length-1]){const t=c[d.length-1];if(1==n)if(3==r){const e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e];else{const s=e.vertices;for(let e=0;e<u;e++)l[e]+=t[e]-s[e]}}else m.arrayCopy(t,0,l,0,u);else switch(r){case 0:{const e=h;if(e.bones)for(let e=0;e<u;e++)l[e]=t[e]*n;else{const s=e.vertices;for(let e=0;e<u;e++){const i=s[e];l[e]=i+(t[e]-i)*n}}break}case 1:case 2:for(let e=0;e<u;e++)l[e]+=(t[e]-l[e])*n;break;case 3:const e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e]*n;else{const s=e.vertices;for(let e=0;e<u;e++)l[e]+=(t[e]-s[e])*n}}return}const p=F.search1(d,s),g=this.getCurvePercent(s,p),x=c[p],w=c[p+1];if(1==n)if(3==r){const t=h;if(t.bones)for(let t=0;t<u;t++){const e=x[t];l[t]+=e+(w[t]-e)*g}else{const e=t.vertices;for(let t=0;t<u;t++){const s=x[t];l[t]+=s+(w[t]-s)*g-e[t]}}}else for(let t=0;t<u;t++){const e=x[t];l[t]=e+(w[t]-e)*g}else switch(r){case 0:{const t=h;if(t.bones)for(let t=0;t<u;t++){const e=x[t];l[t]=(e+(w[t]-e)*g)*n}else{const e=t.vertices;for(let t=0;t<u;t++){const s=x[t],i=e[t];l[t]=i+(s+(w[t]-s)*g-i)*n}}break}case 1:case 2:for(let t=0;t<u;t++){const e=x[t];l[t]+=(e+(w[t]-e)*g-l[t])*n}break;case 3:const t=h;if(t.bones)for(let t=0;t<u;t++){const e=x[t];l[t]+=(e+(w[t]-e)*g)*n}else{const e=t.vertices;for(let t=0;t<u;t++){const s=x[t];l[t]+=(s+(w[t]-s)*g-e[t])*n}}}}},J=class extends F{constructor(t){super(t,J.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,n,r,o){if(!i)return;const a=this.frames,h=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,n,r,o),e=-1;else if(e>=a[h-1])return;if(s<a[0])return;let l=0;if(e<a[0])l=0;else{l=F.search1(a,e)+1;const t=a[l];for(;l>0&&a[l-1]==t;)l--}for(;l<h&&s>=a[l];l++)i.push(this.events[l])}},Q=J;Q.propertyIds=["12"];var tt=class extends F{constructor(t){super(t,tt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,n,r,o){if(1==o)return void(0==r&&m.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(s<this.frames[0])return void(0!=r&&1!=r||m.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));const a=F.search1(this.frames,s),h=this.drawOrders[a];if(h){const e=t.drawOrder,s=t.slots;for(let t=0,i=h.length;t<i;t++)e[t]=s[h[t]]}else m.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},et=tt;et.propertyIds=["13"];var st=class extends Y{constructor(t,e,s){super(t,e,[`14|${s}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,i,n,r,o){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r?1:0,this.frames[t+5]=o?1:0}apply(t,e,s,i,n,r,o){const a=t.ikConstraints[this.ikConstraintIndex];if(!a.active)return;const h=this.frames;if(s<h[0]){switch(r){case 0:return a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,void(a.stretch=a.data.stretch);case 1:a.mix+=(a.data.mix-a.mix)*n,a.softness+=(a.data.softness-a.softness)*n,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}let l=0,c=0,u=F.search(h,s,6),d=this.curves[u/6];switch(d){case 0:const t=h[u];l=h[u+1],c=h[u+2];const e=(s-t)/(h[u+6]-t);l+=(h[u+6+1]-l)*e,c+=(h[u+6+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}0==r?(a.mix=a.data.mix+(l-a.data.mix)*n,a.softness=a.data.softness+(c-a.data.softness)*n,1==o?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=h[u+3],a.compress=0!=h[u+4],a.stretch=0!=h[u+5])):(a.mix+=(l-a.mix)*n,a.softness+=(c-a.softness)*n,0==o&&(a.bendDirection=h[u+3],a.compress=0!=h[u+4],a.stretch=0!=h[u+5]))}},it=class extends Y{constructor(t,e,s){super(t,e,[`15|${s}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,n,r,o,a){const h=this.frames;h[t*=7]=e,h[t+1]=s,h[t+2]=i,h[t+3]=n,h[t+4]=r,h[t+5]=o,h[t+6]=a}apply(t,e,s,i,n,r,o){const a=t.transformConstraints[this.transformConstraintIndex];if(!a.active)return;let h,l,c,u,d,f,p=this.frames;if(s<p[0]){const t=a.data;switch(r){case 0:return a.mixRotate=t.mixRotate,a.mixX=t.mixX,a.mixY=t.mixY,a.mixScaleX=t.mixScaleX,a.mixScaleY=t.mixScaleY,void(a.mixShearY=t.mixShearY);case 1:a.mixRotate+=(t.mixRotate-a.mixRotate)*n,a.mixX+=(t.mixX-a.mixX)*n,a.mixY+=(t.mixY-a.mixY)*n,a.mixScaleX+=(t.mixScaleX-a.mixScaleX)*n,a.mixScaleY+=(t.mixScaleY-a.mixScaleY)*n,a.mixShearY+=(t.mixShearY-a.mixShearY)*n}return}const m=F.search(p,s,7),g=this.curves[m/7];switch(g){case 0:const t=p[m];h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];const e=(s-t)/(p[m+7]-t);h+=(p[m+7+1]-h)*e,l+=(p[m+7+2]-l)*e,c+=(p[m+7+3]-c)*e,u+=(p[m+7+4]-u)*e,d+=(p[m+7+5]-d)*e,f+=(p[m+7+6]-f)*e;break;case 1:h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];break;default:h=this.getBezierValue(s,m,1,g-2),l=this.getBezierValue(s,m,2,g+18-2),c=this.getBezierValue(s,m,3,g+36-2),u=this.getBezierValue(s,m,4,g+54-2),d=this.getBezierValue(s,m,5,g+72-2),f=this.getBezierValue(s,m,6,g+90-2)}if(0==r){const t=a.data;a.mixRotate=t.mixRotate+(h-t.mixRotate)*n,a.mixX=t.mixX+(l-t.mixX)*n,a.mixY=t.mixY+(c-t.mixY)*n,a.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*n,a.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*n,a.mixShearY=t.mixShearY+(f-t.mixShearY)*n}else a.mixRotate+=(h-a.mixRotate)*n,a.mixX+=(l-a.mixX)*n,a.mixY+=(c-a.mixY)*n,a.mixScaleX+=(u-a.mixScaleX)*n,a.mixScaleY+=(d-a.mixScaleY)*n,a.mixShearY+=(f-a.mixShearY)*n}},nt=class extends P{constructor(t,e,s){super(t,e,`16|${s}`),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,n,r,o){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.position=a.data.position);case 1:a.position+=(a.data.position-a.position)*n}return}const h=this.getCurveValue(s);0==r?a.position=a.data.position+(h-a.data.position)*n:a.position+=(h-a.position)*n}},rt=class extends P{constructor(t,e,s){super(t,e,`17|${s}`),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,n,r,o){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.spacing=a.data.spacing);case 1:a.spacing+=(a.data.spacing-a.spacing)*n}return}const h=this.getCurveValue(s);0==r?a.spacing=a.data.spacing+(h-a.data.spacing)*n:a.spacing+=(h-a.spacing)*n}},ot=class extends Y{constructor(t,e,s){super(t,e,[`18|${s}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,n){const r=this.frames;r[t<<=2]=e,r[t+1]=s,r[t+2]=i,r[t+3]=n}apply(t,e,s,i,n,r,o){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;let h,l,c,u=this.frames;if(s<u[0]){switch(r){case 0:return a.mixRotate=a.data.mixRotate,a.mixX=a.data.mixX,void(a.mixY=a.data.mixY);case 1:a.mixRotate+=(a.data.mixRotate-a.mixRotate)*n,a.mixX+=(a.data.mixX-a.mixX)*n,a.mixY+=(a.data.mixY-a.mixY)*n}return}const d=F.search(u,s,4),f=this.curves[d>>2];switch(f){case 0:const t=u[d];h=u[d+1],l=u[d+2],c=u[d+3];const e=(s-t)/(u[d+4]-t);h+=(u[d+4+1]-h)*e,l+=(u[d+4+2]-l)*e,c+=(u[d+4+3]-c)*e;break;case 1:h=u[d+1],l=u[d+2],c=u[d+3];break;default:h=this.getBezierValue(s,d,1,f-2),l=this.getBezierValue(s,d,2,f+18-2),c=this.getBezierValue(s,d,3,f+36-2)}if(0==r){const t=a.data;a.mixRotate=t.mixRotate+(h-t.mixRotate)*n,a.mixX=t.mixX+(l-t.mixX)*n,a.mixY=t.mixY+(c-t.mixY)*n}else a.mixRotate+=(h-a.mixRotate)*n,a.mixX+=(l-a.mixX)*n,a.mixY+=(c-a.mixY)*n}},at=class extends F{constructor(t,e,s){super(t,[`19|${e}|${s.sequence.id}`]),this.slotIndex=e,this.attachment=s}getFrameEntries(){return at.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,i,n){const r=this.frames;r[t*=at.ENTRIES]=e,r[t+at.MODE]=s|i<<4,r[t+at.DELAY]=n}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.attachment,l=this.attachment;if(!(h==l||h instanceof S&&h.timelineAttachment==l))return;const c=this.frames;if(s<c[0])return void(0!=r&&1!=r||(a.sequenceIndex=-1));const u=F.search(c,s,at.ENTRIES),d=c[u],f=c[u+at.MODE],p=c[u+at.DELAY];if(!this.attachment.sequence)return;let m=f>>4,g=this.attachment.sequence.regions.length,x=k[15&f];if(0!=x)switch(m+=(s-d)/p+1e-5|0,x){case 1:m=Math.min(g-1,m);break;case 2:m%=g;break;case 3:{const t=(g<<1)-2;m=0==t?0:m%t,m>=g&&(m=t-m);break}case 4:m=Math.max(g-1-m,0);break;case 5:m=g-1-m%g;break;case 6:{const t=(g<<1)-2;m=0==t?0:(m+g-1)%t,m>=g&&(m=t-m)}}a.sequenceIndex=m}},ht=at;ht.ENTRIES=3,ht.MODE=1,ht.DELAY=2;var lt=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new dt(this),this.propertyIDs=new o,this.animationsChanged=!1,this.trackEntryPool=new x((()=>new ut)),this.data=t}static emptyAnimation(){return lt._emptyAnimation}update(t){t*=this.timeScale;const e=this.tracks;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(!i)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let n=t*i.timeScale;if(i.delay>0){if(i.delay-=n,i.delay>0)continue;n=-i.delay,i.delay=0}let r=i.next;if(r){const e=i.trackLast-r.delay;if(e>=0){for(r.delay=0,r.trackTime+=0==i.timeScale?0:(e/i.timeScale+t)*r.timeScale,i.trackTime+=n,this.setCurrent(s,r,!0);r.mixingFrom;)r.mixTime+=t,r=r.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=n}this.queue.drain()}updateMixingFrom(t,e){const s=t.mixingFrom;if(!s)return!0;const i=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=s.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,s=this.tracks,i=!1;for(let n=0,r=s.length;n<r;n++){const r=s[n];if(!r||r.delay>0)continue;i=!0;let o=0==n?1:r.mixBlend,a=r.alpha;r.mixingFrom?a*=this.applyMixingFrom(r,t,o):r.trackTime>=r.trackEnd&&!r.next&&(a=0);let h=r.animationLast,l=r.getAnimationTime(),c=l,u=e;r.reverse&&(c=r.animation.duration-c,u=null);const d=r.animation.timelines,f=d.length;if(0==n&&1==a||3==o)for(let e=0;e<f;e++){m.webkit602BugfixHelper(a,o);const s=d[e];s instanceof Z?this.applyAttachmentTimeline(s,t,c,o,!0):s.apply(t,h,c,u,a,o,0)}else{const e=r.timelineMode,s=r.shortestRotation,i=!s&&r.timelinesRotation.length!=f<<1;i&&(r.timelinesRotation.length=f<<1);for(let n=0;n<f;n++){const l=d[n],f=e[n]==mt?o:0;!s&&l instanceof L?this.applyRotateTimeline(l,t,c,a,f,r.timelinesRotation,n<<1,i):l instanceof Z?this.applyAttachmentTimeline(l,t,c,o,!0):(m.webkit602BugfixHelper(a,o),l.apply(t,h,c,u,a,f,0))}}this.queueEvents(r,l),e.length=0,r.nextAnimationLast=l,r.nextTrackLast=r.trackTime}for(let e=this.unkeyedState+bt,s=t.slots,i=0,n=t.slots.length;i<n;i++){const n=s[i];if(n.attachmentState==e){const e=n.data.attachmentName;n.setAttachment(e?t.getAttachment(n.data.index,e):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(t,e,s){const i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,e,s);let n=0;0==t.mixDuration?(n=1,1==s&&(s=0)):(n=t.mixTime/t.mixDuration,n>1&&(n=1),1!=s&&(s=i.mixBlend));let r=n<i.attachmentThreshold,o=n<i.drawOrderThreshold,a=i.animation.timelines,h=a.length,l=i.alpha*t.interruptAlpha,c=l*(1-n),u=i.animationLast,d=i.getAnimationTime(),f=d,p=null;if(i.reverse?f=i.animation.duration-f:n<i.eventThreshold&&(p=this.events),3==s)for(let t=0;t<h;t++)a[t].apply(e,u,f,p,c,s,1);else{const t=i.timelineMode,n=i.timelineHoldMix,d=i.shortestRotation,g=!d&&i.timelinesRotation.length!=h<<1;g&&(i.timelinesRotation.length=h<<1),i.totalAlpha=0;for(let x=0;x<h;x++){let h,w=a[x],y=1,b=0;switch(t[x]){case mt:if(!o&&w instanceof et)continue;h=s,b=c;break;case gt:h=0,b=c;break;case xt:h=s,b=l;break;case wt:h=0,b=l;break;default:h=0;const t=n[x];b=l*Math.max(0,1-t.mixTime/t.mixDuration)}i.totalAlpha+=b,!d&&w instanceof L?this.applyRotateTimeline(w,e,f,b,h,i.timelinesRotation,x<<1,g):w instanceof Z?this.applyAttachmentTimeline(w,e,f,h,r):(m.webkit602BugfixHelper(b,s),o&&w instanceof et&&0==h&&(y=0),w.apply(e,u,f,p,b,h,y))}}return t.mixDuration>0&&this.queueEvents(i,d),this.events.length=0,i.nextAnimationLast=d,i.nextTrackLast=i.trackTime,n}applyAttachmentTimeline(t,e,s,i,n){const r=e.slots[t.slotIndex];r.bone.active&&(s<t.frames[0]?0!=i&&1!=i||this.setAttachment(e,r,r.data.attachmentName,n):this.setAttachment(e,r,t.attachmentNames[F.search1(t.frames,s)],n),r.attachmentState<=this.unkeyedState&&(r.attachmentState=this.unkeyedState+bt))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+vt)}applyRotateTimeline(t,e,s,i,n,r,o,a){if(a&&(r[o]=0),1==i)return void t.apply(e,0,s,null,1,n,0);const h=e.bones[t.boneIndex];if(!h.active)return;let l=0,u=0;if(s<t.frames[0])switch(n){case 0:h.rotation=h.data.rotation;default:return;case 1:l=h.rotation,u=h.data.rotation}else l=0==n?h.data.rotation:h.rotation,u=h.data.rotation+t.getCurveValue(s);let d=0,f=u-l;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)d=r[o];else{let t=0,e=0;a?(t=0,e=f):(t=r[o],e=r[o+1]);let s=f>0,i=t>=0;c.signum(e)!=c.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*c.signum(t)),i=s),d=f+t-t%360,i!=s&&(d+=360*c.signum(t)),r[o]=d}r[o+1]=f,h.rotation=l+d*i}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,n=i-s,r=t.trackLast%n,o=this.events,a=0,h=o.length;for(;a<h;a++){const e=o[a];if(e.time<r)break;e.time>i||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==n||r>t.trackTime%n:e>=i&&t.animationLast<i,l&&this.queue.complete(t);a<h;a++){const e=o[a];e.time<s||this.queue.event(t,e)}}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){const t=s.mixingFrom;if(!t)break;this.queue.end(t),s.mixingFrom=null,s.mixingTo=null,s=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){const i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){const i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let i=!0,n=this.expandToIndex(t);n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,i=!1):this.clearNext(n));const r=this.trackEntry(t,e,s,n);return this.setCurrent(t,r,i),this.queue.drain(),r}addAnimation(t,e,s=!1,i=0){const n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,n,s,i)}addAnimationWith(t,e,s=!1,i=0){if(!e)throw new Error("animation cannot be null.");let n=this.expandToIndex(t);if(n)for(;n.next;)n=n.next;const r=this.trackEntry(t,e,s,n);return n?(n.next=r,r.previous=n,i<=0&&(i+=n.getTrackComplete()-r.mixDuration)):(this.setCurrent(t,r,!0),this.queue.drain()),r.delay=i,r}setEmptyAnimation(t,e=0){const s=this.setAnimationWith(t,lt.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){const i=this.addAnimationWith(t,lt.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(t=0){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){const s=this.tracks[e];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(m.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,i){const n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=t,n.animation=e,n.loop=s,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=i?this.data.getMix(i.animation,e):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=2,n}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();const t=this.tracks;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do{s.mixingTo&&3==s.mixBlend||this.computeHold(s),s=s.mixingTo}while(s)}}}computeHold(t){const e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,n=t.timelineMode;n.length=i;const r=t.timelineHoldMix;r.length=0;const o=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<i;t++)n[t]=o.addAll(s[t].getPropertyIds())?wt:xt;else t:for(let a=0;a<i;a++){const i=s[a],h=i.getPropertyIds();if(o.addAll(h))if(!e||i instanceof Z||i instanceof et||i instanceof Q||!e.animation.hasTimeline(h))n[a]=gt;else{for(let s=e.mixingTo;s;s=s.mixingTo)if(!s.animation.hasTimeline(h)){if(t.mixDuration>0){n[a]=yt,r[a]=s;continue t}break}n[a]=wt}else n[a]=mt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},ct=lt;ct._emptyAnimation=new T("<empty>",[],0);var ut=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=2,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){const t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},dt=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(ft.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(ft.interrupt),this.objects.push(t)}end(t){this.objects.push(ft.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(ft.dispose),this.objects.push(t)}complete(t){this.objects.push(ft.complete),this.objects.push(t)}event(t,e){this.objects.push(ft.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){const i=t[s],n=t[s+1];switch(i){case ft.start:n.listener&&n.listener.start&&n.listener.start(n);for(let t=0;t<e.length;t++){const s=e[t];s.start&&s.start(n)}break;case ft.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(let t=0;t<e.length;t++){const s=e[t];s.interrupt&&s.interrupt(n)}break;case ft.end:n.listener&&n.listener.end&&n.listener.end(n);for(let t=0;t<e.length;t++){const s=e[t];s.end&&s.end(n)}case ft.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(let t=0;t<e.length;t++){const s=e[t];s.dispose&&s.dispose(n)}this.animState.trackEntryPool.free(n);break;case ft.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(let t=0;t<e.length;t++){const s=e[t];s.complete&&s.complete(n)}break;case ft.event:const i=t[2+s++];n.listener&&n.listener.event&&n.listener.event(n,i);for(let t=0;t<e.length;t++){const s=e[t];s.event&&s.event(n,i)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}},ft=(t=>(t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",t))(ft||{}),pt=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},mt=0,gt=1,xt=2,wt=3,yt=4,bt=1,vt=2,At=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){const i=this.skeletonData.findAnimation(t);if(!i)throw new Error(`Animation not found: ${t}`);const n=this.skeletonData.findAnimation(e);if(!n)throw new Error(`Animation not found: ${e}`);this.setMixWith(i,n,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");const i=`${t.name}.${e.name}`;this.animationToMixTime[i]=s}getMix(t,e){const s=`${t.name}.${e.name}`,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}},St=class extends S{constructor(t){super(t),this.color=new h(1,1,1,1)}copy(){const t=new St(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},Mt=class extends S{constructor(t){super(t),this.endSlot=null,this.color=new h(.2275,.2275,.8078,1)}copy(){const t=new Mt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},It=class{constructor(t){this._image=t}getImage(){return this._image}},Et=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",t))(Et||{}),kt=(t=>(t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",t))(kt||{}),Tt=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},Ct=class extends It{setFilters(t,e){}setWraps(t,e){}dispose(){}},Rt=class{constructor(t){this.pages=new Array,this.regions=new Array;const e=new Ft(t),s=new Array(4),i={size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},format:()=>{},filter:t=>{t.minFilter=m.enumValue(Et,s[1]),t.magFilter=m.enumValue(Et,s[2])},repeat:t=>{-1!=s[1].indexOf("x")&&(t.uWrap=10497),-1!=s[1].indexOf("y")&&(t.vWrap=10497)},pma:t=>{t.pma="true"==s[1]}},n={xy:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},bounds:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},offset:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},orig:t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},offsets:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},rotate:t=>{const e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(s[1])}};let r=e.readLine();for(;r&&0==r.trim().length;)r=e.readLine();for(;r&&0!=r.trim().length&&0!=e.readEntry(s,r);)r=e.readLine();let o=null,a=null,h=null;for(;null!==r;)if(0==r.trim().length)o=null,r=e.readLine();else if(o){const t=new Pt(o,r);for(;;){const i=e.readEntry(s,r=e.readLine());if(0==i)break;const o=n[s[0]];if(o)o(t);else{a||(a=[]),h||(h=[]),a.push(s[0]);const t=[];for(let e=0;e<i;e++)t.push(parseInt(s[e+1]));h.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),a&&a.length>0&&h&&h.length>0&&(t.names=a,t.values=h,a=null,h=null),t.u=t.x/o.width,t.v=t.y/o.height,90==t.degrees?(t.u2=(t.x+t.height)/o.width,t.v2=(t.y+t.width)/o.height):(t.u2=(t.x+t.width)/o.width,t.v2=(t.y+t.height)/o.height),this.regions.push(t)}else{for(o=new Yt(r.trim());0!=e.readEntry(s,r=e.readLine());){const t=i[s[0]];t&&t(o)}this.pages.push(o)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(const s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){let t;for(let e=0;e<this.pages.length;e++)null==(t=this.pages[e].texture)||t.dispose()}},Ft=class{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;const s=e.indexOf(":");if(-1==s)return 0;t[0]=e.substr(0,s).trim();for(let i=1,n=s+1;;i++){const s=e.indexOf(",",n);if(-1==s)return t[i]=e.substr(n).trim(),i;if(t[i]=e.substr(n,s-n).trim(),n=s+1,4==i)return 4}}},Yt=class{constructor(t){this.minFilter=9728,this.magFilter=9728,this.uWrap=33071,this.vWrap=33071,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}},Pt=class extends Tt{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e}},Xt=class extends S{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new h(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new h(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");const t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=m.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,n=this.region.v,r=0,o=0;if(this.region instanceof Pt){const a=this.region,h=a.page.texture.getImage(),l=h.width,c=h.height;switch(a.degrees){case 90:i-=(a.originalHeight-a.offsetY-a.height)/l,n-=(a.originalWidth-a.offsetX-a.width)/c,r=a.originalHeight/l,o=a.originalWidth/c;for(let a=0;a<s;a+=2)e[a]=i+t[a+1]*r,e[a+1]=n+(1-t[a])*o;return;case 180:i-=(a.originalWidth-a.offsetX-a.width)/l,n-=a.offsetY/c,r=a.originalWidth/l,o=a.originalHeight/c;for(let a=0;a<s;a+=2)e[a]=i+(1-t[a])*r,e[a+1]=n+(1-t[a+1])*o;return;case 270:i-=a.offsetY/l,n-=a.offsetX/c,r=a.originalHeight/l,o=a.originalWidth/c;for(let a=0;a<s;a+=2)e[a]=i+(1-t[a+1])*r,e[a+1]=n+t[a]*o;return}i-=a.offsetX/l,n-=(a.originalHeight-a.offsetY-a.height)/c,r=a.originalWidth/l,o=a.originalHeight/c}else this.region?(r=this.region.u2-i,o=this.region.v2-n):(i=n=0,r=o=1);for(let a=0;a<s;a+=2)e[a]=i+t[a]*r,e[a+1]=n+t[a+1]*o}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const t=new Xt(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),m.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),m.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),m.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),m.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,i,n,r){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,i,n,r)}newLinkedMesh(){const t=new Xt(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}},Lt=class extends S{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new h(1,1,1,1)}copy(){const t=new Lt(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),m.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},Ot=class extends S{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new h(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){const e=c.cosDeg(this.rotation),s=c.sinDeg(this.rotation),i=e*t.a+s*t.b,n=e*t.c+s*t.d;return Math.atan2(n,i)*c.radDeg}copy(){const t=new Ot(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Dt=class extends v{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new h(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=m.newFloatArray(8),this.uvs=m.newFloatArray(8),this.tempColor=new h(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");const t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);const s=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*s,r=-this.height/2*this.scaleY+this.region.offsetY*i,o=n+this.region.width*s,a=r+this.region.height*i,h=this.rotation*Math.PI/180,l=Math.cos(h),c=Math.sin(h),u=this.x,d=this.y,f=n*l+u,p=n*c,m=r*l+d,g=r*c,x=o*l+u,w=o*c,y=a*l+d,b=a*c,v=this.offset;v[0]=f-g,v[1]=m+p,v[2]=f-b,v[3]=y+p,v[4]=x-b,v[5]=y+w,v[6]=x-g,v[7]=m+w,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,i){null!=this.sequence&&this.sequence.apply(t,this);let n=t.bone,r=this.offset,o=n.worldX,a=n.worldY,h=n.a,l=n.b,c=n.c,u=n.d,d=0,f=0;d=r[0],f=r[1],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a,s+=i,d=r[2],f=r[3],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a,s+=i,d=r[4],f=r[5],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a,s+=i,d=r[6],f=r[7],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a}copy(){const t=new Dt(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,m.arrayCopy(this.uvs,0,t.uvs,0,8),m.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}},Bt=Dt;Bt.X1=0,Bt.Y1=1,Bt.C1R=2,Bt.C1G=3,Bt.C1B=4,Bt.C1A=5,Bt.U1=6,Bt.V1=7,Bt.X2=8,Bt.Y2=9,Bt.C2R=10,Bt.C2G=11,Bt.C2B=12,Bt.C2A=13,Bt.U2=14,Bt.V2=15,Bt.X3=16,Bt.Y3=17,Bt.C3R=18,Bt.C3G=19,Bt.C3B=20,Bt.C3A=21,Bt.U3=22,Bt.V3=23,Bt.X4=24,Bt.Y4=25,Bt.C4R=26,Bt.C4G=27,Bt.C4B=28,Bt.C4A=29,Bt.U4=30,Bt.V4=31;var Vt=class{constructor(t){this.atlas=t}loadSequence(t,e,s){const i=s.regions;for(let n=0,r=i.length;n<r;n++){const r=s.getPath(e,n),o=this.atlas.findRegion(r);if(null==o)throw new Error(`Region not found in atlas: ${r} (sequence: ${t})`);i[n]=o,i[n].renderObject=i[n]}}newRegionAttachment(t,e,s,i){const n=new Bt(e,s);if(null!=i)this.loadSequence(e,s,i);else{const t=this.atlas.findRegion(s);if(!t)throw new Error(`Region not found in atlas: ${s} (region attachment: ${e})`);t.renderObject=t,n.region=t}return n}newMeshAttachment(t,e,s,i){const n=new Xt(e,s);if(null!=i)this.loadSequence(e,s,i);else{const t=this.atlas.findRegion(s);if(!t)throw new Error(`Region not found in atlas: ${s} (mesh attachment: ${e})`);t.renderObject=t,n.region=t}return n}newBoundingBoxAttachment(t,e){return new St(e)}newPathAttachment(t,e){return new Lt(e)}newPointAttachment(t,e){return new Ot(e)}newClippingAttachment(t,e){return new Mt(e)}},zt=class{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Nt.Normal,this.skinRequired=!1,this.color=new h,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}},Nt=(t=>(t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection",t))(Nt||{}),_t=class{constructor(t,e,s){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,n,r,o){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=n,this.ashearX=r,this.ashearY=o;const a=this.parent;if(!a){const a=this.skeleton,h=s+90+o,l=a.scaleX,u=a.scaleY;return this.a=c.cosDeg(s+r)*i*l,this.b=c.cosDeg(h)*n*l,this.c=c.sinDeg(s+r)*i*u,this.d=c.sinDeg(h)*n*u,this.worldX=t*l+a.x,void(this.worldY=e*u+a.y)}let h=a.a,l=a.b,u=a.c,d=a.d;switch(this.worldX=h*t+l*e+a.worldX,this.worldY=u*t+d*e+a.worldY,this.data.transformMode){case 0:{const t=s+90+o,e=c.cosDeg(s+r)*i,a=c.cosDeg(t)*n,f=c.sinDeg(s+r)*i,p=c.sinDeg(t)*n;return this.a=h*e+l*f,this.b=h*a+l*p,this.c=u*e+d*f,void(this.d=u*a+d*p)}case 1:{const t=s+90+o;this.a=c.cosDeg(s+r)*i,this.b=c.cosDeg(t)*n,this.c=c.sinDeg(s+r)*i,this.d=c.sinDeg(t)*n;break}case 2:{let t=h*h+u*u,e=0;t>1e-4?(t=Math.abs(h*d-l*u)/t,h/=this.skeleton.scaleX,u/=this.skeleton.scaleY,l=u*t,d=h*t,e=Math.atan2(u,h)*c.radDeg):(h=0,u=0,e=90-Math.atan2(d,l)*c.radDeg);const a=s+r-e,f=s+o-e+90,p=c.cosDeg(a)*i,m=c.cosDeg(f)*n,g=c.sinDeg(a)*i,x=c.sinDeg(f)*n;this.a=h*p-l*g,this.b=h*m-l*x,this.c=u*p+d*g,this.d=u*m+d*x;break}case 3:case 4:{let t=c.cosDeg(s),e=c.sinDeg(s),a=(h*t+l*e)/this.skeleton.scaleX,f=(u*t+d*e)/this.skeleton.scaleY,p=Math.sqrt(a*a+f*f);p>1e-5&&(p=1/p),a*=p,f*=p,p=Math.sqrt(a*a+f*f),3==this.data.transformMode&&h*d-l*u<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p);const m=Math.PI/2+Math.atan2(f,a),g=Math.cos(m)*p,x=Math.sin(m)*p,w=c.cosDeg(r)*i,y=c.cosDeg(90+o)*n,b=c.sinDeg(r)*i,v=c.sinDeg(90+o)*n;this.a=a*w+g*b,this.b=a*y+g*v,this.c=f*w+x*b,this.d=f*y+x*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*c.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*c.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){const t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*c.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*c.radDeg);const e=t.a,s=t.b,i=t.c,n=t.d,r=1/(e*n-s*i),o=this.worldX-t.worldX,a=this.worldY-t.worldY;this.ax=o*n*r-a*s*r,this.ay=a*e*r-o*i*r;const h=r*n,l=r*e,u=r*s,d=r*i,f=h*this.a-u*this.c,p=h*this.b-u*this.d,m=l*this.c-d*this.a,g=l*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+m*m),this.ascaleX>1e-4){const t=f*g-p*m;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*p+m*g,t)*c.radDeg,this.arotation=Math.atan2(m,f)*c.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,p)*c.radDeg}worldToLocal(t){const e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){const e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){const e=c.sinDeg(t),s=c.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*c.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;const e=c.sinDeg(t),s=c.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*c.radDeg}rotateWorld(t){const e=this.a,s=this.b,i=this.c,n=this.d,r=c.cosDeg(t),o=c.sinDeg(t);this.a=r*e-o*i,this.b=r*s-o*n,this.c=o*e+r*i,this.d=o*s+r*n}},Ut=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},Wt=class{constructor(t,e="",s=new qt){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise(((t,e)=>{const s=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(s)};requestAnimationFrame(s)}))}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadBinary(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load binary ${t}: status ${e}, ${i}`)}))}loadText(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadText(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load text ${t}: status ${e}, ${i}`)}))}loadJson(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadJson(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load JSON ${t}: status ${e}, ${i}`)}))}loadTexture(t,e=()=>{},s=()=>{}){if(t=this.start(t),"undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document){const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{this.success(e,t,this.textureLoader(i))},i.onerror=()=>{this.error(s,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),i.src=t}else fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(s,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((s=>{s&&this.success(e,t,this.textureLoader(s))}))}loadTextureAtlas(t,e=()=>{},s=()=>{},i){const n=t.lastIndexOf("/"),r=n>=0?t.substring(0,n+1):"";t=this.start(t),this.downloader.downloadText(t,(n=>{try{let o=new Rt(n),a=o.pages.length,h=!1;for(const n of o.pages)this.loadTexture(i?i[n.name]:r+n.name,((s,i)=>{h||(n.setTexture(i),0==--a&&this.success(e,t,o))}),((e,i)=>{h||this.error(s,t,`Couldn't load texture atlas ${t} page image: ${e}`),h=!0}))}catch(e){this.error(s,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,i)=>{this.error(s,t,`Couldn't load texture atlas ${t}: status ${e}, ${i}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;const e=this.assets[t];if(e)return e;const s=this.errors[t];throw Error(`Asset not found: ${t}${s?`\n${s}`:""}`)}remove(t){t=this.pathPrefix+t;const e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(const t in this.assets){const e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},qt=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,i=new Uint8Array(s),n=0;n<s;n++)i[n]=e.charCodeAt(n);return i}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{const e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}const i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);const n=()=>{this.finish(t,i.status,i.responseText)};i.onload=n,i.onerror=n,i.send()}downloadJson(t,e,s){this.downloadText(t,(t=>{e(JSON.parse(t))}),s)}downloadBinary(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{const e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";const n=()=>{this.finish(t,i.status,i.response)};i.onload=()=>{200==i.status||0==i.status?this.finish(t,200,new Uint8Array(i.response)):n()},i.onerror=n,i.send()}start(t,e,s){let i=this.callbacks[t];try{if(i)return!0;this.callbacks[t]=i=[]}finally{i.push(e,s)}}finish(t,e,s){const i=this.callbacks[t];delete this.callbacks[t];const n=200==e||0==e?[s]:[e,s];for(let t=n.length-1,e=i.length;t<e;t+=2)i[t].apply(null,n)}},Gt=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},jt=class{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},$t=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++){const i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}`);this.bones.push(i)}const s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=s}isActive(){return this.active}update(){if(0==this.mix)return;const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,n,r,o){const a=t.parent;if(!a)throw new Error("IK bone must have parent.");let h=a.a,l=a.b,u=a.c,d=a.d,f=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case 1:p=e-t.worldX,m=s-t.worldY;break;case 2:const i=Math.abs(h*d-l*u)/(h*h+u*u),n=h/t.skeleton.scaleX,r=u/t.skeleton.scaleY;l=-r*i*t.skeleton.scaleX,d=n*i*t.skeleton.scaleY,f+=Math.atan2(r,n)*c.radDeg;default:const o=e-a.worldX,g=s-a.worldY,x=h*d-l*u;p=(o*d-g*l)/x-t.ax,m=(g*h-o*u)/x-t.ay}f+=Math.atan2(m,p)*c.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(i||n){switch(t.data.transformMode){case 3:case 4:p=e-t.worldX,m=s-t.worldY}const a=t.data.length*g,h=Math.sqrt(p*p+m*m);if(i&&h<a||n&&h>a&&a>1e-4){const t=(h/a-1)*o+1;g*=t,r&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*o,g,x,t.ashearX,t.ashearY)}apply2(t,e,s,i,n,r,o,a,h){let l=t.ax,u=t.ay,d=t.ascaleX,f=t.ascaleY,p=d,m=f,g=e.ascaleX,x=0,w=0,y=0;d<0?(d=-d,x=180,y=-1):(x=0,y=1),f<0&&(f=-f,y=-y),g<0?(g=-g,w=180):w=0;let b=e.ax,v=0,A=0,S=0,M=t.a,I=t.b,E=t.c,k=t.d,T=Math.abs(d-f)<=1e-4;!T||r?(v=0,A=M*b+t.worldX,S=E*b+t.worldY):(v=e.ay,A=M*b+I*v+t.worldX,S=E*b+k*v+t.worldY);const C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");M=C.a,I=C.b,E=C.c,k=C.d;let R,F,Y=1/(M*k-I*E),P=A-C.worldX,X=S-C.worldY,L=(P*k-X*I)*Y-l,O=(X*M-P*E)*Y-u,D=Math.sqrt(L*L+O*O),B=e.data.length*g;if(D<1e-4)return this.apply1(t,s,i,!1,r,!1,h),void e.updateWorldTransformWith(b,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);P=s-C.worldX,X=i-C.worldY;let V=(P*k-X*I)*Y-l,z=(X*M-P*E)*Y-u,N=V*V+z*z;if(0!=a){a*=d*(g+1)*.5;const t=Math.sqrt(N),e=t-D-B*d+a;if(e>0){let s=Math.min(1,e/(2*a))-1;s=(e-a*(1-s*s))/t,V-=s*V,z-=s*z,N=V*V+z*z}}t:if(T){B*=d;let t=(N-D*D-B*B)/(2*D*B);t<-1?(t=-1,F=Math.PI*n):t>1?(t=1,F=0,r&&(M=(Math.sqrt(N)/(D+B)-1)*h+1,p*=M,o&&(m*=M))):F=Math.acos(t)*n,M=D+B*t,I=B*Math.sin(F),R=Math.atan2(z*M-V*I,V*M+z*I)}else{M=d*B,I=f*B;const t=M*M,e=I*I,s=Math.atan2(z,V);E=e*D*D+t*N-t*e;const i=-2*e*D,r=e-t;if(k=i*i-4*r*E,k>=0){let t=Math.sqrt(k);i<0&&(t=-t),t=.5*-(i+t);const e=t/r,o=E/t,a=Math.abs(e)<Math.abs(o)?e:o;if(a*a<=N){X=Math.sqrt(N-a*a)*n,R=s-Math.atan2(X,a),F=Math.atan2(X/f,(a-D)/d);break t}}let o=c.PI,a=D-M,h=a*a,l=0,u=0,p=D+M,m=p*p,g=0;E=-M*D/(t-e),E>=-1&&E<=1&&(E=Math.acos(E),P=M*Math.cos(E)+D,X=I*Math.sin(E),k=P*P+X*X,k<h&&(o=E,h=k,a=P,l=X),k>m&&(u=E,m=k,p=P,g=X)),N<=.5*(h+m)?(R=s-Math.atan2(l*n,a),F=o*n):(R=s-Math.atan2(g*n,p),F=u*n)}let _=Math.atan2(v,b)*y,U=t.arotation;R=(R-_)*c.radDeg+x-U,R>180?R-=360:R<-180&&(R+=360),t.updateWorldTransformWith(l,u,U+R*h,p,m,0,0),U=e.arotation,F=((F+_)*c.radDeg-e.ashearX)*y+w-U,F>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(b,v,U+F*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},Ht=class extends Ut{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},Zt=class extends Ut{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Kt.Fixed,this.spacingMode=Jt.Fixed,this.rotateMode=Qt.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}},Kt=(t=>(t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",t))(Kt||{}),Jt=(t=>(t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional",t))(Jt||{}),Qt=(t=>(t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale",t))(Qt||{}),te=class{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,i=t.bones.length;s<i;s++){const i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}const s=e.findSlot(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=s,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){const t=this.target.getAttachment();if(!(t instanceof Lt))return;const e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;const n=this.data,r=0==n.rotateMode,o=2==n.rotateMode,a=this.bones,h=a.length,l=r?h:h+1,u=m.setArraySize(this.spaces,l),d=o?this.lengths=m.setArraySize(this.lengths,h):[],f=this.spacing;switch(n.spacingMode){case 2:if(o)for(let t=0,e=l-1;t<e;t++){const e=a[t],s=e.data.length;if(s<te.epsilon)d[t]=0;else{const i=s*e.a,n=s*e.c;d[t]=Math.sqrt(i*i+n*n)}}m.arrayFill(u,1,l,f);break;case 3:let t=0;for(let e=0,s=l-1;e<s;){const s=a[e],i=s.data.length;if(i<te.epsilon)o&&(d[e]=0),u[++e]=f;else{const n=i*s.a,r=i*s.c,a=Math.sqrt(n*n+r*r);o&&(d[e]=a),u[++e]=a,t+=a}}if(t>0){t=l/t*f;for(let e=1;e<l;e++)u[e]*=t}break;default:const e=0==n.spacingMode;for(let t=0,s=l-1;t<s;){const s=a[t],i=s.data.length;if(i<te.epsilon)o&&(d[t]=0),u[++t]=f;else{const n=i*s.a,r=i*s.c,a=Math.sqrt(n*n+r*r);o&&(d[t]=a),u[++t]=(e?i+f:f)*a/i}}}let p=this.computeWorldPositions(t,l,r),g=p[0],x=p[1],w=n.offsetRotation,y=!1;if(0==w)y=1==n.rotateMode;else{y=!1;const t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?c.degRad:-c.degRad}for(let t=0,n=3;t<h;t++,n+=3){const h=a[t];h.worldX+=(g-h.worldX)*s,h.worldY+=(x-h.worldY)*i;const l=p[n],f=p[n+1],m=l-g,b=f-x;if(o){const s=d[t];if(0!=s){const t=(Math.sqrt(m*m+b*b)/s-1)*e+1;h.a*=t,h.c*=t}}if(g=l,x=f,e>0){let s=h.a,i=h.b,o=h.c,a=h.d,l=0,d=0,f=0;if(l=r?p[n-1]:0==u[t+1]?p[n+2]:Math.atan2(b,m),l-=Math.atan2(o,s),y){d=Math.cos(l),f=Math.sin(l);const t=h.data.length;g+=(t*(d*s-f*o)-m)*e,x+=(t*(f*s+d*o)-b)*e}else l+=w;l>c.PI?l-=c.PI2:l<-c.PI&&(l+=c.PI2),l*=e,d=Math.cos(l),f=Math.sin(l),h.a=d*s-f*o,h.b=d*i-f*a,h.c=f*s+d*o,h.d=f*i+d*a}h.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i=this.target,n=this.position,r=this.spaces,o=m.setArraySize(this.positions,3*e+2),a=this.world,h=t.closed,l=t.worldVerticesLength,c=l/6,u=te.NONE;if(!t.constantSpeed){const d=t.lengths;c-=h?1:2;let f,p=d[c];switch(1==this.data.positionMode&&(n*=p),this.data.spacingMode){case 2:f=p;break;case 3:f=p/e;break;default:f=1}a=m.setArraySize(this.world,8);for(let m=0,g=0,x=0;m<e;m++,g+=3){const e=r[m]*f;n+=e;let w=n;if(h)w%=p,w<0&&(w+=p),x=0;else{if(w<0){u!=te.BEFORE&&(u=te.BEFORE,t.computeWorldVertices(i,2,4,a,0,2)),this.addBeforePosition(w,a,0,o,g);continue}if(w>p){u!=te.AFTER&&(u=te.AFTER,t.computeWorldVertices(i,l-6,4,a,0,2)),this.addAfterPosition(w-p,a,0,o,g);continue}}for(;;x++){const t=d[x];if(!(w>t)){if(0==x)w/=t;else{const e=d[x-1];w=(w-e)/(t-e)}break}}x!=u&&(u=x,h&&x==c?(t.computeWorldVertices(i,l-4,4,a,0,2),t.computeWorldVertices(i,0,4,a,4,2)):t.computeWorldVertices(i,6*x+2,8,a,0,2)),this.addCurvePosition(w,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],o,g,s||m>0&&0==e)}return o}h?(l+=2,a=m.setArraySize(this.world,l),t.computeWorldVertices(i,2,l-4,a,0,2),t.computeWorldVertices(i,0,2,a,l-4,2),a[l-2]=a[0],a[l-1]=a[1]):(c--,l-=4,a=m.setArraySize(this.world,l),t.computeWorldVertices(i,2,l,a,0,2));let d,f=m.setArraySize(this.curves,c),p=0,g=a[0],x=a[1],w=0,y=0,b=0,v=0,A=0,S=0,M=0,I=0,E=0,k=0,T=0,C=0,R=0,F=0;for(let t=0,e=2;t<c;t++,e+=6)w=a[e],y=a[e+1],b=a[e+2],v=a[e+3],A=a[e+4],S=a[e+5],M=.1875*(g-2*w+b),I=.1875*(x-2*y+v),E=.09375*(3*(w-b)-g+A),k=.09375*(3*(y-v)-x+S),T=2*M+E,C=2*I+k,R=.75*(w-g)+M+.16666667*E,F=.75*(y-x)+I+.16666667*k,p+=Math.sqrt(R*R+F*F),R+=T,F+=C,T+=E,C+=k,p+=Math.sqrt(R*R+F*F),R+=T,F+=C,p+=Math.sqrt(R*R+F*F),R+=T+E,F+=C+k,p+=Math.sqrt(R*R+F*F),f[t]=p,g=A,x=S;switch(1==this.data.positionMode&&(n*=p),this.data.spacingMode){case 2:d=p;break;case 3:d=p/e;break;default:d=1}let Y=this.segments,P=0;for(let t=0,i=0,c=0,m=0;t<e;t++,i+=3){const e=r[t]*d;n+=e;let X=n;if(h)X%=p,X<0&&(X+=p),c=0;else{if(X<0){this.addBeforePosition(X,a,0,o,i);continue}if(X>p){this.addAfterPosition(X-p,a,l-4,o,i);continue}}for(;;c++){const t=f[c];if(!(X>t)){if(0==c)X/=t;else{const e=f[c-1];X=(X-e)/(t-e)}break}}if(c!=u){u=c;let t=6*c;for(g=a[t],x=a[t+1],w=a[t+2],y=a[t+3],b=a[t+4],v=a[t+5],A=a[t+6],S=a[t+7],M=.03*(g-2*w+b),I=.03*(x-2*y+v),E=.006*(3*(w-b)-g+A),k=.006*(3*(y-v)-x+S),T=2*M+E,C=2*I+k,R=.3*(w-g)+M+.16666667*E,F=.3*(y-x)+I+.16666667*k,P=Math.sqrt(R*R+F*F),Y[0]=P,t=1;t<8;t++)R+=T,F+=C,T+=E,C+=k,P+=Math.sqrt(R*R+F*F),Y[t]=P;R+=T,F+=C,P+=Math.sqrt(R*R+F*F),Y[8]=P,R+=T+E,F+=C+k,P+=Math.sqrt(R*R+F*F),Y[9]=P,m=0}for(X*=P;;m++){const t=Y[m];if(!(X>t)){if(0==m)X/=t;else{const e=Y[m-1];X=m+(X-e)/(t-e)}break}}this.addCurvePosition(.1*X,g,x,w,y,b,v,A,S,o,i,s||t>0&&0==e)}return o}addBeforePosition(t,e,s,i,n){const r=e[s],o=e[s+1],a=e[s+2]-r,h=e[s+3]-o,l=Math.atan2(h,a);i[n]=r+t*Math.cos(l),i[n+1]=o+t*Math.sin(l),i[n+2]=l}addAfterPosition(t,e,s,i,n){const r=e[s+2],o=e[s+3],a=r-e[s],h=o-e[s+1],l=Math.atan2(h,a);i[n]=r+t*Math.cos(l),i[n+1]=o+t*Math.sin(l),i[n+2]=l}addCurvePosition(t,e,s,i,n,r,o,a,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=s,void(l[c+2]=Math.atan2(n-s,i-e));const d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,x=p*t,w=3*x,y=p*w,b=w*t,v=e*g+i*y+r*b+a*f,A=s*g+n*y+o*b+h*f;l[c]=v,l[c+1]=A,u&&(l[c+2]=t<.001?Math.atan2(n-s,i-e):Math.atan2(A-(s*m+n*x*2+o*d),v-(e*m+i*x*2+r*d)))}},ee=te;ee.NONE=-1,ee.BEFORE=-2,ee.AFTER=-3,ee.epsilon=1e-5;var se=class{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new h,this.darkColor=t.darkColor?new h:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof S&&this.attachment instanceof S&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},ie=class{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new w,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let s=0;s<t.bones.length;s++){const i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}const s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=s}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=0!=e||0!=s,a=this.target,h=a.a,l=a.b,u=a.c,d=a.d,f=h*d-l*u>0?c.degRad:-c.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){const x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,n=x.d,r=Math.atan2(u,h)-Math.atan2(i,e)+p;r>c.PI?r-=c.PI2:r<-c.PI&&(r+=c.PI2),r*=t;const o=Math.cos(r),a=Math.sin(r);x.a=o*e-a*i,x.b=o*s-a*n,x.c=a*e+o*i,x.d=a*s+o*n}if(o){const t=this.temp;a.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*s}if(0!=i){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+u*u)-t+this.data.offsetScaleX)*i)/t),x.a*=t,x.c*=t}if(0!=n){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(l*l+d*d)-t+this.data.offsetScaleY)*n)/t),x.b*=t,x.d*=t}if(r>0){let t=x.b,e=x.d,s=Math.atan2(e,t),i=Math.atan2(d,l)-Math.atan2(u,h)-(s-Math.atan2(x.c,x.a));i>c.PI?i-=c.PI2:i<-c.PI&&(i+=c.PI2),i=s+(i+m)*r;const n=Math.sqrt(t*t+e*e);x.b=Math.cos(i)*n,x.d=Math.sin(i)*n}x.updateAppliedTransform()}}applyRelativeWorld(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=0!=e||0!=s,a=this.target,h=a.a,l=a.b,u=a.c,d=a.d,f=h*d-l*u>0?c.degRad:-c.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){const x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,n=x.d,r=Math.atan2(u,h)+p;r>c.PI?r-=c.PI2:r<-c.PI&&(r+=c.PI2),r*=t;const o=Math.cos(r),a=Math.sin(r);x.a=o*e-a*i,x.b=o*s-a*n,x.c=a*e+o*i,x.d=a*s+o*n}if(o){const t=this.temp;a.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*s}if(0!=i){const t=(Math.sqrt(h*h+u*u)-1+this.data.offsetScaleX)*i+1;x.a*=t,x.c*=t}if(0!=n){const t=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleY)*n+1;x.b*=t,x.d*=t}if(r>0){let t=Math.atan2(d,l)-Math.atan2(u,h);t>c.PI?t-=c.PI2:t<-c.PI&&(t+=c.PI2);const e=x.b,s=x.d;t=Math.atan2(s,e)+(t-c.PI/2+m)*r;const i=Math.sqrt(e*e+s*s);x.b=Math.cos(t)*i,x.d=Math.sin(t)*i}x.updateAppliedTransform()}}applyAbsoluteLocal(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=this.target,a=this.bones;for(let h=0,l=a.length;h<l;h++){let l=a[h],c=l.arotation;if(0!=t){let e=o.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=l.ax,d=l.ay;u+=(o.ax-u+this.data.offsetX)*e,d+=(o.ay-d+this.data.offsetY)*s;let f=l.ascaleX,p=l.ascaleY;0!=i&&0!=f&&(f=(f+(o.ascaleX-f+this.data.offsetScaleX)*i)/f),0!=n&&0!=p&&(p=(p+(o.ascaleY-p+this.data.offsetScaleY)*n)/p);let m=l.ashearY;if(0!=r){let t=o.ashearY-m+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),m+=t*r}l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}applyRelativeLocal(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=this.target,a=this.bones;for(let h=0,l=a.length;h<l;h++){const l=a[h],c=l.arotation+(o.arotation+this.data.offsetRotation)*t,u=l.ax+(o.ax+this.data.offsetX)*e,d=l.ay+(o.ay+this.data.offsetY)*s,f=l.ascaleX*((o.ascaleX-1+this.data.offsetScaleX)*i+1),p=l.ascaleY*((o.ascaleY-1+this.data.offsetScaleY)*n+1),m=l.ashearY+(o.ashearY+this.data.offsetShearY)*r;l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}},ne=class{constructor(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let s,i=t.bones[e];if(i.parent){const t=this.bones[i.parent.index];s=new _t(i,this,t),t.children.push(s)}else s=new _t(i,this,null);this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const s=t.slots[e],i=this.bones[s.boneData.index],n=new se(s,i);this.slots.push(n),this.drawOrder.push(n)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const s=t.ikConstraints[e];this.ikConstraints.push(new $t(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const s=t.transformConstraints[e];this.transformConstraints.push(new ie(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const s=t.pathConstraints[e];this.pathConstraints.push(new ee(s,this))}this.color=new h(1,1,1,1),this.updateCache()}get scaleY(){return ne.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){this._updateCache.length=0;const t=this.bones;for(let e=0,s=t.length;e<s;e++){const s=t[e];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){const t=this.skin.bones;for(let e=0,s=this.skin.bones.length;e<s;e++){let s=this.bones[t[e].index];do{s.sorted=!1,s.active=!0,s=s.parent}while(s)}}const e=this.ikConstraints,s=this.transformConstraints,i=this.pathConstraints,n=e.length,r=s.length,o=i.length,a=n+r+o;t:for(let t=0;t<a;t++){for(let s=0;s<n;s++){const i=e[s];if(i.data.order==t){this.sortIkConstraint(i);continue t}}for(let e=0;e<r;e++){const i=s[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<o;e++){const s=i[e];if(s.data.order==t){this.sortPathConstraint(s);continue t}}}for(let e=0,s=t.length;e<s;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&m.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target;this.sortBone(e);const s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{const e=s[s.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(i.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&m.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,i);const n=e.getAttachment();n instanceof Lt&&this.sortPathConstraintAttachmentWith(n,i);const r=t.bones,o=r.length;for(let t=0;t<o;t++)this.sortBone(r[t]);this._updateCache.push(t);for(let t=0;t<o;t++)this.sortReset(r[t].children);for(let t=0;t<o;t++)r[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&m.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);const e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){const s=e[t];this.sortBone(s.parent),this.sortBone(s)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,s){const i=t.attachments[e];if(i)for(const t in i)this.sortPathConstraintAttachmentWith(i[t],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Lt))return;const s=t.bones;if(s){const t=this.bones;for(let e=0,i=s.length;e<i;){let i=s[e++];for(i+=e;e<i;)this.sortBone(t[s[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;const e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){const s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){const t=this.bones;for(let e=0,s=t.length;e<s;e++){const s=t[e];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY}const e=this._updateCache;for(let t=0,s=e.length;t<s;t++)e[t].update()}updateWorldTransformWith(t){const e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");const s=t.a,i=t.b,n=t.c,r=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=n*this.x+r*this.y+t.worldY;const o=e.rotation+90+e.shearY,a=c.cosDeg(e.rotation+e.shearX)*e.scaleX,h=c.cosDeg(o)*e.scaleY,l=c.sinDeg(e.rotation+e.shearX)*e.scaleX,u=c.sinDeg(o)*e.scaleY;e.a=(s*a+i*l)*this.scaleX,e.b=(s*h+i*u)*this.scaleX,e.c=(n*a+r*l)*this.scaleY,e.d=(n*h+r*u)*this.scaleY;const d=this._updateCache;for(let t=0,s=d.length;t<s;t++){const s=d[t];s!=e&&s.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();const e=this.ikConstraints;for(let t=0,s=e.length;t<s;t++){const s=e[t];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}const s=this.transformConstraints;for(let t=0,e=s.length;t<e;t++){const e=s[t],i=e.data;e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY,e.mixScaleX=i.mixScaleX,e.mixScaleY=i.mixScaleY,e.mixShearY=i.mixShearY}const i=this.pathConstraints;for(let t=0,e=i.length;t<e;t++){const e=i[t],s=e.data;e.position=s.position,e.spacing=s.spacing,e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY}}setSlotsToSetupPose(){const t=this.slots;m.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}setSkinByName(t){const e=this.data.findSkin(t);if(!e)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{const e=this.slots;for(let s=0,i=e.length;s<i;s++){const i=e[s],n=i.data.attachmentName;if(n){const e=t.getAttachment(s,n);e&&i.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){const s=this.data.findSlot(t);if(!s)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(s.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){const s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");const s=this.slots;for(let i=0,n=s.length;i<n;i++){const n=s[i];if(n.data.name==t){let s=null;if(e&&(s=this.getAttachment(i,e),!s))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);return void n.setAttachment(s)}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}getBoundsRect(){const t=new w,e=new w;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,s=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let i=this.drawOrder,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let t=0,e=i.length;t<e;t++){const e=i[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof Bt)h=8,l=m.setArraySize(s,h,0),c.computeWorldVertices(e,l,0,2);else if(c instanceof Xt){const t=c;h=t.worldVerticesLength,l=m.setArraySize(s,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(l)for(let t=0,e=l.length;t<e;t+=2){const e=l[t],s=l[t+1];n=Math.min(n,e),r=Math.min(r,s),o=Math.max(o,e),a=Math.max(a,s)}}t.set(n,r),e.set(o-n,a-r)}},re=ne;re.yDown=!1;var oe=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");const e=this.skins;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");const e=this.events;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");const e=this.animations;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}},ae=class{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},he=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");const i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}const e=t.getAttachments();for(let t=0;t<e.length;t++){const s=e[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}const e=t.getAttachments();for(let t=0;t<e.length;t++){const s=e[t];s.attachment&&(s.attachment instanceof Xt?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(t,e){const s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){const s=this.attachments[t];s&&delete s[e]}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const s=this.attachments[e];if(s)for(const i in s){const n=s[i];n&&t.push(new ae(e,i,n))}}return t}getAttachmentsForSlot(t,e){const s=this.attachments[t];if(s)for(const i in s){const n=s[i];n&&e.push(new ae(t,i,n))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){const n=t.slots[i],r=n.getAttachment();if(r&&s<e.attachments.length){const t=e.attachments[s];for(const e in t)if(r==t[e]){const t=this.getAttachment(s,e);t&&n.setAttachment(t);break}}s++}}},le=class{constructor(t,e,s){if(this.index=0,this.color=new h(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ce.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}},ce=(t=>(t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen",t))(ce||{}),ue=class extends Ut{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},de=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new oe;s.name="";const i=new fe(t),n=i.readInt32(),r=i.readInt32();s.hash=0==r&&0==n?null:r.toString(16)+n.toString(16),s.version=i.readString(),s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();const o=i.readBoolean();o&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());let a=0;a=i.readInt(!0);for(let t=0;t<a;t++){const t=i.readString();if(!t)throw new Error("String in string table must not be null.");i.strings.push(t)}a=i.readInt(!0);for(let t=0;t<a;t++){const n=i.readString();if(!n)throw new Error("Bone name must not be null.");const r=0==t?null:s.bones[i.readInt(!0)],a=new zt(t,n,r);a.rotation=i.readFloat(),a.x=i.readFloat()*e,a.y=i.readFloat()*e,a.scaleX=i.readFloat(),a.scaleY=i.readFloat(),a.shearX=i.readFloat(),a.shearY=i.readFloat(),a.length=i.readFloat()*e,a.transformMode=i.readInt(!0),a.skinRequired=i.readBoolean(),o&&h.rgba8888ToColor(a.color,i.readInt32()),s.bones.push(a)}a=i.readInt(!0);for(let t=0;t<a;t++){const e=i.readString();if(!e)throw new Error("Slot name must not be null.");const n=s.bones[i.readInt(!0)],r=new le(t,e,n);h.rgba8888ToColor(r.color,i.readInt32());const o=i.readInt32();-1!=o&&h.rgb888ToColor(r.darkColor=new h,o),r.attachmentName=i.readStringRef(),r.blendMode=i.readInt(!0),s.slots.push(r)}a=i.readInt(!0);for(let t,n=0;n<a;n++){const n=i.readString();if(!n)throw new Error("IK constraint data name must not be null.");const r=new Ht(n);r.order=i.readInt(!0),r.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)r.bones.push(s.bones[i.readInt(!0)]);r.target=s.bones[i.readInt(!0)],r.mix=i.readFloat(),r.softness=i.readFloat()*e,r.bendDirection=i.readByte(),r.compress=i.readBoolean(),r.stretch=i.readBoolean(),r.uniform=i.readBoolean(),s.ikConstraints.push(r)}a=i.readInt(!0);for(let t,n=0;n<a;n++){const n=i.readString();if(!n)throw new Error("Transform constraint data name must not be null.");const r=new ue(n);r.order=i.readInt(!0),r.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)r.bones.push(s.bones[i.readInt(!0)]);r.target=s.bones[i.readInt(!0)],r.local=i.readBoolean(),r.relative=i.readBoolean(),r.offsetRotation=i.readFloat(),r.offsetX=i.readFloat()*e,r.offsetY=i.readFloat()*e,r.offsetScaleX=i.readFloat(),r.offsetScaleY=i.readFloat(),r.offsetShearY=i.readFloat(),r.mixRotate=i.readFloat(),r.mixX=i.readFloat(),r.mixY=i.readFloat(),r.mixScaleX=i.readFloat(),r.mixScaleY=i.readFloat(),r.mixShearY=i.readFloat(),s.transformConstraints.push(r)}a=i.readInt(!0);for(let t,n=0;n<a;n++){const n=i.readString();if(!n)throw new Error("Path constraint data name must not be null.");const r=new Zt(n);r.order=i.readInt(!0),r.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)r.bones.push(s.bones[i.readInt(!0)]);r.target=s.slots[i.readInt(!0)],r.positionMode=i.readInt(!0),r.spacingMode=i.readInt(!0),r.rotateMode=i.readInt(!0),r.offsetRotation=i.readFloat(),r.position=i.readFloat(),0==r.positionMode&&(r.position*=e),r.spacing=i.readFloat(),0!=r.spacingMode&&1!=r.spacingMode||(r.spacing*=e),r.mixRotate=i.readFloat(),r.mixX=i.readFloat(),r.mixY=i.readFloat(),s.pathConstraints.push(r)}const l=this.readSkin(i,s,!0,o);l&&(s.defaultSkin=l,s.skins.push(l));{let t=s.skins.length;for(m.setArraySize(s.skins,a=t+i.readInt(!0));t<a;t++){const e=this.readSkin(i,s,!1,o);if(!e)throw new Error("readSkin() should not have returned null.");s.skins[t]=e}}a=this.linkedMeshes.length;for(let t=0;t<a;t++){const e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");const n=i.getAttachment(e.slotIndex,e.parent);if(!n)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?n:e.mesh,e.mesh.setParentMesh(n),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,a=i.readInt(!0);for(let t=0;t<a;t++){const t=i.readStringRef();if(!t)throw new Error;const e=new jt(t);e.intValue=i.readInt(!1),e.floatValue=i.readFloat(),e.stringValue=i.readString(),e.audioPath=i.readString(),e.audioPath&&(e.volume=i.readFloat(),e.balance=i.readFloat()),s.events.push(e)}a=i.readInt(!0);for(let t=0;t<a;t++){const t=i.readString();if(!t)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(i,t,s))}return s}readSkin(t,e,s,i){let n=null,r=0;if(s){if(r=t.readInt(!0),0==r)return null;n=new he("default")}else{const s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");n=new he(s),n.bones.length=t.readInt(!0);for(let s=0,i=n.bones.length;s<i;s++)n.bones[s]=e.bones[t.readInt(!0)];for(let s=0,i=t.readInt(!0);s<i;s++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);r=t.readInt(!0)}for(let s=0;s<r;s++){const s=t.readInt(!0);for(let r=0,o=t.readInt(!0);r<o;r++){const r=t.readStringRef();if(!r)throw new Error("Attachment name must not be null");const o=this.readAttachment(t,e,n,s,r,i);o&&n.setAttachment(s,r,o)}}return n}readAttachment(t,e,s,i,n,r){let o=this.scale,a=t.readStringRef();switch(a||(a=n),t.readByte()){case ge.Region:{let e=t.readStringRef(),i=t.readFloat(),n=t.readFloat(),r=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readInt32(),p=this.readSequence(t);e||(e=a);const m=this.attachmentLoader.newRegionAttachment(s,a,e,p);return m?(m.path=e,m.x=n*o,m.y=r*o,m.scaleX=l,m.scaleY=c,m.rotation=i,m.width=u*o,m.height=d*o,h.rgba8888ToColor(m.color,f),m.sequence=p,null==p&&m.updateRegion(),m):null}case ge.BoundingBox:{const e=t.readInt(!0),i=this.readVertices(t,e),n=r?t.readInt32():0,o=this.attachmentLoader.newBoundingBoxAttachment(s,a);return o?(o.worldVerticesLength=e<<1,o.vertices=i.vertices,o.bones=i.bones,r&&h.rgba8888ToColor(o.color,n),o):null}case ge.Mesh:{let e=t.readStringRef(),i=t.readInt32(),n=t.readInt(!0),l=this.readFloatArray(t,n<<1,1),c=this.readShortArray(t),u=this.readVertices(t,n),d=t.readInt(!0),f=this.readSequence(t),p=[],m=0,g=0;r&&(p=this.readShortArray(t),m=t.readFloat(),g=t.readFloat()),e||(e=a);const x=this.attachmentLoader.newMeshAttachment(s,a,e,f);return x?(x.path=e,h.rgba8888ToColor(x.color,i),x.bones=u.bones,x.vertices=u.vertices,x.worldVerticesLength=n<<1,x.triangles=c,x.regionUVs=l,null==f&&x.updateRegion(),x.hullLength=d<<1,x.sequence=f,r&&(x.edges=p,x.width=m*o,x.height=g*o),x):null}case ge.LinkedMesh:{let e=t.readStringRef(),n=t.readInt32(),l=t.readStringRef(),c=t.readStringRef(),u=t.readBoolean(),d=this.readSequence(t),f=0,p=0;r&&(f=t.readFloat(),p=t.readFloat()),e||(e=a);const m=this.attachmentLoader.newMeshAttachment(s,a,e,d);return m?(m.path=e,h.rgba8888ToColor(m.color,n),m.sequence=d,r&&(m.width=f*o,m.height=p*o),this.linkedMeshes.push(new pe(m,l,i,c,u)),m):null}case ge.Path:{const e=t.readBoolean(),i=t.readBoolean(),n=t.readInt(!0),l=this.readVertices(t,n),c=m.newArray(n/3,0);for(let e=0,s=c.length;e<s;e++)c[e]=t.readFloat()*o;const u=r?t.readInt32():0,d=this.attachmentLoader.newPathAttachment(s,a);return d?(d.closed=e,d.constantSpeed=i,d.worldVerticesLength=n<<1,d.vertices=l.vertices,d.bones=l.bones,d.lengths=c,r&&h.rgba8888ToColor(d.color,u),d):null}case ge.Point:{const e=t.readFloat(),i=t.readFloat(),n=t.readFloat(),l=r?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(s,a);return c?(c.x=i*o,c.y=n*o,c.rotation=e,r&&h.rgba8888ToColor(c.color,l),c):null}case ge.Clipping:{const i=t.readInt(!0),n=t.readInt(!0),o=this.readVertices(t,n),l=r?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(s,a);return c?(c.endSlot=e.slots[i],c.worldVerticesLength=n<<1,c.vertices=o.vertices,c.bones=o.bones,r&&h.rgba8888ToColor(c.color,l),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;const e=new I(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){const s=this.scale,i=e<<1,n=new me;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,i,s),n;const r=new Array,o=new Array;for(let i=0;i<e;i++){const e=t.readInt(!0);o.push(e);for(let i=0;i<e;i++)o.push(t.readInt(!0)),r.push(t.readFloat()*s),r.push(t.readFloat()*s),r.push(t.readFloat())}return n.vertices=m.toFloatArray(r),n.bones=o,n}readFloatArray(t,e,s){const i=new Array(e);if(1==s)for(let s=0;s<e;s++)i[s]=t.readFloat();else for(let n=0;n<e;n++)i[n]=t.readFloat()*s;return i}readShortArray(t){const e=t.readInt(!0),s=new Array(e);for(let i=0;i<e;i++)s[i]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);const i=new Array,n=this.scale;new h,new h;for(let e=0,s=t.readInt(!0);e<s;e++){const e=t.readInt(!0);for(let s=0,n=t.readInt(!0);s<n;s++){const s=t.readByte(),n=t.readInt(!0),r=n-1;switch(s){case Fe:{const s=new Z(n,e);for(let e=0;e<n;e++)s.setFrame(e,t.readFloat(),t.readStringRef());i.push(s);break}case Ye:{let s=t.readInt(!0),o=new q(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c,u),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,d,1),ye(t,o,s++,e,3,a,i,u,f,1)}a=i,h=n,l=r,c=d,u=f}i.push(o);break}case Pe:{let s=t.readInt(!0),o=new G(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,u,1)}a=i,h=n,l=r,c=u}i.push(o);break}case Xe:{let s=t.readInt(!0),o=new $(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c,u,d,f,p),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,m,1),ye(t,o,s++,e,3,a,i,u,g,1),ye(t,o,s++,e,4,a,i,d,x,1),ye(t,o,s++,e,5,a,i,f,w,1),ye(t,o,s++,e,6,a,i,p,y,1)}a=i,h=n,l=r,c=m,u=g,d=x,f=w,p=y}i.push(o);break}case Le:{let s=t.readInt(!0),o=new H(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c,u,d,f),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,p,1),ye(t,o,s++,e,3,a,i,u,m,1),ye(t,o,s++,e,4,a,i,d,g,1),ye(t,o,s++,e,5,a,i,f,x,1)}a=i,h=n,l=r,c=p,u=m,d=g,f=x}i.push(o);break}case Oe:{let s=new j(n,t.readInt(!0),e),o=t.readFloat(),a=t.readUnsignedByte()/255;for(let e=0,i=0;s.setFrame(e,o,a),e!=r;e++){const n=t.readFloat(),r=t.readUnsignedByte()/255;switch(t.readByte()){case _e:s.setStepped(e);break;case Ue:ye(t,s,i++,e,0,o,n,a,r,1)}o=n,a=r}i.push(s)}}}}for(let e=0,s=t.readInt(!0);e<s;e++){const e=t.readInt(!0);for(let s=0,r=t.readInt(!0);s<r;s++){const s=t.readByte(),r=t.readInt(!0),o=t.readInt(!0);switch(s){case ve:i.push(xe(t,new L(r,o,e),1));break;case Ae:i.push(we(t,new O(r,o,e),n));break;case Se:i.push(xe(t,new D(r,o,e),n));break;case Me:i.push(xe(t,new B(r,o,e),n));break;case Ie:i.push(we(t,new V(r,o,e),1));break;case Ee:i.push(xe(t,new z(r,o,e),1));break;case ke:i.push(xe(t,new N(r,o,e),1));break;case Te:i.push(we(t,new _(r,o,e),1));break;case Ce:i.push(xe(t,new U(r,o,e),1));break;case Re:i.push(xe(t,new W(r,o,e),1))}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),r=s-1,o=new st(s,t.readInt(!0),e),a=t.readFloat(),h=t.readFloat(),l=t.readFloat()*n;for(let e=0,s=0;o.setFrame(e,a,h,l,t.readByte(),t.readBoolean(),t.readBoolean()),e!=r;e++){const i=t.readFloat(),r=t.readFloat(),c=t.readFloat()*n;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,r,1),ye(t,o,s++,e,1,a,i,l,c,n)}a=i,h=r,l=c}i.push(o)}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),n=s-1,r=new it(s,t.readInt(!0),e),o=t.readFloat(),a=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat();for(let e=0,s=0;r.setFrame(e,o,a,h,l,c,u,d),e!=n;e++){const i=t.readFloat(),n=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),x=t.readFloat();switch(t.readByte()){case _e:r.setStepped(e);break;case Ue:ye(t,r,s++,e,0,o,i,a,n,1),ye(t,r,s++,e,1,o,i,h,f,1),ye(t,r,s++,e,2,o,i,l,p,1),ye(t,r,s++,e,3,o,i,c,m,1),ye(t,r,s++,e,4,o,i,u,g,1),ye(t,r,s++,e,5,o,i,d,x,1)}o=i,a=n,h=f,l=p,c=m,u=g,d=x}i.push(r)}for(let e=0,r=t.readInt(!0);e<r;e++){const e=t.readInt(!0),r=s.pathConstraints[e];for(let s=0,o=t.readInt(!0);s<o;s++)switch(t.readByte()){case Ve:i.push(xe(t,new nt(t.readInt(!0),t.readInt(!0),e),0==r.positionMode?n:1));break;case ze:i.push(xe(t,new rt(t.readInt(!0),t.readInt(!0),e),0==r.spacingMode||1==r.spacingMode?n:1));break;case Ne:let s=new ot(t.readInt(!0),t.readInt(!0),e),o=t.readFloat(),a=t.readFloat(),h=t.readFloat(),l=t.readFloat();for(let e=0,i=0,n=s.getFrameCount()-1;s.setFrame(e,o,a,h,l),e!=n;e++){const n=t.readFloat(),r=t.readFloat(),c=t.readFloat(),u=t.readFloat();switch(t.readByte()){case _e:s.setStepped(e);break;case Ue:ye(t,s,i++,e,0,o,n,a,r,1),ye(t,s,i++,e,1,o,n,h,c,1),ye(t,s,i++,e,2,o,n,l,u,1)}o=n,a=r,h=c,l=u}i.push(s)}}for(let e=0,r=t.readInt(!0);e<r;e++){const e=s.skins[t.readInt(!0)];for(let s=0,r=t.readInt(!0);s<r;s++){const s=t.readInt(!0);for(let r=0,o=t.readInt(!0);r<o;r++){const r=t.readStringRef();if(!r)throw new Error("attachmentName must not be null.");const o=e.getAttachment(s,r),a=t.readByte(),h=t.readInt(!0),l=h-1;switch(a){case De:{let e=o,r=e.bones,a=e.vertices,c=r?a.length/3*2:a.length,u=t.readInt(!0),d=new K(h,u,s,e),f=t.readFloat();for(let e=0,s=0;;e++){let i,o=t.readInt(!0);if(0==o)i=r?m.newFloatArray(c):a;else{i=m.newFloatArray(c);const e=t.readInt(!0);if(o+=e,1==n)for(let s=e;s<o;s++)i[s]=t.readFloat();else for(let s=e;s<o;s++)i[s]=t.readFloat()*n;if(!r)for(let t=0,e=i.length;t<e;t++)i[t]+=a[t]}if(d.setFrame(e,f,i),e==l)break;const h=t.readFloat();switch(t.readByte()){case _e:d.setStepped(e);break;case Ue:ye(t,d,s++,e,0,f,h,0,1,1)}f=h}i.push(d);break}case Be:{const e=new ht(h,s,o);for(let s=0;s<h;s++){const i=t.readFloat(),n=t.readInt32();e.setFrame(s,i,k[15&n],n>>4,t.readFloat())}i.push(e);break}}}}}const r=t.readInt(!0);if(r>0){const e=new et(r),n=s.slots.length;for(let s=0;s<r;s++){const i=t.readFloat(),r=t.readInt(!0),o=m.newArray(n,0);for(let t=n-1;t>=0;t--)o[t]=-1;let a=m.newArray(n-r,0),h=0,l=0;for(let e=0;e<r;e++){const e=t.readInt(!0);for(;h!=e;)a[l++]=h++;o[h+t.readInt(!0)]=h++}for(;h<n;)a[l++]=h++;for(let t=n-1;t>=0;t--)-1==o[t]&&(o[t]=a[--l]);e.setFrame(s,i,o)}i.push(e)}const o=t.readInt(!0);if(o>0){const e=new Q(o);for(let i=0;i<o;i++){const n=t.readFloat(),r=s.events[t.readInt(!0)],o=new Gt(n,r);o.intValue=t.readInt(!1),o.floatValue=t.readFloat(),o.stringValue=t.readBoolean()?t.readString():r.stringValue,o.data.audioPath&&(o.volume=t.readFloat(),o.balance=t.readFloat()),e.setFrame(i,o)}i.push(e)}let a=0;for(let t=0,e=i.length;t<e;t++)a=Math.max(a,i[t].getDuration());return new T(e,i,a)}},fe=class{constructor(t,e=new Array,s=0,i=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){const t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=127&e;return!!(128&e)&&(e=this.readByte(),s|=(127&e)<<7,!!(128&e)&&(e=this.readByte(),s|=(127&e)<<14,!!(128&e)&&(e=this.readByte(),s|=(127&e)<<21,!!(128&e)&&(e=this.readByte(),s|=(127&e)<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){const t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){const t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),s+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),s+=3;break;default:e+=String.fromCharCode(t),s++}}return e}readFloat(){const t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},pe=class{constructor(t,e,s,i,n){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=n}},me=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},ge=(t=>(t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping",t))(ge||{});function xe(t,e,s){let i=t.readFloat(),n=t.readFloat()*s;for(let r=0,o=0,a=e.getFrameCount()-1;e.setFrame(r,i,n),r!=a;r++){const a=t.readFloat(),h=t.readFloat()*s;switch(t.readByte()){case _e:e.setStepped(r);break;case Ue:ye(t,e,o++,r,0,i,a,n,h,s)}i=a,n=h}return e}function we(t,e,s){let i=t.readFloat(),n=t.readFloat()*s,r=t.readFloat()*s;for(let o=0,a=0,h=e.getFrameCount()-1;e.setFrame(o,i,n,r),o!=h;o++){const h=t.readFloat(),l=t.readFloat()*s,c=t.readFloat()*s;switch(t.readByte()){case _e:e.setStepped(o);break;case Ue:ye(t,e,a++,o,0,i,h,n,l,s),ye(t,e,a++,o,1,i,h,r,c,s)}i=h,n=l,r=c}return e}function ye(t,e,s,i,n,r,o,a,h,l){e.setBezier(s,i,n,r,a,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,o,h)}var be,ve=0,Ae=1,Se=2,Me=3,Ie=4,Ee=5,ke=6,Te=7,Ce=8,Re=9,Fe=0,Ye=1,Pe=2,Xe=3,Le=4,Oe=5,De=0,Be=1,Ve=0,ze=1,Ne=2,_e=1,Ue=2,We=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new x((()=>m.newFloatArray(16)))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");const s=this.boundingBoxes,i=this.polygons,n=this.polygonPool,r=t.slots,o=r.length;s.length=0,n.freeAll(i),i.length=0;for(let t=0;t<o;t++){const e=r[t];if(!e.bone.active)continue;const o=e.getAttachment();if(o instanceof St){const t=o;s.push(t);let r=n.obtain();r.length!=t.worldVerticesLength&&(r=m.newFloatArray(t.worldVerticesLength)),i.push(r),t.computeWorldVertices(e,0,t.worldVerticesLength,r,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=this.polygons;for(let r=0,o=n.length;r<o;r++){const o=n[r],a=o;for(let n=0,r=o.length;n<r;n+=2){const r=a[n],o=a[n+1];t=Math.min(t,r),e=Math.min(e,o),s=Math.max(s,r),i=Math.max(i,o)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,i){const n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;if(t<=n&&s<=n||e<=r&&i<=r||t>=o&&s>=o||e>=a&&i>=a)return!1;let h=(i-e)/(s-t),l=h*(n-t)+e;if(l>r&&l<a)return!0;if(l=h*(o-t)+e,l>r&&l<a)return!0;let c=(r-e)/h+t;return c>n&&c<o||(c=(a-e)/h+t,c>n&&c<o)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){const s=this.polygons;for(let i=0,n=s.length;i<n;i++)if(this.containsPointPolygon(s[i],t,e))return this.boundingBoxes[i];return null}containsPointPolygon(t,e,s){let i=t,n=t.length,r=n-2,o=!1;for(let t=0;t<n;t+=2){const n=i[t+1],a=i[r+1];if(n<s&&a>=s||a<s&&n>=s){const h=i[t];h+(s-n)/(a-n)*(i[r]-h)<e&&(o=!o)}r=t}return o}intersectsSegment(t,e,s,i){const n=this.polygons;for(let r=0,o=n.length;r<o;r++)if(this.intersectsSegmentPolygon(n[r],t,e,s,i))return this.boundingBoxes[r];return null}intersectsSegmentPolygon(t,e,s,i,n){let r=t,o=t.length,a=e-i,h=s-n,l=e*n-s*i,c=r[o-2],u=r[o-1];for(let t=0;t<o;t+=2){const o=r[t],d=r[t+1],f=c*d-u*o,p=c-o,m=u-d,g=a*m-h*p,x=(l*p-a*f)/g;if((x>=c&&x<=o||x>=o&&x<=c)&&(x>=e&&x<=i||x>=i&&x<=e)){const t=(l*m-h*f)/g;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=s&&t<=n||t>=n&&t<=s))return!0}c=o,u=d}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");const e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},qe=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new x((()=>new Array)),this.polygonIndicesPool=new x((()=>new Array))}triangulate(t){let e=t,s=t.length>>1,i=this.indicesArray;i.length=0;for(let t=0;t<s;t++)i[t]=t;const n=this.isConcaveArray;n.length=0;for(let t=0,r=s;t<r;++t)n[t]=qe.isConcave(t,s,e,i);const r=this.triangles;for(r.length=0;s>3;){let t=s-1,o=0,a=1;for(;;){t:if(!n[o]){const r=i[t]<<1,h=i[o]<<1,l=i[a]<<1,c=e[r],u=e[r+1],d=e[h],f=e[h+1],p=e[l],m=e[l+1];for(let r=(a+1)%s;r!=t;r=(r+1)%s){if(!n[r])continue;const t=i[r]<<1,s=e[t],o=e[t+1];if(qe.positiveArea(p,m,c,u,s,o)&&qe.positiveArea(c,u,d,f,s,o)&&qe.positiveArea(d,f,p,m,s,o))break t}break}if(0==a){do{if(!n[o])break;o--}while(o>0);break}t=o,o=a,a=(a+1)%s}r.push(i[(s+o-1)%s]),r.push(i[o]),r.push(i[(o+1)%s]),i.splice(o,1),n.splice(o,1),s--;const h=(s+o-1)%s,l=o==s?0:o;n[h]=qe.isConcave(h,s,e,i),n[l]=qe.isConcave(l,s,e,i)}return 3==s&&(r.push(i[2]),r.push(i[0]),r.push(i[1])),r}decompose(t,e){const s=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;const n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n),n.length=0;let r=this.polygonIndicesPool.obtain();r.length=0;let o=this.polygonPool.obtain();o.length=0;let a=-1,h=0;for(let t=0,l=e.length;t<l;t+=3){let l=e[t]<<1,c=e[t+1]<<1,u=e[t+2]<<1,d=s[l],f=s[l+1],p=s[c],m=s[c+1],g=s[u],x=s[u+1],w=!1;if(a==l){const t=o.length-4,e=qe.winding(o[t],o[t+1],o[t+2],o[t+3],g,x),s=qe.winding(g,x,o[0],o[1],o[2],o[3]);e==h&&s==h&&(o.push(g),o.push(x),r.push(u),w=!0)}w||(o.length>0?(i.push(o),n.push(r)):(this.polygonPool.free(o),this.polygonIndicesPool.free(r)),o=this.polygonPool.obtain(),o.length=0,o.push(d),o.push(f),o.push(p),o.push(m),o.push(g),o.push(x),r=this.polygonIndicesPool.obtain(),r.length=0,r.push(l),r.push(c),r.push(u),h=qe.winding(d,f,p,m,g,x),a=l)}o.length>0&&(i.push(o),n.push(r));for(let t=0,e=i.length;t<e;t++){if(r=n[t],0==r.length)continue;const s=r[0],a=r[r.length-1];o=i[t];let h=o.length-4,l=o[h],c=o[h+1],u=o[h+2],d=o[h+3],f=o[0],p=o[1],m=o[2],g=o[3],x=qe.winding(l,c,u,d,f,p);for(let h=0;h<e;h++){if(h==t)continue;const e=n[h];if(3!=e.length)continue;const w=e[0],y=e[1],b=e[2],v=i[h],A=v[v.length-2],S=v[v.length-1];if(w!=s||y!=a)continue;const M=qe.winding(l,c,u,d,A,S),I=qe.winding(A,S,f,p,m,g);M==x&&I==x&&(v.length=0,e.length=0,o.push(A),o.push(S),r.push(b),l=u,c=d,u=A,d=S,h=0)}}for(let t=i.length-1;t>=0;t--)o=i[t],0==o.length&&(i.splice(t,1),this.polygonPool.free(o),r=n[t],n.splice(t,1),this.polygonIndicesPool.free(r));return i}static isConcave(t,e,s,i){const n=i[(e+t-1)%e]<<1,r=i[t]<<1,o=i[(t+1)%e]<<1;return!this.positiveArea(s[n],s[n+1],s[r],s[r+1],s[o],s[o+1])}static positiveArea(t,e,s,i,n,r){return t*(r-i)+s*(e-r)+n*(i-e)>=0}static winding(t,e,s,i,n,r){const o=s-t,a=i-e;return n*a-r*o+o*e-t*a>=0?1:-1}},Ge=class{constructor(){this.triangulator=new qe,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;const s=e.worldVerticesLength,i=m.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);const n=this.clippingPolygon;Ge.makeClockwise(n);const r=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n));for(let t=0,e=r.length;t<e;t++){const e=r[t];Ge.makeClockwise(e),e.push(e[0]),e.push(e[1])}return r.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,n,r,o,a){let h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,u=this.clippingPolygons,d=u.length,f=a?12:8,p=0;l.length=0,c.length=0;t:for(let e=0;e<i;e+=3){let i=s[e]<<1,g=t[i],x=t[i+1],w=n[i],y=n[i+1];i=s[e+1]<<1;const b=t[i],v=t[i+1],A=n[i],S=n[i+1];i=s[e+2]<<1;const M=t[i],I=t[i+1],E=n[i],k=n[i+1];for(let t=0;t<d;t++){let e=l.length;if(!this.clip(g,x,b,v,M,I,u[t],h)){const t=m.setArraySize(l,e+3*f);t[e]=g,t[e+1]=x,t[e+2]=r.r,t[e+3]=r.g,t[e+4]=r.b,t[e+5]=r.a,a?(t[e+6]=w,t[e+7]=y,t[e+8]=o.r,t[e+9]=o.g,t[e+10]=o.b,t[e+11]=o.a,t[e+12]=b,t[e+13]=v,t[e+14]=r.r,t[e+15]=r.g,t[e+16]=r.b,t[e+17]=r.a,t[e+18]=A,t[e+19]=S,t[e+20]=o.r,t[e+21]=o.g,t[e+22]=o.b,t[e+23]=o.a,t[e+24]=M,t[e+25]=I,t[e+26]=r.r,t[e+27]=r.g,t[e+28]=r.b,t[e+29]=r.a,t[e+30]=E,t[e+31]=k,t[e+32]=o.r,t[e+33]=o.g,t[e+34]=o.b,t[e+35]=o.a):(t[e+6]=w,t[e+7]=y,t[e+8]=b,t[e+9]=v,t[e+10]=r.r,t[e+11]=r.g,t[e+12]=r.b,t[e+13]=r.a,t[e+14]=A,t[e+15]=S,t[e+16]=M,t[e+17]=I,t[e+18]=r.r,t[e+19]=r.g,t[e+20]=r.b,t[e+21]=r.a,t[e+22]=E,t[e+23]=k),e=c.length;const s=m.setArraySize(c,e+3);s[e]=p,s[e+1]=p+1,s[e+2]=p+2,p+=3;continue t}{const t=h.length;if(0==t)continue;let s=v-I,i=M-b,n=g-M,u=I-x,d=1/(s*n+i*(x-I)),T=t>>1,C=this.clipOutput,R=m.setArraySize(l,e+T*f);for(let h=0;h<t;h+=2){const t=C[h],l=C[h+1];R[e]=t,R[e+1]=l,R[e+2]=r.r,R[e+3]=r.g,R[e+4]=r.b,R[e+5]=r.a;const c=t-M,p=l-I,m=(s*c+i*p)*d,g=(u*c+n*p)*d,x=1-m-g;R[e+6]=w*m+A*g+E*x,R[e+7]=y*m+S*g+k*x,a&&(R[e+8]=o.r,R[e+9]=o.g,R[e+10]=o.b,R[e+11]=o.a),e+=f}e=c.length;const F=m.setArraySize(c,e+3*(T-2));T--;for(let t=1;t<T;t++)F[e]=p,F[e+1]=p+t,F[e+2]=p+t+1,e+=3;p+=T+1}}}}clip(t,e,s,i,n,r,o,a){let h,l=a,c=!1;o.length%4>=2?(h=a,a=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(s),h.push(i),h.push(n),h.push(r),h.push(t),h.push(e),a.length=0;const u=o,d=o.length-4;for(let t=0;;t+=2){const e=u[t],s=u[t+1],i=u[t+2],n=u[t+3],r=e-i,o=s-n,f=h,p=h.length-2,m=a.length;for(let t=0;t<p;t+=2){const h=f[t],l=f[t+1],u=f[t+2],d=f[t+3],p=r*(d-n)-o*(u-i)>0;if(r*(l-n)-o*(h-i)>0){if(p){a.push(u),a.push(d);continue}const t=d-l,r=u-h,o=t*(i-e)-r*(n-s);if(Math.abs(o)>1e-6){const c=(r*(s-l)-t*(e-h))/o;a.push(e+(i-e)*c),a.push(s+(n-s)*c)}else a.push(e),a.push(s)}else if(p){const t=d-l,r=u-h,o=t*(i-e)-r*(n-s);if(Math.abs(o)>1e-6){const c=(r*(s-l)-t*(e-h))/o;a.push(e+(i-e)*c),a.push(s+(n-s)*c)}else a.push(e),a.push(s);a.push(u),a.push(d)}c=!0}if(m==a.length)return l.length=0,!0;if(a.push(a[0]),a.push(a[1]),t==d)break;const g=a;(a=h).length=0,h=g}if(l!=a){l.length=0;for(let t=0,e=a.length-2;t<e;t++)l[t]=a[t]}else l.length=l.length-2;return c}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],n=0,r=0,o=0,a=0;for(let t=0,h=s-3;t<h;t+=2)n=e[t],r=e[t+1],o=e[t+2],a=e[t+3],i+=n*a-o*r;if(!(i<0))for(let t=0,i=s-2,n=s>>1;t<n;t+=2){const s=e[t],n=e[t+1],r=i-t;e[t]=e[r],e[t+1]=e[r+1],e[r]=s,e[r+1]=n}}},je=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new oe,i="string"==typeof t?JSON.parse(t):t,n=i.skeleton;if(n&&(s.hash=n.hash,s.version=n.spine,s.x=n.x,s.y=n.y,s.width=n.width,s.height=n.height,s.fps=n.fps,s.imagesPath=n.images),i.bones)for(let t=0;t<i.bones.length;t++){let n=i.bones[t],r=null,o=Je(n,"parent",null);o&&(r=s.findBone(o));const a=new zt(s.bones.length,n.name,r);a.length=Je(n,"length",0)*e,a.x=Je(n,"x",0)*e,a.y=Je(n,"y",0)*e,a.rotation=Je(n,"rotation",0),a.scaleX=Je(n,"scaleX",1),a.scaleY=Je(n,"scaleY",1),a.shearX=Je(n,"shearX",0),a.shearY=Je(n,"shearY",0),a.transformMode=m.enumValue(Nt,Je(n,"transform","Normal")),a.skinRequired=Je(n,"skin",!1);const h=Je(n,"color",null);h&&a.color.setFromString(h),s.bones.push(a)}if(i.slots)for(let t=0;t<i.slots.length;t++){const e=i.slots[t],n=s.findBone(e.bone);if(!n)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);const r=new le(s.slots.length,e.name,n),o=Je(e,"color",null);o&&r.color.setFromString(o);const a=Je(e,"dark",null);a&&(r.darkColor=h.fromString(a)),r.attachmentName=Je(e,"attachment",null),r.blendMode=m.enumValue(ce,Je(e,"blend","normal")),s.slots.push(r)}if(i.ik)for(let t=0;t<i.ik.length;t++){const n=i.ik[t],r=new Ht(n.name);r.order=Je(n,"order",0),r.skinRequired=Je(n,"skin",!1);for(let t=0;t<n.bones.length;t++){const e=s.findBone(n.bones[t]);if(!e)throw new Error(`Couldn't find bone ${n.bones[t]} for IK constraint ${n.name}.`);r.bones.push(e)}const o=s.findBone(n.target);if(!o)throw new Error(`Couldn't find target bone ${n.target} for IK constraint ${n.name}.`);r.target=o,r.mix=Je(n,"mix",1),r.softness=Je(n,"softness",0)*e,r.bendDirection=Je(n,"bendPositive",!0)?1:-1,r.compress=Je(n,"compress",!1),r.stretch=Je(n,"stretch",!1),r.uniform=Je(n,"uniform",!1),s.ikConstraints.push(r)}if(i.transform)for(let t=0;t<i.transform.length;t++){const n=i.transform[t],r=new ue(n.name);r.order=Je(n,"order",0),r.skinRequired=Je(n,"skin",!1);for(let t=0;t<n.bones.length;t++){const e=n.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for transform constraint ${n.name}.`);r.bones.push(i)}const o=n.target,a=s.findBone(o);if(!a)throw new Error(`Couldn't find target bone ${o} for transform constraint ${n.name}.`);r.target=a,r.local=Je(n,"local",!1),r.relative=Je(n,"relative",!1),r.offsetRotation=Je(n,"rotation",0),r.offsetX=Je(n,"x",0)*e,r.offsetY=Je(n,"y",0)*e,r.offsetScaleX=Je(n,"scaleX",0),r.offsetScaleY=Je(n,"scaleY",0),r.offsetShearY=Je(n,"shearY",0),r.mixRotate=Je(n,"mixRotate",1),r.mixX=Je(n,"mixX",1),r.mixY=Je(n,"mixY",r.mixX),r.mixScaleX=Je(n,"mixScaleX",1),r.mixScaleY=Je(n,"mixScaleY",r.mixScaleX),r.mixShearY=Je(n,"mixShearY",1),s.transformConstraints.push(r)}if(i.path)for(let t=0;t<i.path.length;t++){const n=i.path[t],r=new Zt(n.name);r.order=Je(n,"order",0),r.skinRequired=Je(n,"skin",!1);for(let t=0;t<n.bones.length;t++){const e=n.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for path constraint ${n.name}.`);r.bones.push(i)}const o=n.target,a=s.findSlot(o);if(!a)throw new Error(`Couldn't find target slot ${o} for path constraint ${n.name}.`);r.target=a,r.positionMode=m.enumValue(Kt,Je(n,"positionMode","Percent")),r.spacingMode=m.enumValue(Jt,Je(n,"spacingMode","Length")),r.rotateMode=m.enumValue(Qt,Je(n,"rotateMode","Tangent")),r.offsetRotation=Je(n,"rotation",0),r.position=Je(n,"position",0),0==r.positionMode&&(r.position*=e),r.spacing=Je(n,"spacing",0),0!=r.spacingMode&&1!=r.spacingMode||(r.spacing*=e),r.mixRotate=Je(n,"mixRotate",1),r.mixX=Je(n,"mixX",1),r.mixY=Je(n,"mixY",r.mixX),s.pathConstraints.push(r)}if(i.skins)for(let t=0;t<i.skins.length;t++){const e=i.skins[t],n=new he(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){const i=e.bones[t],r=s.findBone(i);if(!r)throw new Error(`Couldn't find bone ${i} for skin ${e.name}.`);n.bones.push(r)}if(e.ik)for(let t=0;t<e.ik.length;t++){const i=e.ik[t],r=s.findIkConstraint(i);if(!r)throw new Error(`Couldn't find IK constraint ${i} for skin ${e.name}.`);n.constraints.push(r)}if(e.transform)for(let t=0;t<e.transform.length;t++){const i=e.transform[t],r=s.findTransformConstraint(i);if(!r)throw new Error(`Couldn't find transform constraint ${i} for skin ${e.name}.`);n.constraints.push(r)}if(e.path)for(let t=0;t<e.path.length;t++){const i=e.path[t],r=s.findPathConstraint(i);if(!r)throw new Error(`Couldn't find path constraint ${i} for skin ${e.name}.`);n.constraints.push(r)}for(const t in e.attachments){const i=s.findSlot(t);if(!i)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);const r=e.attachments[t];for(const t in r){const e=this.readAttachment(r[t],n,i.index,t,s);e&&n.setAttachment(i.index,t,e)}}s.skins.push(n),"default"==n.name&&(s.defaultSkin=n)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){const e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error(`Skin not found: ${e.skin}`);const n=i.getAttachment(e.slotIndex,e.parent);if(!n)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?n:e.mesh,e.mesh.setParentMesh(n),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(const t in i.events){const e=i.events[t],n=new jt(t);n.intValue=Je(e,"int",0),n.floatValue=Je(e,"float",0),n.stringValue=Je(e,"string",""),n.audioPath=Je(e,"audio",null),n.audioPath&&(n.volume=Je(e,"volume",1),n.balance=Je(e,"balance",0)),s.events.push(n)}if(i.animations)for(const t in i.animations){const e=i.animations[t];this.readAnimation(e,t,s)}return s}readAttachment(t,e,s,i,n){const r=this.scale;switch(i=Je(t,"name",i),Je(t,"type","region")){case"region":{const s=Je(t,"path",i),n=this.readSequence(Je(t,"sequence",null)),o=this.attachmentLoader.newRegionAttachment(e,i,s,n);if(!o)return null;o.path=s,o.x=Je(t,"x",0)*r,o.y=Je(t,"y",0)*r,o.scaleX=Je(t,"scaleX",1),o.scaleY=Je(t,"scaleY",1),o.rotation=Je(t,"rotation",0),o.width=t.width*r,o.height=t.height*r,o.sequence=n;const a=Je(t,"color",null);return a&&o.color.setFromString(a),null!=o.region&&o.updateRegion(),o}case"boundingbox":{const s=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!s)return null;this.readVertices(t,s,t.vertexCount<<1);const n=Je(t,"color",null);return n&&s.color.setFromString(n),s}case"mesh":case"linkedmesh":{const n=Je(t,"path",i),o=this.readSequence(Je(t,"sequence",null)),a=this.attachmentLoader.newMeshAttachment(e,i,n,o);if(!a)return null;a.path=n;const h=Je(t,"color",null);h&&a.color.setFromString(h),a.width=Je(t,"width",0)*r,a.height=Je(t,"height",0)*r,a.sequence=o;const l=Je(t,"parent",null);if(l)return this.linkedMeshes.push(new $e(a,Je(t,"skin",null),s,l,Je(t,"timelines",!0))),a;const c=t.uvs;return this.readVertices(t,a,c.length),a.triangles=t.triangles,a.regionUVs=c,null!=a.region&&a.updateRegion(),a.edges=Je(t,"edges",null),a.hullLength=2*Je(t,"hull",0),a}case"path":{const s=this.attachmentLoader.newPathAttachment(e,i);if(!s)return null;s.closed=Je(t,"closed",!1),s.constantSpeed=Je(t,"constantSpeed",!0);const n=t.vertexCount;this.readVertices(t,s,n<<1);const o=m.newArray(n/3,0);for(let e=0;e<t.lengths.length;e++)o[e]=t.lengths[e]*r;s.lengths=o;const a=Je(t,"color",null);return a&&s.color.setFromString(a),s}case"point":{const s=this.attachmentLoader.newPointAttachment(e,i);if(!s)return null;s.x=Je(t,"x",0)*r,s.y=Je(t,"y",0)*r,s.rotation=Je(t,"rotation",0);const n=Je(t,"color",null);return n&&s.color.setFromString(n),s}case"clipping":{const s=this.attachmentLoader.newClippingAttachment(e,i);if(!s)return null;const r=Je(t,"end",null);r&&(s.endSlot=n.findSlot(r));const o=t.vertexCount;this.readVertices(t,s,o<<1);const a=Je(t,"color",null);return a&&s.color.setFromString(a),s}}return null}readSequence(t){if(null==t)return null;const e=new I(Je(t,"count",0));return e.start=Je(t,"start",1),e.digits=Je(t,"digits",0),e.setupIndex=Je(t,"setup",0),e}readVertices(t,e,s){const i=this.scale;e.worldVerticesLength=s;const n=t.vertices;if(s==n.length){const t=m.toFloatArray(n);if(1!=i)for(let e=0,s=n.length;e<s;e++)t[e]*=i;return void(e.vertices=t)}const r=new Array,o=new Array;for(let t=0,e=n.length;t<e;){const e=n[t++];o.push(e);for(let s=t+4*e;t<s;t+=4)o.push(n[t]),r.push(n[t+1]*i),r.push(n[t+2]*i),r.push(n[t+3])}e.bones=o,e.vertices=m.toFloatArray(r)}readAnimation(t,e,s){const i=this.scale,n=new Array;if(t.slots)for(const e in t.slots){const i=t.slots[e],r=s.findSlot(e);if(!r)throw new Error(`Slot not found: ${e}`);const o=r.index;for(const t in i){const e=i[t];if(!e)continue;const s=e.length;if("attachment"==t){const t=new Z(s,o);for(let i=0;i<s;i++){const s=e[i];t.setFrame(i,Je(s,"time",0),Je(s,"name",null))}n.push(t)}else if("rgba"==t){let t=new q(s,s<<2,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.color);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b,a.a);const o=e[s+1];if(!o){t.shrink(n);break}const l=Je(o,"time",0),c=h.fromString(o.color),u=i.curve;u&&(n=Ke(u,t,n,s,0,r,l,a.r,c.r,1),n=Ke(u,t,n,s,1,r,l,a.g,c.g,1),n=Ke(u,t,n,s,2,r,l,a.b,c.b,1),n=Ke(u,t,n,s,3,r,l,a.a,c.a,1)),r=l,a=c,i=o}n.push(t)}else if("rgb"==t){let t=new G(s,3*s,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.color);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b);const o=e[s+1];if(!o){t.shrink(n);break}const l=Je(o,"time",0),c=h.fromString(o.color),u=i.curve;u&&(n=Ke(u,t,n,s,0,r,l,a.r,c.r,1),n=Ke(u,t,n,s,1,r,l,a.g,c.g,1),n=Ke(u,t,n,s,2,r,l,a.b,c.b,1)),r=l,a=c,i=o}n.push(t)}else if("alpha"==t)n.push(He(e,new j(s,s,o),0,1));else if("rgba2"==t){let t=new $(s,7*s,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.light),l=h.fromString(i.dark);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b,a.a,l.r,l.g,l.b);const o=e[s+1];if(!o){t.shrink(n);break}const c=Je(o,"time",0),u=h.fromString(o.light),d=h.fromString(o.dark),f=i.curve;f&&(n=Ke(f,t,n,s,0,r,c,a.r,u.r,1),n=Ke(f,t,n,s,1,r,c,a.g,u.g,1),n=Ke(f,t,n,s,2,r,c,a.b,u.b,1),n=Ke(f,t,n,s,3,r,c,a.a,u.a,1),n=Ke(f,t,n,s,4,r,c,l.r,d.r,1),n=Ke(f,t,n,s,5,r,c,l.g,d.g,1),n=Ke(f,t,n,s,6,r,c,l.b,d.b,1)),r=c,a=u,l=d,i=o}n.push(t)}else if("rgb2"==t){let t=new H(s,6*s,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.light),l=h.fromString(i.dark);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b,l.r,l.g,l.b);const o=e[s+1];if(!o){t.shrink(n);break}const c=Je(o,"time",0),u=h.fromString(o.light),d=h.fromString(o.dark),f=i.curve;f&&(n=Ke(f,t,n,s,0,r,c,a.r,u.r,1),n=Ke(f,t,n,s,1,r,c,a.g,u.g,1),n=Ke(f,t,n,s,2,r,c,a.b,u.b,1),n=Ke(f,t,n,s,3,r,c,l.r,d.r,1),n=Ke(f,t,n,s,4,r,c,l.g,d.g,1),n=Ke(f,t,n,s,5,r,c,l.b,d.b,1)),r=c,a=u,l=d,i=o}n.push(t)}}}if(t.bones)for(const e in t.bones){const r=t.bones[e],o=s.findBone(e);if(!o)throw new Error(`Bone not found: ${e}`);const a=o.index;for(const t in r){const e=r[t],s=e.length;if(0!=s)if("rotate"===t)n.push(He(e,new L(s,s,a),0,1));else if("translate"===t){const t=new O(s,s<<1,a);n.push(Ze(e,t,"x","y",0,i))}else if("translatex"===t){const t=new D(s,s,a);n.push(He(e,t,0,i))}else if("translatey"===t){const t=new B(s,s,a);n.push(He(e,t,0,i))}else if("scale"===t){const t=new V(s,s<<1,a);n.push(Ze(e,t,"x","y",1,1))}else if("scalex"===t){const t=new z(s,s,a);n.push(He(e,t,1,1))}else if("scaley"===t){const t=new N(s,s,a);n.push(He(e,t,1,1))}else if("shear"===t){const t=new _(s,s<<1,a);n.push(Ze(e,t,"x","y",0,1))}else if("shearx"===t){const t=new U(s,s,a);n.push(He(e,t,0,1))}else if("sheary"===t){const t=new W(s,s,a);n.push(He(e,t,0,1))}}}if(t.ik)for(const e in t.ik){let r=t.ik[e],o=r[0];if(!o)continue;const a=s.findIkConstraint(e);if(!a)throw new Error(`IK Constraint not found: ${e}`);let h=s.ikConstraints.indexOf(a),l=new st(r.length,r.length<<1,h),c=Je(o,"time",0),u=Je(o,"mix",1),d=Je(o,"softness",0)*i;for(let t=0,e=0;;t++){l.setFrame(t,c,u,d,Je(o,"bendPositive",!0)?1:-1,Je(o,"compress",!1),Je(o,"stretch",!1));const s=r[t+1];if(!s){l.shrink(e);break}const n=Je(s,"time",0),a=Je(s,"mix",1),h=Je(s,"softness",0)*i,f=o.curve;f&&(e=Ke(f,l,e,t,0,c,n,u,a,1),e=Ke(f,l,e,t,1,c,n,d,h,i)),c=n,u=a,d=h,o=s}n.push(l)}if(t.transform)for(const e in t.transform){let i=t.transform[e],r=i[0];if(!r)continue;const o=s.findTransformConstraint(e);if(!o)throw new Error(`Transform constraint not found: ${e}`);let a=s.transformConstraints.indexOf(o),h=new it(i.length,6*i.length,a),l=Je(r,"time",0),c=Je(r,"mixRotate",1),u=Je(r,"mixX",1),d=Je(r,"mixY",u),f=Je(r,"mixScaleX",1),p=Je(r,"mixScaleY",f),m=Je(r,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,u,d,f,p,m);const s=i[t+1];if(!s){h.shrink(e);break}const n=Je(s,"time",0),o=Je(s,"mixRotate",1),a=Je(s,"mixX",1),g=Je(s,"mixY",a),x=Je(s,"mixScaleX",1),w=Je(s,"mixScaleY",x),y=Je(s,"mixShearY",1),b=r.curve;b&&(e=Ke(b,h,e,t,0,l,n,c,o,1),e=Ke(b,h,e,t,1,l,n,u,a,1),e=Ke(b,h,e,t,2,l,n,d,g,1),e=Ke(b,h,e,t,3,l,n,f,x,1),e=Ke(b,h,e,t,4,l,n,p,w,1),e=Ke(b,h,e,t,5,l,n,m,y,1)),l=n,c=o,u=a,d=g,f=x,p=w,f=x,r=s}n.push(h)}if(t.path)for(const e in t.path){const r=t.path[e],o=s.findPathConstraint(e);if(!o)throw new Error(`Path constraint not found: ${e}`);const a=s.pathConstraints.indexOf(o);for(const t in r){let e=r[t],s=e[0];if(!s)continue;const h=e.length;if("position"===t){const t=new nt(h,h,a);n.push(He(e,t,0,0==o.positionMode?i:1))}else if("spacing"===t){const t=new rt(h,h,a);n.push(He(e,t,0,0==o.spacingMode||1==o.spacingMode?i:1))}else if("mix"===t){let t=new ot(h,3*h,a),i=Je(s,"time",0),r=Je(s,"mixRotate",1),o=Je(s,"mixX",1),l=Je(s,"mixY",o);for(let n=0,a=0;;n++){t.setFrame(n,i,r,o,l);const h=e[n+1];if(!h){t.shrink(a);break}const c=Je(h,"time",0),u=Je(h,"mixRotate",1),d=Je(h,"mixX",1),f=Je(h,"mixY",d),p=s.curve;p&&(a=Ke(p,t,a,n,0,i,c,r,u,1),a=Ke(p,t,a,n,1,i,c,o,d,1),a=Ke(p,t,a,n,2,i,c,l,f,1)),i=c,r=u,o=d,l=f,s=h}n.push(t)}}}if(t.attachments)for(const e in t.attachments){const r=t.attachments[e],o=s.findSkin(e);if(!o)throw new Error(`Skin not found: ${e}`);for(const t in r){const e=r[t],a=s.findSlot(t);if(!a)throw new Error(`Slot not found: ${t}`);const h=a.index;for(const t in e){const s=e[t],r=o.getAttachment(h,t);for(const t in s){let e=s[t],o=e[0];if(o)if("deform"==t){let t=r.bones,s=r.vertices,a=t?s.length/3*2:s.length,l=new K(e.length,e.length,h,r),c=Je(o,"time",0);for(let n=0,r=0;;n++){let h,u=Je(o,"vertices",null);if(u){h=m.newFloatArray(a);const e=Je(o,"offset",0);if(m.arrayCopy(u,0,h,e,u.length),1!=i)for(let t=e,s=t+u.length;t<s;t++)h[t]*=i;if(!t)for(let t=0;t<a;t++)h[t]+=s[t]}else h=t?m.newFloatArray(a):s;l.setFrame(n,c,h);const d=e[n+1];if(!d){l.shrink(r);break}const f=Je(d,"time",0),p=o.curve;p&&(r=Ke(p,l,r,n,0,c,f,0,1,1)),c=f,o=d}n.push(l)}else if("sequence"==t){let t=new ht(e.length,h,r),s=0;for(let i=0;i<e.length;i++){const n=Je(o,"delay",s),r=Je(o,"time",0),a=E[Je(o,"mode","hold")],h=Je(o,"index",0);t.setFrame(i,r,a,h,n),s=n,o=e[i+1]}n.push(t)}}}}}if(t.drawOrder){let e=new et(t.drawOrder.length),i=s.slots.length,r=0;for(let n=0;n<t.drawOrder.length;n++,r++){let o=t.drawOrder[n],a=null,h=Je(o,"offsets",null);if(h){a=m.newArray(i,-1);let t=m.newArray(i-h.length,0),e=0,n=0;for(let i=0;i<h.length;i++){const r=h[i],o=s.findSlot(r.slot);if(!o)throw new Error(`Slot not found: ${o}`);const l=o.index;for(;e!=l;)t[n++]=e++;a[e+r.offset]=e++}for(;e<i;)t[n++]=e++;for(let e=i-1;e>=0;e--)-1==a[e]&&(a[e]=t[--n])}e.setFrame(r,Je(o,"time",0),a)}n.push(e)}if(t.events){let e=new Q(t.events.length),i=0;for(let n=0;n<t.events.length;n++,i++){const r=t.events[n],o=s.findEvent(r.name);if(!o)throw new Error(`Event not found: ${r.name}`);const a=new Gt(m.toSinglePrecision(Je(r,"time",0)),o);a.intValue=Je(r,"int",o.intValue),a.floatValue=Je(r,"float",o.floatValue),a.stringValue=Je(r,"string",o.stringValue),a.data.audioPath&&(a.volume=Je(r,"volume",1),a.balance=Je(r,"balance",0)),e.setFrame(i,a)}n.push(e)}let r=0;for(let t=0,e=n.length;t<e;t++)r=Math.max(r,n[t].getDuration());s.animations.push(new T(e,n,r))}},$e=class{constructor(t,e,s,i,n){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=n}};function He(t,e,s,i){let n=t[0],r=Je(n,"time",0),o=Je(n,"value",s)*i,a=0;for(let h=0;;h++){e.setFrame(h,r,o);const l=t[h+1];if(!l)return e.shrink(a),e;const c=Je(l,"time",0),u=Je(l,"value",s)*i;n.curve&&(a=Ke(n.curve,e,a,h,0,r,c,o,u,i)),r=c,o=u,n=l}}function Ze(t,e,s,i,n,r){let o=t[0],a=Je(o,"time",0),h=Je(o,s,n)*r,l=Je(o,i,n)*r,c=0;for(let u=0;;u++){e.setFrame(u,a,h,l);const d=t[u+1];if(!d)return e.shrink(c),e;const f=Je(d,"time",0),p=Je(d,s,n)*r,m=Je(d,i,n)*r,g=o.curve;g&&(c=Ke(g,e,c,u,0,a,f,h,p,r),c=Ke(g,e,c,u,1,a,f,l,m,r)),a=f,h=p,l=m,o=d}}function Ke(t,e,s,i,n,r,o,a,h,l){if("stepped"==t)return e.setStepped(i),s;const c=n<<2,u=t[c],d=t[c+1]*l,f=t[c+2],p=t[c+3]*l;return e.setBezier(s,i,n,r,a,u,d,f,p,o,h),s+1}function Je(t,e,s){return void 0!==t[e]?t[e]:s}void 0===Math.fround&&(Math.fround=(be=new Float32Array(1),function(t){return be[0]=t,be[0]}));var Qe,ts=class extends It{constructor(t){super(t)}setFilters(t,e){}setWraps(t,e){}dispose(){}},es=class extends Wt{constructor(t="",e=new qt){super((t=>new ts(t)),t,e)}},ss=m.newFloatArray(8),is=class{constructor(t){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=m.newFloatArray(8192),this.tempColor=new h,this.ctx=t}draw(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)}drawImages(t){const e=this.ctx,s=this.tempColor,i=t.color,n=t.drawOrder;this.debugRendering&&(e.strokeStyle="green");for(let t=0,r=n.length;t<r;t++){const r=n[t],o=r.bone;if(!o.active)continue;const a=r.getAttachment();if(!(a instanceof Bt))continue;a.computeWorldVertices(r,ss,0,2);const h=a.region,l=h.page.texture.getImage(),c=r.color,u=a.color;s.set(i.r*c.r*u.r,i.g*c.g*u.g,i.b*c.b*u.b,i.a*c.a*u.a),e.save(),e.transform(o.a,o.c,o.b,o.d,o.worldX,o.worldY),e.translate(a.offset[0],a.offset[1]),e.rotate(a.rotation*Math.PI/180);const d=a.width/h.originalWidth;e.scale(d*a.scaleX,d*a.scaleY);let f=h.width,p=h.height;if(e.translate(f/2,p/2),90==a.region.degrees){const t=f;f=p,p=t,e.rotate(-Math.PI/2)}e.scale(1,-1),e.translate(-f/2,-p/2),e.globalAlpha=s.a,e.drawImage(l,h.x,h.y,f,p,0,0,f,p),this.debugRendering&&e.strokeRect(0,0,f,p),e.restore()}}drawTriangles(t){let e=this.ctx,s=this.tempColor,i=t.color,n=t.drawOrder,r=null,o=this.vertices,a=null;for(let t=0,h=n.length;t<h;t++){let h,l,c=n[t],u=c.getAttachment();if(u instanceof Bt){const t=u;o=this.computeRegionVertices(c,t,!1),a=is.QUAD_TRIANGLES,l=t.region,h=l.page.texture.getImage()}else{if(!(u instanceof Xt))continue;{const t=u;o=this.computeMeshVertices(c,t,!1),a=t.triangles,h=t.region.renderObject.page.texture.getImage()}}if(h){c.data.blendMode!=r&&(r=c.data.blendMode);const t=c.color,n=u.color;s.set(i.r*t.r*n.r,i.g*t.g*n.g,i.b*t.b*n.b,i.a*t.a*n.a),e.globalAlpha=s.a;for(let t=0;t<a.length;t+=3){const s=8*a[t],i=8*a[t+1],n=8*a[t+2],r=o[s],l=o[s+1],c=o[s+6],u=o[s+7],d=o[i],f=o[i+1],p=o[i+6],m=o[i+7],g=o[n],x=o[n+1],w=o[n+6],y=o[n+7];this.drawTriangle(h,r,l,c,u,d,f,p,m,g,x,w,y),this.debugRendering&&(e.strokeStyle="green",e.beginPath(),e.moveTo(r,l),e.lineTo(d,f),e.lineTo(g,x),e.lineTo(r,l),e.stroke())}}}this.ctx.globalAlpha=1}drawTriangle(t,e,s,i,n,r,o,a,h,l,c,u,d){const f=this.ctx;i*=t.width,n*=t.height,a*=t.width,h*=t.height,u*=t.width,d*=t.height,f.beginPath(),f.moveTo(e,s),f.lineTo(r,o),f.lineTo(l,c),f.closePath();const p=1/((a-=i)*(d-=n)-(u-=i)*(h-=n)),m=(d*(r-=e)-h*(l-=e))*p,g=(d*(o-=s)-h*(c-=s))*p,x=(a*l-u*r)*p,w=(a*c-u*o)*p,y=e-m*i-x*n,b=s-g*i-w*n;f.save(),f.transform(m,g,x,w,y,b),f.clip(),f.drawImage(t,0,0),f.restore()}computeRegionVertices(t,e,s){const i=t.bone.skeleton.color,n=t.color,r=e.color,o=i.a*n.a*r.a,a=s?o:1,h=this.tempColor;h.set(i.r*n.r*r.r*a,i.g*n.g*r.g*a,i.b*n.b*r.b*a,o),e.computeWorldVertices(t,this.vertices,0,is.VERTEX_SIZE);const l=this.vertices,c=e.uvs;return l[Bt.C1R]=h.r,l[Bt.C1G]=h.g,l[Bt.C1B]=h.b,l[Bt.C1A]=h.a,l[Bt.U1]=c[0],l[Bt.V1]=c[1],l[Bt.C2R]=h.r,l[Bt.C2G]=h.g,l[Bt.C2B]=h.b,l[Bt.C2A]=h.a,l[Bt.U2]=c[2],l[Bt.V2]=c[3],l[Bt.C3R]=h.r,l[Bt.C3G]=h.g,l[Bt.C3B]=h.b,l[Bt.C3A]=h.a,l[Bt.U3]=c[4],l[Bt.V3]=c[5],l[Bt.C4R]=h.r,l[Bt.C4G]=h.g,l[Bt.C4B]=h.b,l[Bt.C4A]=h.a,l[Bt.U4]=c[6],l[Bt.V4]=c[7],l}computeMeshVertices(t,e,s){const i=t.bone.skeleton.color,n=t.color,r=e.color,o=i.a*n.a*r.a,a=s?o:1,h=this.tempColor;h.set(i.r*n.r*r.r*a,i.g*n.g*r.g*a,i.b*n.b*r.b*a,o);let l=e.worldVerticesLength/2,c=this.vertices;c.length<e.worldVerticesLength&&(this.vertices=c=m.newFloatArray(e.worldVerticesLength)),e.computeWorldVertices(t,0,e.worldVerticesLength,c,0,is.VERTEX_SIZE);const u=e.uvs;for(let t=0,e=0,s=2;t<l;t++)c[s++]=h.r,c[s++]=h.g,c[s++]=h.b,c[s++]=h.a,c[s++]=u[e++],c[s++]=u[e++],s+=2;return c}},ns=is;return ns.QUAD_TRIANGLES=[0,1,2,2,3,0],ns.VERTEX_SIZE=8,Qe=n,((n,r,o,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(const o of s(r))i.call(n,o)||void 0===o||t(n,o,{get:()=>r[o],enumerable:!(a=e(r,o))||a.enumerable});return n})(t({},"__esModule",{value:!0}),Qe)})();t.exports=e}).call(window)},7518:t=>{(function(){"use strict";const e=(()=>{const t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,n={};((e,s)=>{for(const i in s)t(e,i,{get:s[i],enumerable:!0})})(n,{AlphaTimeline:()=>j,Animation:()=>T,AnimationState:()=>ct,AnimationStateAdapter:()=>pt,AnimationStateData:()=>At,AssetManager:()=>is,AssetManagerBase:()=>Wt,AtlasAttachmentLoader:()=>Vt,Attachment:()=>v,AttachmentTimeline:()=>Z,BinaryInput:()=>fe,BlendMode:()=>ce,Bone:()=>_t,BoneData:()=>zt,BoundingBoxAttachment:()=>St,CURRENT:()=>vt,CameraController:()=>Es,ClippingAttachment:()=>Mt,Color:()=>h,Color2Attribute:()=>Ls,ColorAttribute:()=>Xs,ConstraintData:()=>Ut,CurveTimeline:()=>Y,CurveTimeline1:()=>P,CurveTimeline2:()=>X,DebugUtils:()=>g,DeformTimeline:()=>K,Downloader:()=>qt,DrawOrderTimeline:()=>et,Event:()=>Gt,EventData:()=>jt,EventQueue:()=>dt,EventTimeline:()=>Q,EventType:()=>ft,FIRST:()=>gt,FakeTexture:()=>Ct,GLTexture:()=>ss,HOLD_FIRST:()=>wt,HOLD_MIX:()=>yt,HOLD_SUBSEQUENT:()=>xt,IkConstraint:()=>$t,IkConstraintData:()=>Ht,IkConstraintTimeline:()=>st,Input:()=>Ms,IntSet:()=>r,Interpolation:()=>u,LoadingScreen:()=>ei,M00:()=>rs,M01:()=>os,M02:()=>as,M03:()=>hs,M10:()=>ls,M11:()=>cs,M12:()=>us,M13:()=>ds,M20:()=>fs,M21:()=>ps,M22:()=>ms,M23:()=>gs,M30:()=>xs,M31:()=>ws,M32:()=>ys,M33:()=>bs,ManagedWebGLRenderingContext:()=>Qe,MathUtils:()=>c,Matrix4:()=>As,Mesh:()=>Cs,MeshAttachment:()=>Xt,MixBlend:()=>C,MixDirection:()=>R,OrthoCamera:()=>Ss,PathAttachment:()=>Lt,PathConstraint:()=>ee,PathConstraintData:()=>Zt,PathConstraintMixTimeline:()=>ot,PathConstraintPositionTimeline:()=>nt,PathConstraintSpacingTimeline:()=>rt,PointAttachment:()=>Ot,PolygonBatcher:()=>Bs,Pool:()=>x,Position2Attribute:()=>Fs,Position3Attribute:()=>Ys,PositionMode:()=>Kt,Pow:()=>d,PowOut:()=>f,RGB2Timeline:()=>H,RGBA2Timeline:()=>$,RGBATimeline:()=>q,RGBTimeline:()=>G,RegionAttachment:()=>Bt,ResizeMode:()=>Js,RotateMode:()=>Qt,RotateTimeline:()=>L,SETUP:()=>bt,SUBSEQUENT:()=>mt,ScaleTimeline:()=>V,ScaleXTimeline:()=>z,ScaleYTimeline:()=>N,SceneRenderer:()=>Ks,SequenceTimeline:()=>ht,Shader:()=>Ts,ShapeRenderer:()=>Vs,ShapeType:()=>zs,ShearTimeline:()=>_,ShearXTimeline:()=>U,ShearYTimeline:()=>W,Skeleton:()=>re,SkeletonBinary:()=>de,SkeletonBounds:()=>We,SkeletonClipping:()=>Ge,SkeletonData:()=>oe,SkeletonDebugRenderer:()=>_s,SkeletonJson:()=>je,SkeletonRenderer:()=>Ws,Skin:()=>he,SkinEntry:()=>ae,Slot:()=>se,SlotData:()=>le,SpacingMode:()=>Jt,SpineCanvas:()=>ni,StringSet:()=>o,TexCoordAttribute:()=>Ps,Texture:()=>It,TextureAtlas:()=>Rt,TextureAtlasPage:()=>Yt,TextureAtlasRegion:()=>Pt,TextureFilter:()=>Et,TextureRegion:()=>Tt,TextureWrap:()=>kt,TimeKeeper:()=>y,Timeline:()=>F,Touch:()=>Is,TrackEntry:()=>ut,TransformConstraint:()=>ie,TransformConstraintData:()=>ue,TransformConstraintTimeline:()=>it,TransformMode:()=>Nt,TranslateTimeline:()=>O,TranslateXTimeline:()=>D,TranslateYTimeline:()=>B,Triangulator:()=>qe,Utils:()=>m,Vector2:()=>w,Vector3:()=>ns,VertexAttachment:()=>S,VertexAttribute:()=>Rs,VertexAttributeType:()=>Os,WebGLBlendModeConverter:()=>ts,WindowedMean:()=>b});var r=class{constructor(){this.array=new Array}add(t){const e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},o=class{constructor(){this.entries={},this.size=0}add(t){const e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){const e=this.size;for(let e=0,s=t.length;e<s;e++)this.add(t[e]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},a=class{constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new a).setFromString(t)}},h=a;h.WHITE=new a(1,1,1,1),h.RED=new a(1,0,0,1),h.GREEN=new a(0,1,0,1),h.BLUE=new a(0,0,1,1),h.MAGENTA=new a(1,0,1,1);var l=class{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*l.degRad)}static sinDeg(t){return Math.sin(t*l.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){const e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return l.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){const i=Math.random(),n=e-t;return i<=(s-t)/n?t+Math.sqrt(i*n*(s-t)):e-Math.sqrt((1-i)*n*(e-s))}static isPowerOfTwo(t){return t&&!(t&t-1)}},c=l;c.PI=3.1415927,c.PI2=2*l.PI,c.radiansToDegrees=180/l.PI,c.radDeg=l.radiansToDegrees,c.degreesToRadians=l.PI/180,c.degRad=l.degreesToRadians;var u=class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}},d=class extends u{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},f=class extends d{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},p=class{static arrayCopy(t,e,s,i,n){for(let r=e,o=i;r<e+n;r++,o++)s[o]=t[r]}static arrayFill(t,e,s,i){for(let n=e;n<s;n++)t[n]=i}static setArraySize(t,e,s=0){const i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let n=i;n<e;n++)t[n]=s;return t}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:p.setArraySize(t,e,s)}static newArray(t,e){const s=new Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(p.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(p.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return p.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return p.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=!0){for(let s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},m=p;m.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var g=class{static logBones(t){for(let e=0;e<t.bones.length;e++){const s=t.bones[e];console.log(`${s.data.name}, ${s.a}, ${s.b}, ${s.c}, ${s.d}, ${s.worldX}, ${s.worldY}`)}}},x=class{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}},w=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){const t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},y=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){const t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},b=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}},v=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},A=class extends v{constructor(t){super(t),this.id=A.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,e,s,i,n,r){s=n+(s>>1)*r;let o=t.bone.skeleton,a=t.deform,h=this.vertices,l=this.bones;if(!l){a.length>0&&(h=a);const o=t.bone,l=o.worldX,c=o.worldY,u=o.a,d=o.b,f=o.c,p=o.d;for(let t=e,o=n;o<s;t+=2,o+=r){const e=h[t],s=h[t+1];i[o]=e*u+s*d+l,i[o+1]=e*f+s*p+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){const t=l[c];c+=t+1,u+=t}const d=o.bones;if(0==a.length)for(let t=n,e=3*u;t<s;t+=r){let s=0,n=0,r=l[c++];for(r+=c;c<r;c++,e+=3){const t=d[l[c]],i=h[e],r=h[e+1],o=h[e+2];s+=(i*t.a+r*t.b+t.worldX)*o,n+=(i*t.c+r*t.d+t.worldY)*o}i[t]=s,i[t+1]=n}else{const t=a;for(let e=n,o=3*u,a=u<<1;e<s;e+=r){let s=0,n=0,r=l[c++];for(r+=c;c<r;c++,o+=3,a+=2){const e=d[l[c]],i=h[o]+t[a],r=h[o+1]+t[a+1],u=h[o+2];s+=(i*e.a+r*e.b+e.worldX)*u,n+=(i*e.c+r*e.d+e.worldY)*u}i[e]=s,i[e+1]=n}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),m.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=m.newFloatArray(this.vertices.length),m.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}},S=A;S.nextID=0;var M=class{constructor(t){this.id=M.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){const t=new M(this.regions.length);return m.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;-1==s&&(s=this.setupIndex),s>=this.regions.length&&(s=this.regions.length-1);const i=this.regions[s];e.region!=i&&(e.region=i,e.updateRegion())}getPath(t,e){let s=t,i=(this.start+e).toString();for(let t=this.digits-i.length;t>0;t--)s+="0";return s+=i,s}static nextID(){return M._nextID++}},I=M;I._nextID=0;var E=(t=>(t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse",t))(E||{}),k=[0,1,2,3,4,5,6],T=class{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new o,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(let e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,n,r,o,a){if(!t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));const h=this.timelines;for(let i=0,l=h.length;i<l;i++)h[i].apply(t,e,s,n,r,o,a)}},C=(t=>(t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",t))(C||{}),R=(t=>(t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut",t))(R||{}),F=class{constructor(t,e){this.propertyIds=e,this.frames=m.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){const s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){const i=t.length;for(let n=s;n<i;n+=s)if(t[n]>e)return n-s;return i-s}},Y=class extends F{constructor(t,e,s){super(t,s),this.curves=m.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){const e=this.getFrameCount()+18*t;if(this.curves.length>e){const t=m.newFloatArray(e);m.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,s,i,n,r,o,a,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==s&&(u[e]=2+d);let f=.03*(i-2*r+a),p=.03*(n-2*o+h),m=.006*(3*(r-a)-i+l),g=.006*(3*(o-h)-n+c),x=2*f+m,w=2*p+g,y=.3*(r-i)+f+.16666667*m,b=.3*(o-n)+p+.16666667*g,v=i+y,A=n+b;for(let t=d+18;d<t;d+=2)u[d]=v,u[d+1]=A,y+=x,b+=w,x+=m,w+=g,v+=y,A+=b}getBezierValue(t,e,s,i){const n=this.curves;if(n[i]>t){const r=this.frames[e],o=this.frames[e+s];return o+(t-r)/(n[i]-r)*(n[i+1]-o)}const r=i+18;for(i+=2;i<r;i+=2)if(n[i]>=t){const e=n[i-2],s=n[i-1];return s+(t-e)/(n[i]-e)*(n[i+1]-s)}e+=this.getFrameEntries();const o=n[r-2],a=n[r-1];return a+(t-o)/(this.frames[e]-o)*(this.frames[e+s]-a)}},P=class extends Y{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}const i=this.curves[s>>1];switch(i){case 0:const i=e[s],n=e[s+1];return n+(t-i)/(e[s+2]-i)*(e[s+2+1]-n);case 1:return e[s+1]}return this.getBezierValue(t,s,1,i-2)}},X=class extends Y{constructor(t,e,s,i){super(t,e,[s,i])}getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}},L=class extends P{constructor(t,e,s){super(t,e,`0|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.rotation=a.data.rotation);case 1:a.rotation+=(a.data.rotation-a.rotation)*n}return}let h=this.getCurveValue(s);switch(r){case 0:a.rotation=a.data.rotation+h*n;break;case 1:case 2:h+=a.data.rotation-a.rotation;case 3:a.rotation+=h*n}}},O=class extends X{constructor(t,e,s){super(t,e,`1|${s}`,`2|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(s<h[0]){switch(r){case 0:return a.x=a.data.x,void(a.y=a.data.y);case 1:a.x+=(a.data.x-a.x)*n,a.y+=(a.data.y-a.y)*n}return}let l=0,c=0,u=F.search(h,s,3),d=this.curves[u/3];switch(d){case 0:const t=h[u];l=h[u+1],c=h[u+2];const e=(s-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}switch(r){case 0:a.x=a.data.x+l*n,a.y=a.data.y+c*n;break;case 1:case 2:a.x+=(a.data.x+l-a.x)*n,a.y+=(a.data.y+c-a.y)*n;break;case 3:a.x+=l*n,a.y+=c*n}}},D=class extends P{constructor(t,e,s){super(t,e,`1|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.x=a.data.x);case 1:a.x+=(a.data.x-a.x)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.x=a.data.x+h*n;break;case 1:case 2:a.x+=(a.data.x+h-a.x)*n;break;case 3:a.x+=h*n}}},B=class extends P{constructor(t,e,s){super(t,e,`2|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.y=a.data.y);case 1:a.y+=(a.data.y-a.y)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.y=a.data.y+h*n;break;case 1:case 2:a.y+=(a.data.y+h-a.y)*n;break;case 3:a.y+=h*n}}},V=class extends X{constructor(t,e,s){super(t,e,`3|${s}`,`4|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;let h,l,u=this.frames;if(s<u[0]){switch(r){case 0:return a.scaleX=a.data.scaleX,void(a.scaleY=a.data.scaleY);case 1:a.scaleX+=(a.data.scaleX-a.scaleX)*n,a.scaleY+=(a.data.scaleY-a.scaleY)*n}return}const d=F.search(u,s,3),f=this.curves[d/3];switch(f){case 0:const t=u[d];h=u[d+1],l=u[d+2];const e=(s-t)/(u[d+3]-t);h+=(u[d+3+1]-h)*e,l+=(u[d+3+2]-l)*e;break;case 1:h=u[d+1],l=u[d+2];break;default:h=this.getBezierValue(s,d,1,f-2),l=this.getBezierValue(s,d,2,f+18-2)}if(h*=a.data.scaleX,l*=a.data.scaleY,1==n)3==r?(a.scaleX+=h-a.data.scaleX,a.scaleY+=l-a.data.scaleY):(a.scaleX=h,a.scaleY=l);else{let t=0,e=0;if(1==o)switch(r){case 0:t=a.data.scaleX,e=a.data.scaleY,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n,a.scaleY=e+(Math.abs(l)*c.signum(e)-e)*n;break;case 1:case 2:t=a.scaleX,e=a.scaleY,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n,a.scaleY=e+(Math.abs(l)*c.signum(e)-e)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n,a.scaleY+=(l-a.data.scaleY)*n}else switch(r){case 0:t=Math.abs(a.data.scaleX)*c.signum(h),e=Math.abs(a.data.scaleY)*c.signum(l),a.scaleX=t+(h-t)*n,a.scaleY=e+(l-e)*n;break;case 1:case 2:t=Math.abs(a.scaleX)*c.signum(h),e=Math.abs(a.scaleY)*c.signum(l),a.scaleX=t+(h-t)*n,a.scaleY=e+(l-e)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n,a.scaleY+=(l-a.data.scaleY)*n}}}},z=class extends P{constructor(t,e,s){super(t,e,`3|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.scaleX=a.data.scaleX);case 1:a.scaleX+=(a.data.scaleX-a.scaleX)*n}return}const h=this.getCurveValue(s)*a.data.scaleX;if(1==n)3==r?a.scaleX+=h-a.data.scaleX:a.scaleX=h;else{let t=0;if(1==o)switch(r){case 0:t=a.data.scaleX,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 1:case 2:t=a.scaleX,a.scaleX=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n}else switch(r){case 0:t=Math.abs(a.data.scaleX)*c.signum(h),a.scaleX=t+(h-t)*n;break;case 1:case 2:t=Math.abs(a.scaleX)*c.signum(h),a.scaleX=t+(h-t)*n;break;case 3:a.scaleX+=(h-a.data.scaleX)*n}}}},N=class extends P{constructor(t,e,s){super(t,e,`4|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.scaleY=a.data.scaleY);case 1:a.scaleY+=(a.data.scaleY-a.scaleY)*n}return}const h=this.getCurveValue(s)*a.data.scaleY;if(1==n)3==r?a.scaleY+=h-a.data.scaleY:a.scaleY=h;else{let t=0;if(1==o)switch(r){case 0:t=a.data.scaleY,a.scaleY=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 1:case 2:t=a.scaleY,a.scaleY=t+(Math.abs(h)*c.signum(t)-t)*n;break;case 3:a.scaleY+=(h-a.data.scaleY)*n}else switch(r){case 0:t=Math.abs(a.data.scaleY)*c.signum(h),a.scaleY=t+(h-t)*n;break;case 1:case 2:t=Math.abs(a.scaleY)*c.signum(h),a.scaleY=t+(h-t)*n;break;case 3:a.scaleY+=(h-a.data.scaleY)*n}}}},_=class extends X{constructor(t,e,s){super(t,e,`5|${s}`,`6|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(s<h[0]){switch(r){case 0:return a.shearX=a.data.shearX,void(a.shearY=a.data.shearY);case 1:a.shearX+=(a.data.shearX-a.shearX)*n,a.shearY+=(a.data.shearY-a.shearY)*n}return}let l=0,c=0,u=F.search(h,s,3),d=this.curves[u/3];switch(d){case 0:const t=h[u];l=h[u+1],c=h[u+2];const e=(s-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}switch(r){case 0:a.shearX=a.data.shearX+l*n,a.shearY=a.data.shearY+c*n;break;case 1:case 2:a.shearX+=(a.data.shearX+l-a.shearX)*n,a.shearY+=(a.data.shearY+c-a.shearY)*n;break;case 3:a.shearX+=l*n,a.shearY+=c*n}}},U=class extends P{constructor(t,e,s){super(t,e,`5|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.shearX=a.data.shearX);case 1:a.shearX+=(a.data.shearX-a.shearX)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.shearX=a.data.shearX+h*n;break;case 1:case 2:a.shearX+=(a.data.shearX+h-a.shearX)*n;break;case 3:a.shearX+=h*n}}},W=class extends P{constructor(t,e,s){super(t,e,`6|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,n,r,o){const a=t.bones[this.boneIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.shearY=a.data.shearY);case 1:a.shearY+=(a.data.shearY-a.shearY)*n}return}const h=this.getCurveValue(s);switch(r){case 0:a.shearY=a.data.shearY+h*n;break;case 1:case 2:a.shearY+=(a.data.shearY+h-a.shearY)*n;break;case 3:a.shearY+=h*n}}},q=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`,`8|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,i,n,r){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color;if(s<h[0]){const t=a.data.color;switch(r){case 0:return void l.setFromColor(t);case 1:l.add((t.r-l.r)*n,(t.g-l.g)*n,(t.b-l.b)*n,(t.a-l.a)*n)}return}let c=0,u=0,d=0,f=0,p=F.search(h,s,5),m=this.curves[p/5];switch(m){case 0:const t=h[p];c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];const e=(s-t)/(h[p+5]-t);c+=(h[p+5+1]-c)*e,u+=(h[p+5+2]-u)*e,d+=(h[p+5+3]-d)*e,f+=(h[p+5+4]-f)*e;break;case 1:c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4];break;default:c=this.getBezierValue(s,p,1,m-2),u=this.getBezierValue(s,p,2,m+18-2),d=this.getBezierValue(s,p,3,m+36-2),f=this.getBezierValue(s,p,4,m+54-2)}1==n?l.set(c,u,d,f):(0==r&&l.setFromColor(a.data.color),l.add((c-l.r)*n,(u-l.g)*n,(d-l.b)*n,(f-l.a)*n))}},G=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,n){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color;if(s<h[0]){const t=a.data.color;switch(r){case 0:return l.r=t.r,l.g=t.g,void(l.b=t.b);case 1:l.r+=(t.r-l.r)*n,l.g+=(t.g-l.g)*n,l.b+=(t.b-l.b)*n}return}let c=0,u=0,d=0,f=F.search(h,s,4),p=this.curves[f>>2];switch(p){case 0:const t=h[f];c=h[f+1],u=h[f+2],d=h[f+3];const e=(s-t)/(h[f+4]-t);c+=(h[f+4+1]-c)*e,u+=(h[f+4+2]-u)*e,d+=(h[f+4+3]-d)*e;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3];break;default:c=this.getBezierValue(s,f,1,p-2),u=this.getBezierValue(s,f,2,p+18-2),d=this.getBezierValue(s,f,3,p+36-2)}if(1==n)l.r=c,l.g=u,l.b=d;else{if(0==r){const t=a.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*n,l.g+=(u-l.g)*n,l.b+=(d-l.b)*n}}},j=class extends P{constructor(t,e,s){super(t,e,`8|${s}`),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.color;if(s<this.frames[0]){const t=a.data.color;switch(r){case 0:return void(h.a=t.a);case 1:h.a+=(t.a-h.a)*n}return}const l=this.getCurveValue(s);1==n?h.a=l:(0==r&&(h.a=a.data.color.a),h.a+=(l-h.a)*n)}},$=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`,`8|${s}`,`9|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,i,n,r,o,a,h){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=o,this.frames[t+6]=a,this.frames[t+7]=h}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color,c=a.darkColor;if(s<h[0]){const t=a.data.color,e=a.data.darkColor;switch(r){case 0:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.add((t.r-l.r)*n,(t.g-l.g)*n,(t.b-l.b)*n,(t.a-l.a)*n),c.r+=(e.r-c.r)*n,c.g+=(e.g-c.g)*n,c.b+=(e.b-c.b)*n}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=0,w=F.search(h,s,8),y=this.curves[w>>3];switch(y){case 0:const t=h[w];u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];const e=(s-t)/(h[w+8]-t);u+=(h[w+8+1]-u)*e,d+=(h[w+8+2]-d)*e,f+=(h[w+8+3]-f)*e,p+=(h[w+8+4]-p)*e,m+=(h[w+8+5]-m)*e,g+=(h[w+8+6]-g)*e,x+=(h[w+8+7]-x)*e;break;case 1:u=h[w+1],d=h[w+2],f=h[w+3],p=h[w+4],m=h[w+5],g=h[w+6],x=h[w+7];break;default:u=this.getBezierValue(s,w,1,y-2),d=this.getBezierValue(s,w,2,y+18-2),f=this.getBezierValue(s,w,3,y+36-2),p=this.getBezierValue(s,w,4,y+54-2),m=this.getBezierValue(s,w,5,y+72-2),g=this.getBezierValue(s,w,6,y+90-2),x=this.getBezierValue(s,w,7,y+108-2)}if(1==n)l.set(u,d,f,p),c.r=m,c.g=g,c.b=x;else{if(0==r){l.setFromColor(a.data.color);const t=a.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((u-l.r)*n,(d-l.g)*n,(f-l.b)*n,(p-l.a)*n),c.r+=(m-c.r)*n,c.g+=(g-c.g)*n,c.b+=(x-c.b)*n}}},H=class extends Y{constructor(t,e,s){super(t,e,[`7|${s}`,`9|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,n,r,o,a){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=o,this.frames[t+6]=a}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,l=a.color,c=a.darkColor;if(s<h[0]){const t=a.data.color,e=a.data.darkColor;switch(r){case 0:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case 1:l.r+=(t.r-l.r)*n,l.g+=(t.g-l.g)*n,l.b+=(t.b-l.b)*n,c.r+=(e.r-c.r)*n,c.g+=(e.g-c.g)*n,c.b+=(e.b-c.b)*n}return}let u=0,d=0,f=0,p=0,m=0,g=0,x=F.search(h,s,7),w=this.curves[x/7];switch(w){case 0:const t=h[x];u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];const e=(s-t)/(h[x+7]-t);u+=(h[x+7+1]-u)*e,d+=(h[x+7+2]-d)*e,f+=(h[x+7+3]-f)*e,p+=(h[x+7+4]-p)*e,m+=(h[x+7+5]-m)*e,g+=(h[x+7+6]-g)*e;break;case 1:u=h[x+1],d=h[x+2],f=h[x+3],p=h[x+4],m=h[x+5],g=h[x+6];break;default:u=this.getBezierValue(s,x,1,w-2),d=this.getBezierValue(s,x,2,w+18-2),f=this.getBezierValue(s,x,3,w+36-2),p=this.getBezierValue(s,x,4,w+54-2),m=this.getBezierValue(s,x,5,w+72-2),g=this.getBezierValue(s,x,6,w+90-2)}if(1==n)l.r=u,l.g=d,l.b=f,c.r=p,c.g=m,c.b=g;else{if(0==r){const t=a.data.color,e=a.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(u-l.r)*n,l.g+=(d-l.g)*n,l.b+=(f-l.b)*n,c.r+=(p-c.r)*n,c.g+=(m-c.g)*n,c.b+=(g-c.b)*n}}},Z=class extends F{constructor(t,e){super(t,[`10|${e}`]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];a.bone.active&&(1!=o?s<this.frames[0]?0!=r&&1!=r||this.setAttachment(t,a,a.data.attachmentName):this.setAttachment(t,a,this.attachmentNames[F.search1(this.frames,s)]):0==r&&this.setAttachment(t,a,a.data.attachmentName))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}},K=class extends Y{constructor(t,e,s,i){super(t,e,[`11|${s}|${i.id}`]),this.slotIndex=0,this.slotIndex=s,this.attachment=i,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,n,r,o,a,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==s&&(u[e]=2+d);let f=.03*(i-2*r+a),p=.03*h-.06*o,m=.006*(3*(r-a)-i+l),g=.018*(o-h+.33333333),x=2*f+m,w=2*p+g,y=.3*(r-i)+f+.16666667*m,b=.3*o+p+.16666667*g,v=i+y,A=b;for(let t=d+18;d<t;d+=2)u[d]=v,u[d+1]=A,y+=x,b+=w,x+=m,w+=g,v+=y,A+=b}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:const s=this.frames[e];return(t-s)/(this.frames[e+this.getFrameEntries()]-s);case 1:return 0}if(i-=2,s[i]>t){const n=this.frames[e];return s[i+1]*(t-n)/(s[i]-n)}const n=i+18;for(i+=2;i<n;i+=2)if(s[i]>=t){const e=s[i-2],n=s[i-1];return n+(t-e)/(s[i]-e)*(s[i+1]-n)}const r=s[n-2],o=s[n-1];return o+(1-o)*(t-r)/(this.frames[e+this.getFrameEntries()]-r)}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.getAttachment();if(!h)return;if(!(h instanceof S)||h.timelineAttachment!=this.attachment)return;const l=a.deform;0==l.length&&(r=0);const c=this.vertices,u=c[0].length,d=this.frames;if(s<d[0]){switch(r){case 0:return void(l.length=0);case 1:if(1==n)return void(l.length=0);l.length=u;const t=h;if(t.bones)for(n=1-n,f=0;f<u;f++)l[f]*=n;else{const e=t.vertices;for(var f=0;f<u;f++)l[f]+=(e[f]-l[f])*n}}return}if(l.length=u,s>=d[d.length-1]){const t=c[d.length-1];if(1==n)if(3==r){const e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e];else{const s=e.vertices;for(let e=0;e<u;e++)l[e]+=t[e]-s[e]}}else m.arrayCopy(t,0,l,0,u);else switch(r){case 0:{const e=h;if(e.bones)for(let e=0;e<u;e++)l[e]=t[e]*n;else{const s=e.vertices;for(let e=0;e<u;e++){const i=s[e];l[e]=i+(t[e]-i)*n}}break}case 1:case 2:for(let e=0;e<u;e++)l[e]+=(t[e]-l[e])*n;break;case 3:const e=h;if(e.bones)for(let e=0;e<u;e++)l[e]+=t[e]*n;else{const s=e.vertices;for(let e=0;e<u;e++)l[e]+=(t[e]-s[e])*n}}return}const p=F.search1(d,s),g=this.getCurvePercent(s,p),x=c[p],w=c[p+1];if(1==n)if(3==r){const t=h;if(t.bones)for(let t=0;t<u;t++){const e=x[t];l[t]+=e+(w[t]-e)*g}else{const e=t.vertices;for(let t=0;t<u;t++){const s=x[t];l[t]+=s+(w[t]-s)*g-e[t]}}}else for(let t=0;t<u;t++){const e=x[t];l[t]=e+(w[t]-e)*g}else switch(r){case 0:{const t=h;if(t.bones)for(let t=0;t<u;t++){const e=x[t];l[t]=(e+(w[t]-e)*g)*n}else{const e=t.vertices;for(let t=0;t<u;t++){const s=x[t],i=e[t];l[t]=i+(s+(w[t]-s)*g-i)*n}}break}case 1:case 2:for(let t=0;t<u;t++){const e=x[t];l[t]+=(e+(w[t]-e)*g-l[t])*n}break;case 3:const t=h;if(t.bones)for(let t=0;t<u;t++){const e=x[t];l[t]+=(e+(w[t]-e)*g)*n}else{const e=t.vertices;for(let t=0;t<u;t++){const s=x[t];l[t]+=(s+(w[t]-s)*g-e[t])*n}}}}},J=class extends F{constructor(t){super(t,J.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,n,r,o){if(!i)return;const a=this.frames,h=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,n,r,o),e=-1;else if(e>=a[h-1])return;if(s<a[0])return;let l=0;if(e<a[0])l=0;else{l=F.search1(a,e)+1;const t=a[l];for(;l>0&&a[l-1]==t;)l--}for(;l<h&&s>=a[l];l++)i.push(this.events[l])}},Q=J;Q.propertyIds=["12"];var tt=class extends F{constructor(t){super(t,tt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,n,r,o){if(1==o)return void(0==r&&m.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(s<this.frames[0])return void(0!=r&&1!=r||m.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));const a=F.search1(this.frames,s),h=this.drawOrders[a];if(h){const e=t.drawOrder,s=t.slots;for(let t=0,i=h.length;t<i;t++)e[t]=s[h[t]]}else m.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},et=tt;et.propertyIds=["13"];var st=class extends Y{constructor(t,e,s){super(t,e,[`14|${s}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,i,n,r,o){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=r?1:0,this.frames[t+5]=o?1:0}apply(t,e,s,i,n,r,o){const a=t.ikConstraints[this.ikConstraintIndex];if(!a.active)return;const h=this.frames;if(s<h[0]){switch(r){case 0:return a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,void(a.stretch=a.data.stretch);case 1:a.mix+=(a.data.mix-a.mix)*n,a.softness+=(a.data.softness-a.softness)*n,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}let l=0,c=0,u=F.search(h,s,6),d=this.curves[u/6];switch(d){case 0:const t=h[u];l=h[u+1],c=h[u+2];const e=(s-t)/(h[u+6]-t);l+=(h[u+6+1]-l)*e,c+=(h[u+6+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}0==r?(a.mix=a.data.mix+(l-a.data.mix)*n,a.softness=a.data.softness+(c-a.data.softness)*n,1==o?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=h[u+3],a.compress=0!=h[u+4],a.stretch=0!=h[u+5])):(a.mix+=(l-a.mix)*n,a.softness+=(c-a.softness)*n,0==o&&(a.bendDirection=h[u+3],a.compress=0!=h[u+4],a.stretch=0!=h[u+5]))}},it=class extends Y{constructor(t,e,s){super(t,e,[`15|${s}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,n,r,o,a){const h=this.frames;h[t*=7]=e,h[t+1]=s,h[t+2]=i,h[t+3]=n,h[t+4]=r,h[t+5]=o,h[t+6]=a}apply(t,e,s,i,n,r,o){const a=t.transformConstraints[this.transformConstraintIndex];if(!a.active)return;let h,l,c,u,d,f,p=this.frames;if(s<p[0]){const t=a.data;switch(r){case 0:return a.mixRotate=t.mixRotate,a.mixX=t.mixX,a.mixY=t.mixY,a.mixScaleX=t.mixScaleX,a.mixScaleY=t.mixScaleY,void(a.mixShearY=t.mixShearY);case 1:a.mixRotate+=(t.mixRotate-a.mixRotate)*n,a.mixX+=(t.mixX-a.mixX)*n,a.mixY+=(t.mixY-a.mixY)*n,a.mixScaleX+=(t.mixScaleX-a.mixScaleX)*n,a.mixScaleY+=(t.mixScaleY-a.mixScaleY)*n,a.mixShearY+=(t.mixShearY-a.mixShearY)*n}return}const m=F.search(p,s,7),g=this.curves[m/7];switch(g){case 0:const t=p[m];h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];const e=(s-t)/(p[m+7]-t);h+=(p[m+7+1]-h)*e,l+=(p[m+7+2]-l)*e,c+=(p[m+7+3]-c)*e,u+=(p[m+7+4]-u)*e,d+=(p[m+7+5]-d)*e,f+=(p[m+7+6]-f)*e;break;case 1:h=p[m+1],l=p[m+2],c=p[m+3],u=p[m+4],d=p[m+5],f=p[m+6];break;default:h=this.getBezierValue(s,m,1,g-2),l=this.getBezierValue(s,m,2,g+18-2),c=this.getBezierValue(s,m,3,g+36-2),u=this.getBezierValue(s,m,4,g+54-2),d=this.getBezierValue(s,m,5,g+72-2),f=this.getBezierValue(s,m,6,g+90-2)}if(0==r){const t=a.data;a.mixRotate=t.mixRotate+(h-t.mixRotate)*n,a.mixX=t.mixX+(l-t.mixX)*n,a.mixY=t.mixY+(c-t.mixY)*n,a.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*n,a.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*n,a.mixShearY=t.mixShearY+(f-t.mixShearY)*n}else a.mixRotate+=(h-a.mixRotate)*n,a.mixX+=(l-a.mixX)*n,a.mixY+=(c-a.mixY)*n,a.mixScaleX+=(u-a.mixScaleX)*n,a.mixScaleY+=(d-a.mixScaleY)*n,a.mixShearY+=(f-a.mixShearY)*n}},nt=class extends P{constructor(t,e,s){super(t,e,`16|${s}`),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,n,r,o){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.position=a.data.position);case 1:a.position+=(a.data.position-a.position)*n}return}const h=this.getCurveValue(s);0==r?a.position=a.data.position+(h-a.data.position)*n:a.position+=(h-a.position)*n}},rt=class extends P{constructor(t,e,s){super(t,e,`17|${s}`),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,n,r,o){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;if(s<this.frames[0]){switch(r){case 0:return void(a.spacing=a.data.spacing);case 1:a.spacing+=(a.data.spacing-a.spacing)*n}return}const h=this.getCurveValue(s);0==r?a.spacing=a.data.spacing+(h-a.data.spacing)*n:a.spacing+=(h-a.spacing)*n}},ot=class extends Y{constructor(t,e,s){super(t,e,[`18|${s}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,n){const r=this.frames;r[t<<=2]=e,r[t+1]=s,r[t+2]=i,r[t+3]=n}apply(t,e,s,i,n,r,o){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;let h,l,c,u=this.frames;if(s<u[0]){switch(r){case 0:return a.mixRotate=a.data.mixRotate,a.mixX=a.data.mixX,void(a.mixY=a.data.mixY);case 1:a.mixRotate+=(a.data.mixRotate-a.mixRotate)*n,a.mixX+=(a.data.mixX-a.mixX)*n,a.mixY+=(a.data.mixY-a.mixY)*n}return}const d=F.search(u,s,4),f=this.curves[d>>2];switch(f){case 0:const t=u[d];h=u[d+1],l=u[d+2],c=u[d+3];const e=(s-t)/(u[d+4]-t);h+=(u[d+4+1]-h)*e,l+=(u[d+4+2]-l)*e,c+=(u[d+4+3]-c)*e;break;case 1:h=u[d+1],l=u[d+2],c=u[d+3];break;default:h=this.getBezierValue(s,d,1,f-2),l=this.getBezierValue(s,d,2,f+18-2),c=this.getBezierValue(s,d,3,f+36-2)}if(0==r){const t=a.data;a.mixRotate=t.mixRotate+(h-t.mixRotate)*n,a.mixX=t.mixX+(l-t.mixX)*n,a.mixY=t.mixY+(c-t.mixY)*n}else a.mixRotate+=(h-a.mixRotate)*n,a.mixX+=(l-a.mixX)*n,a.mixY+=(c-a.mixY)*n}},at=class extends F{constructor(t,e,s){super(t,[`19|${e}|${s.sequence.id}`]),this.slotIndex=e,this.attachment=s}getFrameEntries(){return at.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,i,n){const r=this.frames;r[t*=at.ENTRIES]=e,r[t+at.MODE]=s|i<<4,r[t+at.DELAY]=n}apply(t,e,s,i,n,r,o){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.attachment,l=this.attachment;if(!(h==l||h instanceof S&&h.timelineAttachment==l))return;const c=this.frames;if(s<c[0])return void(0!=r&&1!=r||(a.sequenceIndex=-1));const u=F.search(c,s,at.ENTRIES),d=c[u],f=c[u+at.MODE],p=c[u+at.DELAY];if(!this.attachment.sequence)return;let m=f>>4,g=this.attachment.sequence.regions.length,x=k[15&f];if(0!=x)switch(m+=(s-d)/p+1e-5|0,x){case 1:m=Math.min(g-1,m);break;case 2:m%=g;break;case 3:{const t=(g<<1)-2;m=0==t?0:m%t,m>=g&&(m=t-m);break}case 4:m=Math.max(g-1-m,0);break;case 5:m=g-1-m%g;break;case 6:{const t=(g<<1)-2;m=0==t?0:(m+g-1)%t,m>=g&&(m=t-m)}}a.sequenceIndex=m}},ht=at;ht.ENTRIES=3,ht.MODE=1,ht.DELAY=2;var lt=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new dt(this),this.propertyIDs=new o,this.animationsChanged=!1,this.trackEntryPool=new x((()=>new ut)),this.data=t}static emptyAnimation(){return lt._emptyAnimation}update(t){t*=this.timeScale;const e=this.tracks;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(!i)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let n=t*i.timeScale;if(i.delay>0){if(i.delay-=n,i.delay>0)continue;n=-i.delay,i.delay=0}let r=i.next;if(r){const e=i.trackLast-r.delay;if(e>=0){for(r.delay=0,r.trackTime+=0==i.timeScale?0:(e/i.timeScale+t)*r.timeScale,i.trackTime+=n,this.setCurrent(s,r,!0);r.mixingFrom;)r.mixTime+=t,r=r.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=n}this.queue.drain()}updateMixingFrom(t,e){const s=t.mixingFrom;if(!s)return!0;const i=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=s.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,s=this.tracks,i=!1;for(let n=0,r=s.length;n<r;n++){const r=s[n];if(!r||r.delay>0)continue;i=!0;let o=0==n?1:r.mixBlend,a=r.alpha;r.mixingFrom?a*=this.applyMixingFrom(r,t,o):r.trackTime>=r.trackEnd&&!r.next&&(a=0);let h=r.animationLast,l=r.getAnimationTime(),c=l,u=e;r.reverse&&(c=r.animation.duration-c,u=null);const d=r.animation.timelines,f=d.length;if(0==n&&1==a||3==o)for(let e=0;e<f;e++){m.webkit602BugfixHelper(a,o);const s=d[e];s instanceof Z?this.applyAttachmentTimeline(s,t,c,o,!0):s.apply(t,h,c,u,a,o,0)}else{const e=r.timelineMode,s=r.shortestRotation,i=!s&&r.timelinesRotation.length!=f<<1;i&&(r.timelinesRotation.length=f<<1);for(let n=0;n<f;n++){const l=d[n],f=e[n]==mt?o:0;!s&&l instanceof L?this.applyRotateTimeline(l,t,c,a,f,r.timelinesRotation,n<<1,i):l instanceof Z?this.applyAttachmentTimeline(l,t,c,o,!0):(m.webkit602BugfixHelper(a,o),l.apply(t,h,c,u,a,f,0))}}this.queueEvents(r,l),e.length=0,r.nextAnimationLast=l,r.nextTrackLast=r.trackTime}for(let e=this.unkeyedState+bt,s=t.slots,i=0,n=t.slots.length;i<n;i++){const n=s[i];if(n.attachmentState==e){const e=n.data.attachmentName;n.setAttachment(e?t.getAttachment(n.data.index,e):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(t,e,s){const i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,e,s);let n=0;0==t.mixDuration?(n=1,1==s&&(s=0)):(n=t.mixTime/t.mixDuration,n>1&&(n=1),1!=s&&(s=i.mixBlend));let r=n<i.attachmentThreshold,o=n<i.drawOrderThreshold,a=i.animation.timelines,h=a.length,l=i.alpha*t.interruptAlpha,c=l*(1-n),u=i.animationLast,d=i.getAnimationTime(),f=d,p=null;if(i.reverse?f=i.animation.duration-f:n<i.eventThreshold&&(p=this.events),3==s)for(let t=0;t<h;t++)a[t].apply(e,u,f,p,c,s,1);else{const t=i.timelineMode,n=i.timelineHoldMix,d=i.shortestRotation,g=!d&&i.timelinesRotation.length!=h<<1;g&&(i.timelinesRotation.length=h<<1),i.totalAlpha=0;for(let x=0;x<h;x++){let h,w=a[x],y=1,b=0;switch(t[x]){case mt:if(!o&&w instanceof et)continue;h=s,b=c;break;case gt:h=0,b=c;break;case xt:h=s,b=l;break;case wt:h=0,b=l;break;default:h=0;const t=n[x];b=l*Math.max(0,1-t.mixTime/t.mixDuration)}i.totalAlpha+=b,!d&&w instanceof L?this.applyRotateTimeline(w,e,f,b,h,i.timelinesRotation,x<<1,g):w instanceof Z?this.applyAttachmentTimeline(w,e,f,h,r):(m.webkit602BugfixHelper(b,s),o&&w instanceof et&&0==h&&(y=0),w.apply(e,u,f,p,b,h,y))}}return t.mixDuration>0&&this.queueEvents(i,d),this.events.length=0,i.nextAnimationLast=d,i.nextTrackLast=i.trackTime,n}applyAttachmentTimeline(t,e,s,i,n){const r=e.slots[t.slotIndex];r.bone.active&&(s<t.frames[0]?0!=i&&1!=i||this.setAttachment(e,r,r.data.attachmentName,n):this.setAttachment(e,r,t.attachmentNames[F.search1(t.frames,s)],n),r.attachmentState<=this.unkeyedState&&(r.attachmentState=this.unkeyedState+bt))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+vt)}applyRotateTimeline(t,e,s,i,n,r,o,a){if(a&&(r[o]=0),1==i)return void t.apply(e,0,s,null,1,n,0);const h=e.bones[t.boneIndex];if(!h.active)return;let l=0,u=0;if(s<t.frames[0])switch(n){case 0:h.rotation=h.data.rotation;default:return;case 1:l=h.rotation,u=h.data.rotation}else l=0==n?h.data.rotation:h.rotation,u=h.data.rotation+t.getCurveValue(s);let d=0,f=u-l;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)d=r[o];else{let t=0,e=0;a?(t=0,e=f):(t=r[o],e=r[o+1]);let s=f>0,i=t>=0;c.signum(e)!=c.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*c.signum(t)),i=s),d=f+t-t%360,i!=s&&(d+=360*c.signum(t)),r[o]=d}r[o+1]=f,h.rotation=l+d*i}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,n=i-s,r=t.trackLast%n,o=this.events,a=0,h=o.length;for(;a<h;a++){const e=o[a];if(e.time<r)break;e.time>i||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==n||r>t.trackTime%n:e>=i&&t.animationLast<i,l&&this.queue.complete(t);a<h;a++){const e=o[a];e.time<s||this.queue.event(t,e)}}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){const t=s.mixingFrom;if(!t)break;this.queue.end(t),s.mixingFrom=null,s.mixingTo=null,s=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){const i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){const i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let i=!0,n=this.expandToIndex(t);n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,i=!1):this.clearNext(n));const r=this.trackEntry(t,e,s,n);return this.setCurrent(t,r,i),this.queue.drain(),r}addAnimation(t,e,s=!1,i=0){const n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,n,s,i)}addAnimationWith(t,e,s=!1,i=0){if(!e)throw new Error("animation cannot be null.");let n=this.expandToIndex(t);if(n)for(;n.next;)n=n.next;const r=this.trackEntry(t,e,s,n);return n?(n.next=r,r.previous=n,i<=0&&(i+=n.getTrackComplete()-r.mixDuration)):(this.setCurrent(t,r,!0),this.queue.drain()),r.delay=i,r}setEmptyAnimation(t,e=0){const s=this.setAnimationWith(t,lt.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){const i=this.addAnimationWith(t,lt.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(t=0){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){const s=this.tracks[e];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(m.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,i){const n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=t,n.animation=e,n.loop=s,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=i?this.data.getMix(i.animation,e):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=2,n}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();const t=this.tracks;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do{s.mixingTo&&3==s.mixBlend||this.computeHold(s),s=s.mixingTo}while(s)}}}computeHold(t){const e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,n=t.timelineMode;n.length=i;const r=t.timelineHoldMix;r.length=0;const o=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<i;t++)n[t]=o.addAll(s[t].getPropertyIds())?wt:xt;else t:for(let a=0;a<i;a++){const i=s[a],h=i.getPropertyIds();if(o.addAll(h))if(!e||i instanceof Z||i instanceof et||i instanceof Q||!e.animation.hasTimeline(h))n[a]=gt;else{for(let s=e.mixingTo;s;s=s.mixingTo)if(!s.animation.hasTimeline(h)){if(t.mixDuration>0){n[a]=yt,r[a]=s;continue t}break}n[a]=wt}else n[a]=mt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},ct=lt;ct._emptyAnimation=new T("<empty>",[],0);var ut=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=2,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){const t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},dt=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(ft.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(ft.interrupt),this.objects.push(t)}end(t){this.objects.push(ft.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(ft.dispose),this.objects.push(t)}complete(t){this.objects.push(ft.complete),this.objects.push(t)}event(t,e){this.objects.push(ft.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){const i=t[s],n=t[s+1];switch(i){case ft.start:n.listener&&n.listener.start&&n.listener.start(n);for(let t=0;t<e.length;t++){const s=e[t];s.start&&s.start(n)}break;case ft.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(let t=0;t<e.length;t++){const s=e[t];s.interrupt&&s.interrupt(n)}break;case ft.end:n.listener&&n.listener.end&&n.listener.end(n);for(let t=0;t<e.length;t++){const s=e[t];s.end&&s.end(n)}case ft.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(let t=0;t<e.length;t++){const s=e[t];s.dispose&&s.dispose(n)}this.animState.trackEntryPool.free(n);break;case ft.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(let t=0;t<e.length;t++){const s=e[t];s.complete&&s.complete(n)}break;case ft.event:const i=t[2+s++];n.listener&&n.listener.event&&n.listener.event(n,i);for(let t=0;t<e.length;t++){const s=e[t];s.event&&s.event(n,i)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}},ft=(t=>(t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",t))(ft||{}),pt=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},mt=0,gt=1,xt=2,wt=3,yt=4,bt=1,vt=2,At=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){const i=this.skeletonData.findAnimation(t);if(!i)throw new Error(`Animation not found: ${t}`);const n=this.skeletonData.findAnimation(e);if(!n)throw new Error(`Animation not found: ${e}`);this.setMixWith(i,n,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");const i=`${t.name}.${e.name}`;this.animationToMixTime[i]=s}getMix(t,e){const s=`${t.name}.${e.name}`,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}},St=class extends S{constructor(t){super(t),this.color=new h(1,1,1,1)}copy(){const t=new St(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},Mt=class extends S{constructor(t){super(t),this.endSlot=null,this.color=new h(.2275,.2275,.8078,1)}copy(){const t=new Mt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},It=class{constructor(t){this._image=t}getImage(){return this._image}},Et=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",t))(Et||{}),kt=(t=>(t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",t))(kt||{}),Tt=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},Ct=class extends It{setFilters(t,e){}setWraps(t,e){}dispose(){}},Rt=class{constructor(t){this.pages=new Array,this.regions=new Array;const e=new Ft(t),s=new Array(4),i={size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},format:()=>{},filter:t=>{t.minFilter=m.enumValue(Et,s[1]),t.magFilter=m.enumValue(Et,s[2])},repeat:t=>{-1!=s[1].indexOf("x")&&(t.uWrap=10497),-1!=s[1].indexOf("y")&&(t.vWrap=10497)},pma:t=>{t.pma="true"==s[1]}},n={xy:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},bounds:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},offset:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},orig:t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},offsets:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},rotate:t=>{const e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(s[1])}};let r=e.readLine();for(;r&&0==r.trim().length;)r=e.readLine();for(;r&&0!=r.trim().length&&0!=e.readEntry(s,r);)r=e.readLine();let o=null,a=null,h=null;for(;null!==r;)if(0==r.trim().length)o=null,r=e.readLine();else if(o){const t=new Pt(o,r);for(;;){const i=e.readEntry(s,r=e.readLine());if(0==i)break;const o=n[s[0]];if(o)o(t);else{a||(a=[]),h||(h=[]),a.push(s[0]);const t=[];for(let e=0;e<i;e++)t.push(parseInt(s[e+1]));h.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),a&&a.length>0&&h&&h.length>0&&(t.names=a,t.values=h,a=null,h=null),t.u=t.x/o.width,t.v=t.y/o.height,90==t.degrees?(t.u2=(t.x+t.height)/o.width,t.v2=(t.y+t.width)/o.height):(t.u2=(t.x+t.width)/o.width,t.v2=(t.y+t.height)/o.height),this.regions.push(t)}else{for(o=new Yt(r.trim());0!=e.readEntry(s,r=e.readLine());){const t=i[s[0]];t&&t(o)}this.pages.push(o)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(const s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){let t;for(let e=0;e<this.pages.length;e++)null==(t=this.pages[e].texture)||t.dispose()}},Ft=class{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;const s=e.indexOf(":");if(-1==s)return 0;t[0]=e.substr(0,s).trim();for(let i=1,n=s+1;;i++){const s=e.indexOf(",",n);if(-1==s)return t[i]=e.substr(n).trim(),i;if(t[i]=e.substr(n,s-n).trim(),n=s+1,4==i)return 4}}},Yt=class{constructor(t){this.minFilter=9728,this.magFilter=9728,this.uWrap=33071,this.vWrap=33071,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}},Pt=class extends Tt{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e}},Xt=class extends S{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new h(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new h(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");const t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=m.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,n=this.region.v,r=0,o=0;if(this.region instanceof Pt){const a=this.region,h=a.page.texture.getImage(),l=h.width,c=h.height;switch(a.degrees){case 90:i-=(a.originalHeight-a.offsetY-a.height)/l,n-=(a.originalWidth-a.offsetX-a.width)/c,r=a.originalHeight/l,o=a.originalWidth/c;for(let a=0;a<s;a+=2)e[a]=i+t[a+1]*r,e[a+1]=n+(1-t[a])*o;return;case 180:i-=(a.originalWidth-a.offsetX-a.width)/l,n-=a.offsetY/c,r=a.originalWidth/l,o=a.originalHeight/c;for(let a=0;a<s;a+=2)e[a]=i+(1-t[a])*r,e[a+1]=n+(1-t[a+1])*o;return;case 270:i-=a.offsetY/l,n-=a.offsetX/c,r=a.originalHeight/l,o=a.originalWidth/c;for(let a=0;a<s;a+=2)e[a]=i+(1-t[a+1])*r,e[a+1]=n+t[a]*o;return}i-=a.offsetX/l,n-=(a.originalHeight-a.offsetY-a.height)/c,r=a.originalWidth/l,o=a.originalHeight/c}else this.region?(r=this.region.u2-i,o=this.region.v2-n):(i=n=0,r=o=1);for(let a=0;a<s;a+=2)e[a]=i+t[a]*r,e[a+1]=n+t[a+1]*o}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const t=new Xt(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),m.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),m.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),m.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),m.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,i,n,r){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,i,n,r)}newLinkedMesh(){const t=new Xt(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}},Lt=class extends S{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new h(1,1,1,1)}copy(){const t=new Lt(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),m.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},Ot=class extends S{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new h(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){const e=c.cosDeg(this.rotation),s=c.sinDeg(this.rotation),i=e*t.a+s*t.b,n=e*t.c+s*t.d;return Math.atan2(n,i)*c.radDeg}copy(){const t=new Ot(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Dt=class extends v{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new h(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=m.newFloatArray(8),this.uvs=m.newFloatArray(8),this.tempColor=new h(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");const t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);const s=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*s,r=-this.height/2*this.scaleY+this.region.offsetY*i,o=n+this.region.width*s,a=r+this.region.height*i,h=this.rotation*Math.PI/180,l=Math.cos(h),c=Math.sin(h),u=this.x,d=this.y,f=n*l+u,p=n*c,m=r*l+d,g=r*c,x=o*l+u,w=o*c,y=a*l+d,b=a*c,v=this.offset;v[0]=f-g,v[1]=m+p,v[2]=f-b,v[3]=y+p,v[4]=x-b,v[5]=y+w,v[6]=x-g,v[7]=m+w,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,i){null!=this.sequence&&this.sequence.apply(t,this);let n=t.bone,r=this.offset,o=n.worldX,a=n.worldY,h=n.a,l=n.b,c=n.c,u=n.d,d=0,f=0;d=r[0],f=r[1],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a,s+=i,d=r[2],f=r[3],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a,s+=i,d=r[4],f=r[5],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a,s+=i,d=r[6],f=r[7],e[s]=d*h+f*l+o,e[s+1]=d*c+f*u+a}copy(){const t=new Dt(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,m.arrayCopy(this.uvs,0,t.uvs,0,8),m.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}},Bt=Dt;Bt.X1=0,Bt.Y1=1,Bt.C1R=2,Bt.C1G=3,Bt.C1B=4,Bt.C1A=5,Bt.U1=6,Bt.V1=7,Bt.X2=8,Bt.Y2=9,Bt.C2R=10,Bt.C2G=11,Bt.C2B=12,Bt.C2A=13,Bt.U2=14,Bt.V2=15,Bt.X3=16,Bt.Y3=17,Bt.C3R=18,Bt.C3G=19,Bt.C3B=20,Bt.C3A=21,Bt.U3=22,Bt.V3=23,Bt.X4=24,Bt.Y4=25,Bt.C4R=26,Bt.C4G=27,Bt.C4B=28,Bt.C4A=29,Bt.U4=30,Bt.V4=31;var Vt=class{constructor(t){this.atlas=t}loadSequence(t,e,s){const i=s.regions;for(let n=0,r=i.length;n<r;n++){const r=s.getPath(e,n),o=this.atlas.findRegion(r);if(null==o)throw new Error(`Region not found in atlas: ${r} (sequence: ${t})`);i[n]=o,i[n].renderObject=i[n]}}newRegionAttachment(t,e,s,i){const n=new Bt(e,s);if(null!=i)this.loadSequence(e,s,i);else{const t=this.atlas.findRegion(s);if(!t)throw new Error(`Region not found in atlas: ${s} (region attachment: ${e})`);t.renderObject=t,n.region=t}return n}newMeshAttachment(t,e,s,i){const n=new Xt(e,s);if(null!=i)this.loadSequence(e,s,i);else{const t=this.atlas.findRegion(s);if(!t)throw new Error(`Region not found in atlas: ${s} (mesh attachment: ${e})`);t.renderObject=t,n.region=t}return n}newBoundingBoxAttachment(t,e){return new St(e)}newPathAttachment(t,e){return new Lt(e)}newPointAttachment(t,e){return new Ot(e)}newClippingAttachment(t,e){return new Mt(e)}},zt=class{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Nt.Normal,this.skinRequired=!1,this.color=new h,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}},Nt=(t=>(t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection",t))(Nt||{}),_t=class{constructor(t,e,s){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,n,r,o){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=n,this.ashearX=r,this.ashearY=o;const a=this.parent;if(!a){const a=this.skeleton,h=s+90+o,l=a.scaleX,u=a.scaleY;return this.a=c.cosDeg(s+r)*i*l,this.b=c.cosDeg(h)*n*l,this.c=c.sinDeg(s+r)*i*u,this.d=c.sinDeg(h)*n*u,this.worldX=t*l+a.x,void(this.worldY=e*u+a.y)}let h=a.a,l=a.b,u=a.c,d=a.d;switch(this.worldX=h*t+l*e+a.worldX,this.worldY=u*t+d*e+a.worldY,this.data.transformMode){case 0:{const t=s+90+o,e=c.cosDeg(s+r)*i,a=c.cosDeg(t)*n,f=c.sinDeg(s+r)*i,p=c.sinDeg(t)*n;return this.a=h*e+l*f,this.b=h*a+l*p,this.c=u*e+d*f,void(this.d=u*a+d*p)}case 1:{const t=s+90+o;this.a=c.cosDeg(s+r)*i,this.b=c.cosDeg(t)*n,this.c=c.sinDeg(s+r)*i,this.d=c.sinDeg(t)*n;break}case 2:{let t=h*h+u*u,e=0;t>1e-4?(t=Math.abs(h*d-l*u)/t,h/=this.skeleton.scaleX,u/=this.skeleton.scaleY,l=u*t,d=h*t,e=Math.atan2(u,h)*c.radDeg):(h=0,u=0,e=90-Math.atan2(d,l)*c.radDeg);const a=s+r-e,f=s+o-e+90,p=c.cosDeg(a)*i,m=c.cosDeg(f)*n,g=c.sinDeg(a)*i,x=c.sinDeg(f)*n;this.a=h*p-l*g,this.b=h*m-l*x,this.c=u*p+d*g,this.d=u*m+d*x;break}case 3:case 4:{let t=c.cosDeg(s),e=c.sinDeg(s),a=(h*t+l*e)/this.skeleton.scaleX,f=(u*t+d*e)/this.skeleton.scaleY,p=Math.sqrt(a*a+f*f);p>1e-5&&(p=1/p),a*=p,f*=p,p=Math.sqrt(a*a+f*f),3==this.data.transformMode&&h*d-l*u<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p);const m=Math.PI/2+Math.atan2(f,a),g=Math.cos(m)*p,x=Math.sin(m)*p,w=c.cosDeg(r)*i,y=c.cosDeg(90+o)*n,b=c.sinDeg(r)*i,v=c.sinDeg(90+o)*n;this.a=a*w+g*b,this.b=a*y+g*v,this.c=f*w+x*b,this.d=f*y+x*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*c.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*c.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){const t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*c.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*c.radDeg);const e=t.a,s=t.b,i=t.c,n=t.d,r=1/(e*n-s*i),o=this.worldX-t.worldX,a=this.worldY-t.worldY;this.ax=o*n*r-a*s*r,this.ay=a*e*r-o*i*r;const h=r*n,l=r*e,u=r*s,d=r*i,f=h*this.a-u*this.c,p=h*this.b-u*this.d,m=l*this.c-d*this.a,g=l*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+m*m),this.ascaleX>1e-4){const t=f*g-p*m;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*p+m*g,t)*c.radDeg,this.arotation=Math.atan2(m,f)*c.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,p)*c.radDeg}worldToLocal(t){const e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){const e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){const e=c.sinDeg(t),s=c.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*c.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;const e=c.sinDeg(t),s=c.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*c.radDeg}rotateWorld(t){const e=this.a,s=this.b,i=this.c,n=this.d,r=c.cosDeg(t),o=c.sinDeg(t);this.a=r*e-o*i,this.b=r*s-o*n,this.c=o*e+r*i,this.d=o*s+r*n}},Ut=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},Wt=class{constructor(t,e="",s=new qt){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise(((t,e)=>{const s=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(s)};requestAnimationFrame(s)}))}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadBinary(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load binary ${t}: status ${e}, ${i}`)}))}loadText(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadText(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load text ${t}: status ${e}, ${i}`)}))}loadJson(t,e=()=>{},s=()=>{}){t=this.start(t),this.downloader.downloadJson(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load JSON ${t}: status ${e}, ${i}`)}))}loadTexture(t,e=()=>{},s=()=>{}){if(t=this.start(t),"undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document){const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{this.success(e,t,this.textureLoader(i))},i.onerror=()=>{this.error(s,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),i.src=t}else fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(s,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((s=>{s&&this.success(e,t,this.textureLoader(s))}))}loadTextureAtlas(t,e=()=>{},s=()=>{},i){const n=t.lastIndexOf("/"),r=n>=0?t.substring(0,n+1):"";t=this.start(t),this.downloader.downloadText(t,(n=>{try{let o=new Rt(n),a=o.pages.length,h=!1;for(const n of o.pages)this.loadTexture(i?i[n.name]:r+n.name,((s,i)=>{h||(n.setTexture(i),0==--a&&this.success(e,t,o))}),((e,i)=>{h||this.error(s,t,`Couldn't load texture atlas ${t} page image: ${e}`),h=!0}))}catch(e){this.error(s,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,i)=>{this.error(s,t,`Couldn't load texture atlas ${t}: status ${e}, ${i}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;const e=this.assets[t];if(e)return e;const s=this.errors[t];throw Error(`Asset not found: ${t}${s?`\n${s}`:""}`)}remove(t){t=this.pathPrefix+t;const e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(const t in this.assets){const e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},qt=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,i=new Uint8Array(s),n=0;n<s;n++)i[n]=e.charCodeAt(n);return i}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{const e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}const i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);const n=()=>{this.finish(t,i.status,i.responseText)};i.onload=n,i.onerror=n,i.send()}downloadJson(t,e,s){this.downloadText(t,(t=>{e(JSON.parse(t))}),s)}downloadBinary(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{const e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";const n=()=>{this.finish(t,i.status,i.response)};i.onload=()=>{200==i.status||0==i.status?this.finish(t,200,new Uint8Array(i.response)):n()},i.onerror=n,i.send()}start(t,e,s){let i=this.callbacks[t];try{if(i)return!0;this.callbacks[t]=i=[]}finally{i.push(e,s)}}finish(t,e,s){const i=this.callbacks[t];delete this.callbacks[t];const n=200==e||0==e?[s]:[e,s];for(let t=n.length-1,e=i.length;t<e;t+=2)i[t].apply(null,n)}},Gt=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},jt=class{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},$t=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++){const i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}`);this.bones.push(i)}const s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=s}isActive(){return this.active}update(){if(0==this.mix)return;const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,n,r,o){const a=t.parent;if(!a)throw new Error("IK bone must have parent.");let h=a.a,l=a.b,u=a.c,d=a.d,f=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case 1:p=e-t.worldX,m=s-t.worldY;break;case 2:const i=Math.abs(h*d-l*u)/(h*h+u*u),n=h/t.skeleton.scaleX,r=u/t.skeleton.scaleY;l=-r*i*t.skeleton.scaleX,d=n*i*t.skeleton.scaleY,f+=Math.atan2(r,n)*c.radDeg;default:const o=e-a.worldX,g=s-a.worldY,x=h*d-l*u;p=(o*d-g*l)/x-t.ax,m=(g*h-o*u)/x-t.ay}f+=Math.atan2(m,p)*c.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(i||n){switch(t.data.transformMode){case 3:case 4:p=e-t.worldX,m=s-t.worldY}const a=t.data.length*g,h=Math.sqrt(p*p+m*m);if(i&&h<a||n&&h>a&&a>1e-4){const t=(h/a-1)*o+1;g*=t,r&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*o,g,x,t.ashearX,t.ashearY)}apply2(t,e,s,i,n,r,o,a,h){let l=t.ax,u=t.ay,d=t.ascaleX,f=t.ascaleY,p=d,m=f,g=e.ascaleX,x=0,w=0,y=0;d<0?(d=-d,x=180,y=-1):(x=0,y=1),f<0&&(f=-f,y=-y),g<0?(g=-g,w=180):w=0;let b=e.ax,v=0,A=0,S=0,M=t.a,I=t.b,E=t.c,k=t.d,T=Math.abs(d-f)<=1e-4;!T||r?(v=0,A=M*b+t.worldX,S=E*b+t.worldY):(v=e.ay,A=M*b+I*v+t.worldX,S=E*b+k*v+t.worldY);const C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");M=C.a,I=C.b,E=C.c,k=C.d;let R,F,Y=1/(M*k-I*E),P=A-C.worldX,X=S-C.worldY,L=(P*k-X*I)*Y-l,O=(X*M-P*E)*Y-u,D=Math.sqrt(L*L+O*O),B=e.data.length*g;if(D<1e-4)return this.apply1(t,s,i,!1,r,!1,h),void e.updateWorldTransformWith(b,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);P=s-C.worldX,X=i-C.worldY;let V=(P*k-X*I)*Y-l,z=(X*M-P*E)*Y-u,N=V*V+z*z;if(0!=a){a*=d*(g+1)*.5;const t=Math.sqrt(N),e=t-D-B*d+a;if(e>0){let s=Math.min(1,e/(2*a))-1;s=(e-a*(1-s*s))/t,V-=s*V,z-=s*z,N=V*V+z*z}}t:if(T){B*=d;let t=(N-D*D-B*B)/(2*D*B);t<-1?(t=-1,F=Math.PI*n):t>1?(t=1,F=0,r&&(M=(Math.sqrt(N)/(D+B)-1)*h+1,p*=M,o&&(m*=M))):F=Math.acos(t)*n,M=D+B*t,I=B*Math.sin(F),R=Math.atan2(z*M-V*I,V*M+z*I)}else{M=d*B,I=f*B;const t=M*M,e=I*I,s=Math.atan2(z,V);E=e*D*D+t*N-t*e;const i=-2*e*D,r=e-t;if(k=i*i-4*r*E,k>=0){let t=Math.sqrt(k);i<0&&(t=-t),t=.5*-(i+t);const e=t/r,o=E/t,a=Math.abs(e)<Math.abs(o)?e:o;if(a*a<=N){X=Math.sqrt(N-a*a)*n,R=s-Math.atan2(X,a),F=Math.atan2(X/f,(a-D)/d);break t}}let o=c.PI,a=D-M,h=a*a,l=0,u=0,p=D+M,m=p*p,g=0;E=-M*D/(t-e),E>=-1&&E<=1&&(E=Math.acos(E),P=M*Math.cos(E)+D,X=I*Math.sin(E),k=P*P+X*X,k<h&&(o=E,h=k,a=P,l=X),k>m&&(u=E,m=k,p=P,g=X)),N<=.5*(h+m)?(R=s-Math.atan2(l*n,a),F=o*n):(R=s-Math.atan2(g*n,p),F=u*n)}let _=Math.atan2(v,b)*y,U=t.arotation;R=(R-_)*c.radDeg+x-U,R>180?R-=360:R<-180&&(R+=360),t.updateWorldTransformWith(l,u,U+R*h,p,m,0,0),U=e.arotation,F=((F+_)*c.radDeg-e.ashearX)*y+w-U,F>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(b,v,U+F*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},Ht=class extends Ut{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},Zt=class extends Ut{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Kt.Fixed,this.spacingMode=Jt.Fixed,this.rotateMode=Qt.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}},Kt=(t=>(t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",t))(Kt||{}),Jt=(t=>(t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional",t))(Jt||{}),Qt=(t=>(t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale",t))(Qt||{}),te=class{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,i=t.bones.length;s<i;s++){const i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}const s=e.findSlot(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=s,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){const t=this.target.getAttachment();if(!(t instanceof Lt))return;const e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;const n=this.data,r=0==n.rotateMode,o=2==n.rotateMode,a=this.bones,h=a.length,l=r?h:h+1,u=m.setArraySize(this.spaces,l),d=o?this.lengths=m.setArraySize(this.lengths,h):[],f=this.spacing;switch(n.spacingMode){case 2:if(o)for(let t=0,e=l-1;t<e;t++){const e=a[t],s=e.data.length;if(s<te.epsilon)d[t]=0;else{const i=s*e.a,n=s*e.c;d[t]=Math.sqrt(i*i+n*n)}}m.arrayFill(u,1,l,f);break;case 3:let t=0;for(let e=0,s=l-1;e<s;){const s=a[e],i=s.data.length;if(i<te.epsilon)o&&(d[e]=0),u[++e]=f;else{const n=i*s.a,r=i*s.c,a=Math.sqrt(n*n+r*r);o&&(d[e]=a),u[++e]=a,t+=a}}if(t>0){t=l/t*f;for(let e=1;e<l;e++)u[e]*=t}break;default:const e=0==n.spacingMode;for(let t=0,s=l-1;t<s;){const s=a[t],i=s.data.length;if(i<te.epsilon)o&&(d[t]=0),u[++t]=f;else{const n=i*s.a,r=i*s.c,a=Math.sqrt(n*n+r*r);o&&(d[t]=a),u[++t]=(e?i+f:f)*a/i}}}let p=this.computeWorldPositions(t,l,r),g=p[0],x=p[1],w=n.offsetRotation,y=!1;if(0==w)y=1==n.rotateMode;else{y=!1;const t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?c.degRad:-c.degRad}for(let t=0,n=3;t<h;t++,n+=3){const h=a[t];h.worldX+=(g-h.worldX)*s,h.worldY+=(x-h.worldY)*i;const l=p[n],f=p[n+1],m=l-g,b=f-x;if(o){const s=d[t];if(0!=s){const t=(Math.sqrt(m*m+b*b)/s-1)*e+1;h.a*=t,h.c*=t}}if(g=l,x=f,e>0){let s=h.a,i=h.b,o=h.c,a=h.d,l=0,d=0,f=0;if(l=r?p[n-1]:0==u[t+1]?p[n+2]:Math.atan2(b,m),l-=Math.atan2(o,s),y){d=Math.cos(l),f=Math.sin(l);const t=h.data.length;g+=(t*(d*s-f*o)-m)*e,x+=(t*(f*s+d*o)-b)*e}else l+=w;l>c.PI?l-=c.PI2:l<-c.PI&&(l+=c.PI2),l*=e,d=Math.cos(l),f=Math.sin(l),h.a=d*s-f*o,h.b=d*i-f*a,h.c=f*s+d*o,h.d=f*i+d*a}h.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i=this.target,n=this.position,r=this.spaces,o=m.setArraySize(this.positions,3*e+2),a=this.world,h=t.closed,l=t.worldVerticesLength,c=l/6,u=te.NONE;if(!t.constantSpeed){const d=t.lengths;c-=h?1:2;let f,p=d[c];switch(1==this.data.positionMode&&(n*=p),this.data.spacingMode){case 2:f=p;break;case 3:f=p/e;break;default:f=1}a=m.setArraySize(this.world,8);for(let m=0,g=0,x=0;m<e;m++,g+=3){const e=r[m]*f;n+=e;let w=n;if(h)w%=p,w<0&&(w+=p),x=0;else{if(w<0){u!=te.BEFORE&&(u=te.BEFORE,t.computeWorldVertices(i,2,4,a,0,2)),this.addBeforePosition(w,a,0,o,g);continue}if(w>p){u!=te.AFTER&&(u=te.AFTER,t.computeWorldVertices(i,l-6,4,a,0,2)),this.addAfterPosition(w-p,a,0,o,g);continue}}for(;;x++){const t=d[x];if(!(w>t)){if(0==x)w/=t;else{const e=d[x-1];w=(w-e)/(t-e)}break}}x!=u&&(u=x,h&&x==c?(t.computeWorldVertices(i,l-4,4,a,0,2),t.computeWorldVertices(i,0,4,a,4,2)):t.computeWorldVertices(i,6*x+2,8,a,0,2)),this.addCurvePosition(w,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],o,g,s||m>0&&0==e)}return o}h?(l+=2,a=m.setArraySize(this.world,l),t.computeWorldVertices(i,2,l-4,a,0,2),t.computeWorldVertices(i,0,2,a,l-4,2),a[l-2]=a[0],a[l-1]=a[1]):(c--,l-=4,a=m.setArraySize(this.world,l),t.computeWorldVertices(i,2,l,a,0,2));let d,f=m.setArraySize(this.curves,c),p=0,g=a[0],x=a[1],w=0,y=0,b=0,v=0,A=0,S=0,M=0,I=0,E=0,k=0,T=0,C=0,R=0,F=0;for(let t=0,e=2;t<c;t++,e+=6)w=a[e],y=a[e+1],b=a[e+2],v=a[e+3],A=a[e+4],S=a[e+5],M=.1875*(g-2*w+b),I=.1875*(x-2*y+v),E=.09375*(3*(w-b)-g+A),k=.09375*(3*(y-v)-x+S),T=2*M+E,C=2*I+k,R=.75*(w-g)+M+.16666667*E,F=.75*(y-x)+I+.16666667*k,p+=Math.sqrt(R*R+F*F),R+=T,F+=C,T+=E,C+=k,p+=Math.sqrt(R*R+F*F),R+=T,F+=C,p+=Math.sqrt(R*R+F*F),R+=T+E,F+=C+k,p+=Math.sqrt(R*R+F*F),f[t]=p,g=A,x=S;switch(1==this.data.positionMode&&(n*=p),this.data.spacingMode){case 2:d=p;break;case 3:d=p/e;break;default:d=1}let Y=this.segments,P=0;for(let t=0,i=0,c=0,m=0;t<e;t++,i+=3){const e=r[t]*d;n+=e;let X=n;if(h)X%=p,X<0&&(X+=p),c=0;else{if(X<0){this.addBeforePosition(X,a,0,o,i);continue}if(X>p){this.addAfterPosition(X-p,a,l-4,o,i);continue}}for(;;c++){const t=f[c];if(!(X>t)){if(0==c)X/=t;else{const e=f[c-1];X=(X-e)/(t-e)}break}}if(c!=u){u=c;let t=6*c;for(g=a[t],x=a[t+1],w=a[t+2],y=a[t+3],b=a[t+4],v=a[t+5],A=a[t+6],S=a[t+7],M=.03*(g-2*w+b),I=.03*(x-2*y+v),E=.006*(3*(w-b)-g+A),k=.006*(3*(y-v)-x+S),T=2*M+E,C=2*I+k,R=.3*(w-g)+M+.16666667*E,F=.3*(y-x)+I+.16666667*k,P=Math.sqrt(R*R+F*F),Y[0]=P,t=1;t<8;t++)R+=T,F+=C,T+=E,C+=k,P+=Math.sqrt(R*R+F*F),Y[t]=P;R+=T,F+=C,P+=Math.sqrt(R*R+F*F),Y[8]=P,R+=T+E,F+=C+k,P+=Math.sqrt(R*R+F*F),Y[9]=P,m=0}for(X*=P;;m++){const t=Y[m];if(!(X>t)){if(0==m)X/=t;else{const e=Y[m-1];X=m+(X-e)/(t-e)}break}}this.addCurvePosition(.1*X,g,x,w,y,b,v,A,S,o,i,s||t>0&&0==e)}return o}addBeforePosition(t,e,s,i,n){const r=e[s],o=e[s+1],a=e[s+2]-r,h=e[s+3]-o,l=Math.atan2(h,a);i[n]=r+t*Math.cos(l),i[n+1]=o+t*Math.sin(l),i[n+2]=l}addAfterPosition(t,e,s,i,n){const r=e[s+2],o=e[s+3],a=r-e[s],h=o-e[s+1],l=Math.atan2(h,a);i[n]=r+t*Math.cos(l),i[n+1]=o+t*Math.sin(l),i[n+2]=l}addCurvePosition(t,e,s,i,n,r,o,a,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=s,void(l[c+2]=Math.atan2(n-s,i-e));const d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,x=p*t,w=3*x,y=p*w,b=w*t,v=e*g+i*y+r*b+a*f,A=s*g+n*y+o*b+h*f;l[c]=v,l[c+1]=A,u&&(l[c+2]=t<.001?Math.atan2(n-s,i-e):Math.atan2(A-(s*m+n*x*2+o*d),v-(e*m+i*x*2+r*d)))}},ee=te;ee.NONE=-1,ee.BEFORE=-2,ee.AFTER=-3,ee.epsilon=1e-5;var se=class{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new h,this.darkColor=t.darkColor?new h:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof S&&this.attachment instanceof S&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},ie=class{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new w,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let s=0;s<t.bones.length;s++){const i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}const s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=s}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=0!=e||0!=s,a=this.target,h=a.a,l=a.b,u=a.c,d=a.d,f=h*d-l*u>0?c.degRad:-c.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){const x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,n=x.d,r=Math.atan2(u,h)-Math.atan2(i,e)+p;r>c.PI?r-=c.PI2:r<-c.PI&&(r+=c.PI2),r*=t;const o=Math.cos(r),a=Math.sin(r);x.a=o*e-a*i,x.b=o*s-a*n,x.c=a*e+o*i,x.d=a*s+o*n}if(o){const t=this.temp;a.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*s}if(0!=i){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+u*u)-t+this.data.offsetScaleX)*i)/t),x.a*=t,x.c*=t}if(0!=n){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(l*l+d*d)-t+this.data.offsetScaleY)*n)/t),x.b*=t,x.d*=t}if(r>0){let t=x.b,e=x.d,s=Math.atan2(e,t),i=Math.atan2(d,l)-Math.atan2(u,h)-(s-Math.atan2(x.c,x.a));i>c.PI?i-=c.PI2:i<-c.PI&&(i+=c.PI2),i=s+(i+m)*r;const n=Math.sqrt(t*t+e*e);x.b=Math.cos(i)*n,x.d=Math.sin(i)*n}x.updateAppliedTransform()}}applyRelativeWorld(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=0!=e||0!=s,a=this.target,h=a.a,l=a.b,u=a.c,d=a.d,f=h*d-l*u>0?c.degRad:-c.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){const x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,n=x.d,r=Math.atan2(u,h)+p;r>c.PI?r-=c.PI2:r<-c.PI&&(r+=c.PI2),r*=t;const o=Math.cos(r),a=Math.sin(r);x.a=o*e-a*i,x.b=o*s-a*n,x.c=a*e+o*i,x.d=a*s+o*n}if(o){const t=this.temp;a.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*s}if(0!=i){const t=(Math.sqrt(h*h+u*u)-1+this.data.offsetScaleX)*i+1;x.a*=t,x.c*=t}if(0!=n){const t=(Math.sqrt(l*l+d*d)-1+this.data.offsetScaleY)*n+1;x.b*=t,x.d*=t}if(r>0){let t=Math.atan2(d,l)-Math.atan2(u,h);t>c.PI?t-=c.PI2:t<-c.PI&&(t+=c.PI2);const e=x.b,s=x.d;t=Math.atan2(s,e)+(t-c.PI/2+m)*r;const i=Math.sqrt(e*e+s*s);x.b=Math.cos(t)*i,x.d=Math.sin(t)*i}x.updateAppliedTransform()}}applyAbsoluteLocal(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=this.target,a=this.bones;for(let h=0,l=a.length;h<l;h++){let l=a[h],c=l.arotation;if(0!=t){let e=o.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=l.ax,d=l.ay;u+=(o.ax-u+this.data.offsetX)*e,d+=(o.ay-d+this.data.offsetY)*s;let f=l.ascaleX,p=l.ascaleY;0!=i&&0!=f&&(f=(f+(o.ascaleX-f+this.data.offsetScaleX)*i)/f),0!=n&&0!=p&&(p=(p+(o.ascaleY-p+this.data.offsetScaleY)*n)/p);let m=l.ashearY;if(0!=r){let t=o.ashearY-m+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),m+=t*r}l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}applyRelativeLocal(){const t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=this.target,a=this.bones;for(let h=0,l=a.length;h<l;h++){const l=a[h],c=l.arotation+(o.arotation+this.data.offsetRotation)*t,u=l.ax+(o.ax+this.data.offsetX)*e,d=l.ay+(o.ay+this.data.offsetY)*s,f=l.ascaleX*((o.ascaleX-1+this.data.offsetScaleX)*i+1),p=l.ascaleY*((o.ascaleY-1+this.data.offsetScaleY)*n+1),m=l.ashearY+(o.ashearY+this.data.offsetShearY)*r;l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}},ne=class{constructor(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let s,i=t.bones[e];if(i.parent){const t=this.bones[i.parent.index];s=new _t(i,this,t),t.children.push(s)}else s=new _t(i,this,null);this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const s=t.slots[e],i=this.bones[s.boneData.index],n=new se(s,i);this.slots.push(n),this.drawOrder.push(n)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const s=t.ikConstraints[e];this.ikConstraints.push(new $t(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const s=t.transformConstraints[e];this.transformConstraints.push(new ie(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const s=t.pathConstraints[e];this.pathConstraints.push(new ee(s,this))}this.color=new h(1,1,1,1),this.updateCache()}get scaleY(){return ne.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){this._updateCache.length=0;const t=this.bones;for(let e=0,s=t.length;e<s;e++){const s=t[e];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){const t=this.skin.bones;for(let e=0,s=this.skin.bones.length;e<s;e++){let s=this.bones[t[e].index];do{s.sorted=!1,s.active=!0,s=s.parent}while(s)}}const e=this.ikConstraints,s=this.transformConstraints,i=this.pathConstraints,n=e.length,r=s.length,o=i.length,a=n+r+o;t:for(let t=0;t<a;t++){for(let s=0;s<n;s++){const i=e[s];if(i.data.order==t){this.sortIkConstraint(i);continue t}}for(let e=0;e<r;e++){const i=s[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<o;e++){const s=i[e];if(s.data.order==t){this.sortPathConstraint(s);continue t}}}for(let e=0,s=t.length;e<s;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&m.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target;this.sortBone(e);const s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{const e=s[s.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(i.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&m.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,i);const n=e.getAttachment();n instanceof Lt&&this.sortPathConstraintAttachmentWith(n,i);const r=t.bones,o=r.length;for(let t=0;t<o;t++)this.sortBone(r[t]);this._updateCache.push(t);for(let t=0;t<o;t++)this.sortReset(r[t].children);for(let t=0;t<o;t++)r[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&m.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);const e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){const s=e[t];this.sortBone(s.parent),this.sortBone(s)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,s){const i=t.attachments[e];if(i)for(const t in i)this.sortPathConstraintAttachmentWith(i[t],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Lt))return;const s=t.bones;if(s){const t=this.bones;for(let e=0,i=s.length;e<i;){let i=s[e++];for(i+=e;e<i;)this.sortBone(t[s[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;const e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){const s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){const t=this.bones;for(let e=0,s=t.length;e<s;e++){const s=t[e];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY}const e=this._updateCache;for(let t=0,s=e.length;t<s;t++)e[t].update()}updateWorldTransformWith(t){const e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");const s=t.a,i=t.b,n=t.c,r=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=n*this.x+r*this.y+t.worldY;const o=e.rotation+90+e.shearY,a=c.cosDeg(e.rotation+e.shearX)*e.scaleX,h=c.cosDeg(o)*e.scaleY,l=c.sinDeg(e.rotation+e.shearX)*e.scaleX,u=c.sinDeg(o)*e.scaleY;e.a=(s*a+i*l)*this.scaleX,e.b=(s*h+i*u)*this.scaleX,e.c=(n*a+r*l)*this.scaleY,e.d=(n*h+r*u)*this.scaleY;const d=this._updateCache;for(let t=0,s=d.length;t<s;t++){const s=d[t];s!=e&&s.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();const e=this.ikConstraints;for(let t=0,s=e.length;t<s;t++){const s=e[t];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}const s=this.transformConstraints;for(let t=0,e=s.length;t<e;t++){const e=s[t],i=e.data;e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY,e.mixScaleX=i.mixScaleX,e.mixScaleY=i.mixScaleY,e.mixShearY=i.mixShearY}const i=this.pathConstraints;for(let t=0,e=i.length;t<e;t++){const e=i[t],s=e.data;e.position=s.position,e.spacing=s.spacing,e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY}}setSlotsToSetupPose(){const t=this.slots;m.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}setSkinByName(t){const e=this.data.findSkin(t);if(!e)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{const e=this.slots;for(let s=0,i=e.length;s<i;s++){const i=e[s],n=i.data.attachmentName;if(n){const e=t.getAttachment(s,n);e&&i.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){const s=this.data.findSlot(t);if(!s)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(s.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){const s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");const s=this.slots;for(let i=0,n=s.length;i<n;i++){const n=s[i];if(n.data.name==t){let s=null;if(e&&(s=this.getAttachment(i,e),!s))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);return void n.setAttachment(s)}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.data.name==t)return i}return null}getBoundsRect(){const t=new w,e=new w;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,s=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let i=this.drawOrder,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let t=0,e=i.length;t<e;t++){const e=i[t];if(!e.bone.active)continue;let h=0,l=null,c=e.getAttachment();if(c instanceof Bt)h=8,l=m.setArraySize(s,h,0),c.computeWorldVertices(e,l,0,2);else if(c instanceof Xt){const t=c;h=t.worldVerticesLength,l=m.setArraySize(s,h,0),t.computeWorldVertices(e,0,h,l,0,2)}if(l)for(let t=0,e=l.length;t<e;t+=2){const e=l[t],s=l[t+1];n=Math.min(n,e),r=Math.min(r,s),o=Math.max(o,e),a=Math.max(a,s)}}t.set(n,r),e.set(o-n,a-r)}},re=ne;re.yDown=!1;var oe=class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");const e=this.skins;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");const e=this.events;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");const e=this.animations;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){const i=e[s];if(i.name==t)return i}return null}},ae=class{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},he=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");const i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}const e=t.getAttachments();for(let t=0;t<e.length;t++){const s=e[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}const e=t.getAttachments();for(let t=0;t<e.length;t++){const s=e[t];s.attachment&&(s.attachment instanceof Xt?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(t,e){const s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){const s=this.attachments[t];s&&delete s[e]}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const s=this.attachments[e];if(s)for(const i in s){const n=s[i];n&&t.push(new ae(e,i,n))}}return t}getAttachmentsForSlot(t,e){const s=this.attachments[t];if(s)for(const i in s){const n=s[i];n&&e.push(new ae(t,i,n))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){const n=t.slots[i],r=n.getAttachment();if(r&&s<e.attachments.length){const t=e.attachments[s];for(const e in t)if(r==t[e]){const t=this.getAttachment(s,e);t&&n.setAttachment(t);break}}s++}}},le=class{constructor(t,e,s){if(this.index=0,this.color=new h(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ce.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}},ce=(t=>(t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen",t))(ce||{}),ue=class extends Ut{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},de=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new oe;s.name="";const i=new fe(t),n=i.readInt32(),r=i.readInt32();s.hash=0==r&&0==n?null:r.toString(16)+n.toString(16),s.version=i.readString(),s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();const o=i.readBoolean();o&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());let a=0;a=i.readInt(!0);for(let t=0;t<a;t++){const t=i.readString();if(!t)throw new Error("String in string table must not be null.");i.strings.push(t)}a=i.readInt(!0);for(let t=0;t<a;t++){const n=i.readString();if(!n)throw new Error("Bone name must not be null.");const r=0==t?null:s.bones[i.readInt(!0)],a=new zt(t,n,r);a.rotation=i.readFloat(),a.x=i.readFloat()*e,a.y=i.readFloat()*e,a.scaleX=i.readFloat(),a.scaleY=i.readFloat(),a.shearX=i.readFloat(),a.shearY=i.readFloat(),a.length=i.readFloat()*e,a.transformMode=i.readInt(!0),a.skinRequired=i.readBoolean(),o&&h.rgba8888ToColor(a.color,i.readInt32()),s.bones.push(a)}a=i.readInt(!0);for(let t=0;t<a;t++){const e=i.readString();if(!e)throw new Error("Slot name must not be null.");const n=s.bones[i.readInt(!0)],r=new le(t,e,n);h.rgba8888ToColor(r.color,i.readInt32());const o=i.readInt32();-1!=o&&h.rgb888ToColor(r.darkColor=new h,o),r.attachmentName=i.readStringRef(),r.blendMode=i.readInt(!0),s.slots.push(r)}a=i.readInt(!0);for(let t,n=0;n<a;n++){const n=i.readString();if(!n)throw new Error("IK constraint data name must not be null.");const r=new Ht(n);r.order=i.readInt(!0),r.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)r.bones.push(s.bones[i.readInt(!0)]);r.target=s.bones[i.readInt(!0)],r.mix=i.readFloat(),r.softness=i.readFloat()*e,r.bendDirection=i.readByte(),r.compress=i.readBoolean(),r.stretch=i.readBoolean(),r.uniform=i.readBoolean(),s.ikConstraints.push(r)}a=i.readInt(!0);for(let t,n=0;n<a;n++){const n=i.readString();if(!n)throw new Error("Transform constraint data name must not be null.");const r=new ue(n);r.order=i.readInt(!0),r.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)r.bones.push(s.bones[i.readInt(!0)]);r.target=s.bones[i.readInt(!0)],r.local=i.readBoolean(),r.relative=i.readBoolean(),r.offsetRotation=i.readFloat(),r.offsetX=i.readFloat()*e,r.offsetY=i.readFloat()*e,r.offsetScaleX=i.readFloat(),r.offsetScaleY=i.readFloat(),r.offsetShearY=i.readFloat(),r.mixRotate=i.readFloat(),r.mixX=i.readFloat(),r.mixY=i.readFloat(),r.mixScaleX=i.readFloat(),r.mixScaleY=i.readFloat(),r.mixShearY=i.readFloat(),s.transformConstraints.push(r)}a=i.readInt(!0);for(let t,n=0;n<a;n++){const n=i.readString();if(!n)throw new Error("Path constraint data name must not be null.");const r=new Zt(n);r.order=i.readInt(!0),r.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)r.bones.push(s.bones[i.readInt(!0)]);r.target=s.slots[i.readInt(!0)],r.positionMode=i.readInt(!0),r.spacingMode=i.readInt(!0),r.rotateMode=i.readInt(!0),r.offsetRotation=i.readFloat(),r.position=i.readFloat(),0==r.positionMode&&(r.position*=e),r.spacing=i.readFloat(),0!=r.spacingMode&&1!=r.spacingMode||(r.spacing*=e),r.mixRotate=i.readFloat(),r.mixX=i.readFloat(),r.mixY=i.readFloat(),s.pathConstraints.push(r)}const l=this.readSkin(i,s,!0,o);l&&(s.defaultSkin=l,s.skins.push(l));{let t=s.skins.length;for(m.setArraySize(s.skins,a=t+i.readInt(!0));t<a;t++){const e=this.readSkin(i,s,!1,o);if(!e)throw new Error("readSkin() should not have returned null.");s.skins[t]=e}}a=this.linkedMeshes.length;for(let t=0;t<a;t++){const e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");const n=i.getAttachment(e.slotIndex,e.parent);if(!n)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?n:e.mesh,e.mesh.setParentMesh(n),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,a=i.readInt(!0);for(let t=0;t<a;t++){const t=i.readStringRef();if(!t)throw new Error;const e=new jt(t);e.intValue=i.readInt(!1),e.floatValue=i.readFloat(),e.stringValue=i.readString(),e.audioPath=i.readString(),e.audioPath&&(e.volume=i.readFloat(),e.balance=i.readFloat()),s.events.push(e)}a=i.readInt(!0);for(let t=0;t<a;t++){const t=i.readString();if(!t)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(i,t,s))}return s}readSkin(t,e,s,i){let n=null,r=0;if(s){if(r=t.readInt(!0),0==r)return null;n=new he("default")}else{const s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");n=new he(s),n.bones.length=t.readInt(!0);for(let s=0,i=n.bones.length;s<i;s++)n.bones[s]=e.bones[t.readInt(!0)];for(let s=0,i=t.readInt(!0);s<i;s++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);r=t.readInt(!0)}for(let s=0;s<r;s++){const s=t.readInt(!0);for(let r=0,o=t.readInt(!0);r<o;r++){const r=t.readStringRef();if(!r)throw new Error("Attachment name must not be null");const o=this.readAttachment(t,e,n,s,r,i);o&&n.setAttachment(s,r,o)}}return n}readAttachment(t,e,s,i,n,r){let o=this.scale,a=t.readStringRef();switch(a||(a=n),t.readByte()){case ge.Region:{let e=t.readStringRef(),i=t.readFloat(),n=t.readFloat(),r=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readInt32(),p=this.readSequence(t);e||(e=a);const m=this.attachmentLoader.newRegionAttachment(s,a,e,p);return m?(m.path=e,m.x=n*o,m.y=r*o,m.scaleX=l,m.scaleY=c,m.rotation=i,m.width=u*o,m.height=d*o,h.rgba8888ToColor(m.color,f),m.sequence=p,null==p&&m.updateRegion(),m):null}case ge.BoundingBox:{const e=t.readInt(!0),i=this.readVertices(t,e),n=r?t.readInt32():0,o=this.attachmentLoader.newBoundingBoxAttachment(s,a);return o?(o.worldVerticesLength=e<<1,o.vertices=i.vertices,o.bones=i.bones,r&&h.rgba8888ToColor(o.color,n),o):null}case ge.Mesh:{let e=t.readStringRef(),i=t.readInt32(),n=t.readInt(!0),l=this.readFloatArray(t,n<<1,1),c=this.readShortArray(t),u=this.readVertices(t,n),d=t.readInt(!0),f=this.readSequence(t),p=[],m=0,g=0;r&&(p=this.readShortArray(t),m=t.readFloat(),g=t.readFloat()),e||(e=a);const x=this.attachmentLoader.newMeshAttachment(s,a,e,f);return x?(x.path=e,h.rgba8888ToColor(x.color,i),x.bones=u.bones,x.vertices=u.vertices,x.worldVerticesLength=n<<1,x.triangles=c,x.regionUVs=l,null==f&&x.updateRegion(),x.hullLength=d<<1,x.sequence=f,r&&(x.edges=p,x.width=m*o,x.height=g*o),x):null}case ge.LinkedMesh:{let e=t.readStringRef(),n=t.readInt32(),l=t.readStringRef(),c=t.readStringRef(),u=t.readBoolean(),d=this.readSequence(t),f=0,p=0;r&&(f=t.readFloat(),p=t.readFloat()),e||(e=a);const m=this.attachmentLoader.newMeshAttachment(s,a,e,d);return m?(m.path=e,h.rgba8888ToColor(m.color,n),m.sequence=d,r&&(m.width=f*o,m.height=p*o),this.linkedMeshes.push(new pe(m,l,i,c,u)),m):null}case ge.Path:{const e=t.readBoolean(),i=t.readBoolean(),n=t.readInt(!0),l=this.readVertices(t,n),c=m.newArray(n/3,0);for(let e=0,s=c.length;e<s;e++)c[e]=t.readFloat()*o;const u=r?t.readInt32():0,d=this.attachmentLoader.newPathAttachment(s,a);return d?(d.closed=e,d.constantSpeed=i,d.worldVerticesLength=n<<1,d.vertices=l.vertices,d.bones=l.bones,d.lengths=c,r&&h.rgba8888ToColor(d.color,u),d):null}case ge.Point:{const e=t.readFloat(),i=t.readFloat(),n=t.readFloat(),l=r?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(s,a);return c?(c.x=i*o,c.y=n*o,c.rotation=e,r&&h.rgba8888ToColor(c.color,l),c):null}case ge.Clipping:{const i=t.readInt(!0),n=t.readInt(!0),o=this.readVertices(t,n),l=r?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(s,a);return c?(c.endSlot=e.slots[i],c.worldVerticesLength=n<<1,c.vertices=o.vertices,c.bones=o.bones,r&&h.rgba8888ToColor(c.color,l),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;const e=new I(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){const s=this.scale,i=e<<1,n=new me;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,i,s),n;const r=new Array,o=new Array;for(let i=0;i<e;i++){const e=t.readInt(!0);o.push(e);for(let i=0;i<e;i++)o.push(t.readInt(!0)),r.push(t.readFloat()*s),r.push(t.readFloat()*s),r.push(t.readFloat())}return n.vertices=m.toFloatArray(r),n.bones=o,n}readFloatArray(t,e,s){const i=new Array(e);if(1==s)for(let s=0;s<e;s++)i[s]=t.readFloat();else for(let n=0;n<e;n++)i[n]=t.readFloat()*s;return i}readShortArray(t){const e=t.readInt(!0),s=new Array(e);for(let i=0;i<e;i++)s[i]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);const i=new Array,n=this.scale;new h,new h;for(let e=0,s=t.readInt(!0);e<s;e++){const e=t.readInt(!0);for(let s=0,n=t.readInt(!0);s<n;s++){const s=t.readByte(),n=t.readInt(!0),r=n-1;switch(s){case Fe:{const s=new Z(n,e);for(let e=0;e<n;e++)s.setFrame(e,t.readFloat(),t.readStringRef());i.push(s);break}case Ye:{let s=t.readInt(!0),o=new q(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c,u),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,d,1),ye(t,o,s++,e,3,a,i,u,f,1)}a=i,h=n,l=r,c=d,u=f}i.push(o);break}case Pe:{let s=t.readInt(!0),o=new G(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,u,1)}a=i,h=n,l=r,c=u}i.push(o);break}case Xe:{let s=t.readInt(!0),o=new $(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c,u,d,f,p),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,m,1),ye(t,o,s++,e,3,a,i,u,g,1),ye(t,o,s++,e,4,a,i,d,x,1),ye(t,o,s++,e,5,a,i,f,w,1),ye(t,o,s++,e,6,a,i,p,y,1)}a=i,h=n,l=r,c=m,u=g,d=x,f=w,p=y}i.push(o);break}case Le:{let s=t.readInt(!0),o=new H(n,s,e),a=t.readFloat(),h=t.readUnsignedByte()/255,l=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,s=0;o.setFrame(e,a,h,l,c,u,d,f),e!=r;e++){const i=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,n,1),ye(t,o,s++,e,1,a,i,l,r,1),ye(t,o,s++,e,2,a,i,c,p,1),ye(t,o,s++,e,3,a,i,u,m,1),ye(t,o,s++,e,4,a,i,d,g,1),ye(t,o,s++,e,5,a,i,f,x,1)}a=i,h=n,l=r,c=p,u=m,d=g,f=x}i.push(o);break}case Oe:{let s=new j(n,t.readInt(!0),e),o=t.readFloat(),a=t.readUnsignedByte()/255;for(let e=0,i=0;s.setFrame(e,o,a),e!=r;e++){const n=t.readFloat(),r=t.readUnsignedByte()/255;switch(t.readByte()){case _e:s.setStepped(e);break;case Ue:ye(t,s,i++,e,0,o,n,a,r,1)}o=n,a=r}i.push(s)}}}}for(let e=0,s=t.readInt(!0);e<s;e++){const e=t.readInt(!0);for(let s=0,r=t.readInt(!0);s<r;s++){const s=t.readByte(),r=t.readInt(!0),o=t.readInt(!0);switch(s){case ve:i.push(xe(t,new L(r,o,e),1));break;case Ae:i.push(we(t,new O(r,o,e),n));break;case Se:i.push(xe(t,new D(r,o,e),n));break;case Me:i.push(xe(t,new B(r,o,e),n));break;case Ie:i.push(we(t,new V(r,o,e),1));break;case Ee:i.push(xe(t,new z(r,o,e),1));break;case ke:i.push(xe(t,new N(r,o,e),1));break;case Te:i.push(we(t,new _(r,o,e),1));break;case Ce:i.push(xe(t,new U(r,o,e),1));break;case Re:i.push(xe(t,new W(r,o,e),1))}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),r=s-1,o=new st(s,t.readInt(!0),e),a=t.readFloat(),h=t.readFloat(),l=t.readFloat()*n;for(let e=0,s=0;o.setFrame(e,a,h,l,t.readByte(),t.readBoolean(),t.readBoolean()),e!=r;e++){const i=t.readFloat(),r=t.readFloat(),c=t.readFloat()*n;switch(t.readByte()){case _e:o.setStepped(e);break;case Ue:ye(t,o,s++,e,0,a,i,h,r,1),ye(t,o,s++,e,1,a,i,l,c,n)}a=i,h=r,l=c}i.push(o)}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),n=s-1,r=new it(s,t.readInt(!0),e),o=t.readFloat(),a=t.readFloat(),h=t.readFloat(),l=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat();for(let e=0,s=0;r.setFrame(e,o,a,h,l,c,u,d),e!=n;e++){const i=t.readFloat(),n=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),x=t.readFloat();switch(t.readByte()){case _e:r.setStepped(e);break;case Ue:ye(t,r,s++,e,0,o,i,a,n,1),ye(t,r,s++,e,1,o,i,h,f,1),ye(t,r,s++,e,2,o,i,l,p,1),ye(t,r,s++,e,3,o,i,c,m,1),ye(t,r,s++,e,4,o,i,u,g,1),ye(t,r,s++,e,5,o,i,d,x,1)}o=i,a=n,h=f,l=p,c=m,u=g,d=x}i.push(r)}for(let e=0,r=t.readInt(!0);e<r;e++){const e=t.readInt(!0),r=s.pathConstraints[e];for(let s=0,o=t.readInt(!0);s<o;s++)switch(t.readByte()){case Ve:i.push(xe(t,new nt(t.readInt(!0),t.readInt(!0),e),0==r.positionMode?n:1));break;case ze:i.push(xe(t,new rt(t.readInt(!0),t.readInt(!0),e),0==r.spacingMode||1==r.spacingMode?n:1));break;case Ne:let s=new ot(t.readInt(!0),t.readInt(!0),e),o=t.readFloat(),a=t.readFloat(),h=t.readFloat(),l=t.readFloat();for(let e=0,i=0,n=s.getFrameCount()-1;s.setFrame(e,o,a,h,l),e!=n;e++){const n=t.readFloat(),r=t.readFloat(),c=t.readFloat(),u=t.readFloat();switch(t.readByte()){case _e:s.setStepped(e);break;case Ue:ye(t,s,i++,e,0,o,n,a,r,1),ye(t,s,i++,e,1,o,n,h,c,1),ye(t,s,i++,e,2,o,n,l,u,1)}o=n,a=r,h=c,l=u}i.push(s)}}for(let e=0,r=t.readInt(!0);e<r;e++){const e=s.skins[t.readInt(!0)];for(let s=0,r=t.readInt(!0);s<r;s++){const s=t.readInt(!0);for(let r=0,o=t.readInt(!0);r<o;r++){const r=t.readStringRef();if(!r)throw new Error("attachmentName must not be null.");const o=e.getAttachment(s,r),a=t.readByte(),h=t.readInt(!0),l=h-1;switch(a){case De:{let e=o,r=e.bones,a=e.vertices,c=r?a.length/3*2:a.length,u=t.readInt(!0),d=new K(h,u,s,e),f=t.readFloat();for(let e=0,s=0;;e++){let i,o=t.readInt(!0);if(0==o)i=r?m.newFloatArray(c):a;else{i=m.newFloatArray(c);const e=t.readInt(!0);if(o+=e,1==n)for(let s=e;s<o;s++)i[s]=t.readFloat();else for(let s=e;s<o;s++)i[s]=t.readFloat()*n;if(!r)for(let t=0,e=i.length;t<e;t++)i[t]+=a[t]}if(d.setFrame(e,f,i),e==l)break;const h=t.readFloat();switch(t.readByte()){case _e:d.setStepped(e);break;case Ue:ye(t,d,s++,e,0,f,h,0,1,1)}f=h}i.push(d);break}case Be:{const e=new ht(h,s,o);for(let s=0;s<h;s++){const i=t.readFloat(),n=t.readInt32();e.setFrame(s,i,k[15&n],n>>4,t.readFloat())}i.push(e);break}}}}}const r=t.readInt(!0);if(r>0){const e=new et(r),n=s.slots.length;for(let s=0;s<r;s++){const i=t.readFloat(),r=t.readInt(!0),o=m.newArray(n,0);for(let t=n-1;t>=0;t--)o[t]=-1;let a=m.newArray(n-r,0),h=0,l=0;for(let e=0;e<r;e++){const e=t.readInt(!0);for(;h!=e;)a[l++]=h++;o[h+t.readInt(!0)]=h++}for(;h<n;)a[l++]=h++;for(let t=n-1;t>=0;t--)-1==o[t]&&(o[t]=a[--l]);e.setFrame(s,i,o)}i.push(e)}const o=t.readInt(!0);if(o>0){const e=new Q(o);for(let i=0;i<o;i++){const n=t.readFloat(),r=s.events[t.readInt(!0)],o=new Gt(n,r);o.intValue=t.readInt(!1),o.floatValue=t.readFloat(),o.stringValue=t.readBoolean()?t.readString():r.stringValue,o.data.audioPath&&(o.volume=t.readFloat(),o.balance=t.readFloat()),e.setFrame(i,o)}i.push(e)}let a=0;for(let t=0,e=i.length;t<e;t++)a=Math.max(a,i[t].getDuration());return new T(e,i,a)}},fe=class{constructor(t,e=new Array,s=0,i=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){const t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=127&e;return!!(128&e)&&(e=this.readByte(),s|=(127&e)<<7,!!(128&e)&&(e=this.readByte(),s|=(127&e)<<14,!!(128&e)&&(e=this.readByte(),s|=(127&e)<<21,!!(128&e)&&(e=this.readByte(),s|=(127&e)<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){const t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){const t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),s+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),s+=3;break;default:e+=String.fromCharCode(t),s++}}return e}readFloat(){const t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},pe=class{constructor(t,e,s,i,n){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=n}},me=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},ge=(t=>(t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping",t))(ge||{});function xe(t,e,s){let i=t.readFloat(),n=t.readFloat()*s;for(let r=0,o=0,a=e.getFrameCount()-1;e.setFrame(r,i,n),r!=a;r++){const a=t.readFloat(),h=t.readFloat()*s;switch(t.readByte()){case _e:e.setStepped(r);break;case Ue:ye(t,e,o++,r,0,i,a,n,h,s)}i=a,n=h}return e}function we(t,e,s){let i=t.readFloat(),n=t.readFloat()*s,r=t.readFloat()*s;for(let o=0,a=0,h=e.getFrameCount()-1;e.setFrame(o,i,n,r),o!=h;o++){const h=t.readFloat(),l=t.readFloat()*s,c=t.readFloat()*s;switch(t.readByte()){case _e:e.setStepped(o);break;case Ue:ye(t,e,a++,o,0,i,h,n,l,s),ye(t,e,a++,o,1,i,h,r,c,s)}i=h,n=l,r=c}return e}function ye(t,e,s,i,n,r,o,a,h,l){e.setBezier(s,i,n,r,a,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,o,h)}var be,ve=0,Ae=1,Se=2,Me=3,Ie=4,Ee=5,ke=6,Te=7,Ce=8,Re=9,Fe=0,Ye=1,Pe=2,Xe=3,Le=4,Oe=5,De=0,Be=1,Ve=0,ze=1,Ne=2,_e=1,Ue=2,We=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new x((()=>m.newFloatArray(16)))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");const s=this.boundingBoxes,i=this.polygons,n=this.polygonPool,r=t.slots,o=r.length;s.length=0,n.freeAll(i),i.length=0;for(let t=0;t<o;t++){const e=r[t];if(!e.bone.active)continue;const o=e.getAttachment();if(o instanceof St){const t=o;s.push(t);let r=n.obtain();r.length!=t.worldVerticesLength&&(r=m.newFloatArray(t.worldVerticesLength)),i.push(r),t.computeWorldVertices(e,0,t.worldVerticesLength,r,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=this.polygons;for(let r=0,o=n.length;r<o;r++){const o=n[r],a=o;for(let n=0,r=o.length;n<r;n+=2){const r=a[n],o=a[n+1];t=Math.min(t,r),e=Math.min(e,o),s=Math.max(s,r),i=Math.max(i,o)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,i){const n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;if(t<=n&&s<=n||e<=r&&i<=r||t>=o&&s>=o||e>=a&&i>=a)return!1;let h=(i-e)/(s-t),l=h*(n-t)+e;if(l>r&&l<a)return!0;if(l=h*(o-t)+e,l>r&&l<a)return!0;let c=(r-e)/h+t;return c>n&&c<o||(c=(a-e)/h+t,c>n&&c<o)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){const s=this.polygons;for(let i=0,n=s.length;i<n;i++)if(this.containsPointPolygon(s[i],t,e))return this.boundingBoxes[i];return null}containsPointPolygon(t,e,s){let i=t,n=t.length,r=n-2,o=!1;for(let t=0;t<n;t+=2){const n=i[t+1],a=i[r+1];if(n<s&&a>=s||a<s&&n>=s){const h=i[t];h+(s-n)/(a-n)*(i[r]-h)<e&&(o=!o)}r=t}return o}intersectsSegment(t,e,s,i){const n=this.polygons;for(let r=0,o=n.length;r<o;r++)if(this.intersectsSegmentPolygon(n[r],t,e,s,i))return this.boundingBoxes[r];return null}intersectsSegmentPolygon(t,e,s,i,n){let r=t,o=t.length,a=e-i,h=s-n,l=e*n-s*i,c=r[o-2],u=r[o-1];for(let t=0;t<o;t+=2){const o=r[t],d=r[t+1],f=c*d-u*o,p=c-o,m=u-d,g=a*m-h*p,x=(l*p-a*f)/g;if((x>=c&&x<=o||x>=o&&x<=c)&&(x>=e&&x<=i||x>=i&&x<=e)){const t=(l*m-h*f)/g;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=s&&t<=n||t>=n&&t<=s))return!0}c=o,u=d}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");const e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},qe=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new x((()=>new Array)),this.polygonIndicesPool=new x((()=>new Array))}triangulate(t){let e=t,s=t.length>>1,i=this.indicesArray;i.length=0;for(let t=0;t<s;t++)i[t]=t;const n=this.isConcaveArray;n.length=0;for(let t=0,r=s;t<r;++t)n[t]=qe.isConcave(t,s,e,i);const r=this.triangles;for(r.length=0;s>3;){let t=s-1,o=0,a=1;for(;;){t:if(!n[o]){const r=i[t]<<1,h=i[o]<<1,l=i[a]<<1,c=e[r],u=e[r+1],d=e[h],f=e[h+1],p=e[l],m=e[l+1];for(let r=(a+1)%s;r!=t;r=(r+1)%s){if(!n[r])continue;const t=i[r]<<1,s=e[t],o=e[t+1];if(qe.positiveArea(p,m,c,u,s,o)&&qe.positiveArea(c,u,d,f,s,o)&&qe.positiveArea(d,f,p,m,s,o))break t}break}if(0==a){do{if(!n[o])break;o--}while(o>0);break}t=o,o=a,a=(a+1)%s}r.push(i[(s+o-1)%s]),r.push(i[o]),r.push(i[(o+1)%s]),i.splice(o,1),n.splice(o,1),s--;const h=(s+o-1)%s,l=o==s?0:o;n[h]=qe.isConcave(h,s,e,i),n[l]=qe.isConcave(l,s,e,i)}return 3==s&&(r.push(i[2]),r.push(i[0]),r.push(i[1])),r}decompose(t,e){const s=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;const n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n),n.length=0;let r=this.polygonIndicesPool.obtain();r.length=0;let o=this.polygonPool.obtain();o.length=0;let a=-1,h=0;for(let t=0,l=e.length;t<l;t+=3){let l=e[t]<<1,c=e[t+1]<<1,u=e[t+2]<<1,d=s[l],f=s[l+1],p=s[c],m=s[c+1],g=s[u],x=s[u+1],w=!1;if(a==l){const t=o.length-4,e=qe.winding(o[t],o[t+1],o[t+2],o[t+3],g,x),s=qe.winding(g,x,o[0],o[1],o[2],o[3]);e==h&&s==h&&(o.push(g),o.push(x),r.push(u),w=!0)}w||(o.length>0?(i.push(o),n.push(r)):(this.polygonPool.free(o),this.polygonIndicesPool.free(r)),o=this.polygonPool.obtain(),o.length=0,o.push(d),o.push(f),o.push(p),o.push(m),o.push(g),o.push(x),r=this.polygonIndicesPool.obtain(),r.length=0,r.push(l),r.push(c),r.push(u),h=qe.winding(d,f,p,m,g,x),a=l)}o.length>0&&(i.push(o),n.push(r));for(let t=0,e=i.length;t<e;t++){if(r=n[t],0==r.length)continue;const s=r[0],a=r[r.length-1];o=i[t];let h=o.length-4,l=o[h],c=o[h+1],u=o[h+2],d=o[h+3],f=o[0],p=o[1],m=o[2],g=o[3],x=qe.winding(l,c,u,d,f,p);for(let h=0;h<e;h++){if(h==t)continue;const e=n[h];if(3!=e.length)continue;const w=e[0],y=e[1],b=e[2],v=i[h],A=v[v.length-2],S=v[v.length-1];if(w!=s||y!=a)continue;const M=qe.winding(l,c,u,d,A,S),I=qe.winding(A,S,f,p,m,g);M==x&&I==x&&(v.length=0,e.length=0,o.push(A),o.push(S),r.push(b),l=u,c=d,u=A,d=S,h=0)}}for(let t=i.length-1;t>=0;t--)o=i[t],0==o.length&&(i.splice(t,1),this.polygonPool.free(o),r=n[t],n.splice(t,1),this.polygonIndicesPool.free(r));return i}static isConcave(t,e,s,i){const n=i[(e+t-1)%e]<<1,r=i[t]<<1,o=i[(t+1)%e]<<1;return!this.positiveArea(s[n],s[n+1],s[r],s[r+1],s[o],s[o+1])}static positiveArea(t,e,s,i,n,r){return t*(r-i)+s*(e-r)+n*(i-e)>=0}static winding(t,e,s,i,n,r){const o=s-t,a=i-e;return n*a-r*o+o*e-t*a>=0?1:-1}},Ge=class{constructor(){this.triangulator=new qe,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;const s=e.worldVerticesLength,i=m.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);const n=this.clippingPolygon;Ge.makeClockwise(n);const r=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n));for(let t=0,e=r.length;t<e;t++){const e=r[t];Ge.makeClockwise(e),e.push(e[0]),e.push(e[1])}return r.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,n,r,o,a){let h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,u=this.clippingPolygons,d=u.length,f=a?12:8,p=0;l.length=0,c.length=0;t:for(let e=0;e<i;e+=3){let i=s[e]<<1,g=t[i],x=t[i+1],w=n[i],y=n[i+1];i=s[e+1]<<1;const b=t[i],v=t[i+1],A=n[i],S=n[i+1];i=s[e+2]<<1;const M=t[i],I=t[i+1],E=n[i],k=n[i+1];for(let t=0;t<d;t++){let e=l.length;if(!this.clip(g,x,b,v,M,I,u[t],h)){const t=m.setArraySize(l,e+3*f);t[e]=g,t[e+1]=x,t[e+2]=r.r,t[e+3]=r.g,t[e+4]=r.b,t[e+5]=r.a,a?(t[e+6]=w,t[e+7]=y,t[e+8]=o.r,t[e+9]=o.g,t[e+10]=o.b,t[e+11]=o.a,t[e+12]=b,t[e+13]=v,t[e+14]=r.r,t[e+15]=r.g,t[e+16]=r.b,t[e+17]=r.a,t[e+18]=A,t[e+19]=S,t[e+20]=o.r,t[e+21]=o.g,t[e+22]=o.b,t[e+23]=o.a,t[e+24]=M,t[e+25]=I,t[e+26]=r.r,t[e+27]=r.g,t[e+28]=r.b,t[e+29]=r.a,t[e+30]=E,t[e+31]=k,t[e+32]=o.r,t[e+33]=o.g,t[e+34]=o.b,t[e+35]=o.a):(t[e+6]=w,t[e+7]=y,t[e+8]=b,t[e+9]=v,t[e+10]=r.r,t[e+11]=r.g,t[e+12]=r.b,t[e+13]=r.a,t[e+14]=A,t[e+15]=S,t[e+16]=M,t[e+17]=I,t[e+18]=r.r,t[e+19]=r.g,t[e+20]=r.b,t[e+21]=r.a,t[e+22]=E,t[e+23]=k),e=c.length;const s=m.setArraySize(c,e+3);s[e]=p,s[e+1]=p+1,s[e+2]=p+2,p+=3;continue t}{const t=h.length;if(0==t)continue;let s=v-I,i=M-b,n=g-M,u=I-x,d=1/(s*n+i*(x-I)),T=t>>1,C=this.clipOutput,R=m.setArraySize(l,e+T*f);for(let h=0;h<t;h+=2){const t=C[h],l=C[h+1];R[e]=t,R[e+1]=l,R[e+2]=r.r,R[e+3]=r.g,R[e+4]=r.b,R[e+5]=r.a;const c=t-M,p=l-I,m=(s*c+i*p)*d,g=(u*c+n*p)*d,x=1-m-g;R[e+6]=w*m+A*g+E*x,R[e+7]=y*m+S*g+k*x,a&&(R[e+8]=o.r,R[e+9]=o.g,R[e+10]=o.b,R[e+11]=o.a),e+=f}e=c.length;const F=m.setArraySize(c,e+3*(T-2));T--;for(let t=1;t<T;t++)F[e]=p,F[e+1]=p+t,F[e+2]=p+t+1,e+=3;p+=T+1}}}}clip(t,e,s,i,n,r,o,a){let h,l=a,c=!1;o.length%4>=2?(h=a,a=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(s),h.push(i),h.push(n),h.push(r),h.push(t),h.push(e),a.length=0;const u=o,d=o.length-4;for(let t=0;;t+=2){const e=u[t],s=u[t+1],i=u[t+2],n=u[t+3],r=e-i,o=s-n,f=h,p=h.length-2,m=a.length;for(let t=0;t<p;t+=2){const h=f[t],l=f[t+1],u=f[t+2],d=f[t+3],p=r*(d-n)-o*(u-i)>0;if(r*(l-n)-o*(h-i)>0){if(p){a.push(u),a.push(d);continue}const t=d-l,r=u-h,o=t*(i-e)-r*(n-s);if(Math.abs(o)>1e-6){const c=(r*(s-l)-t*(e-h))/o;a.push(e+(i-e)*c),a.push(s+(n-s)*c)}else a.push(e),a.push(s)}else if(p){const t=d-l,r=u-h,o=t*(i-e)-r*(n-s);if(Math.abs(o)>1e-6){const c=(r*(s-l)-t*(e-h))/o;a.push(e+(i-e)*c),a.push(s+(n-s)*c)}else a.push(e),a.push(s);a.push(u),a.push(d)}c=!0}if(m==a.length)return l.length=0,!0;if(a.push(a[0]),a.push(a[1]),t==d)break;const g=a;(a=h).length=0,h=g}if(l!=a){l.length=0;for(let t=0,e=a.length-2;t<e;t++)l[t]=a[t]}else l.length=l.length-2;return c}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],n=0,r=0,o=0,a=0;for(let t=0,h=s-3;t<h;t+=2)n=e[t],r=e[t+1],o=e[t+2],a=e[t+3],i+=n*a-o*r;if(!(i<0))for(let t=0,i=s-2,n=s>>1;t<n;t+=2){const s=e[t],n=e[t+1],r=i-t;e[t]=e[r],e[t+1]=e[r+1],e[r]=s,e[r+1]=n}}},je=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new oe,i="string"==typeof t?JSON.parse(t):t,n=i.skeleton;if(n&&(s.hash=n.hash,s.version=n.spine,s.x=n.x,s.y=n.y,s.width=n.width,s.height=n.height,s.fps=n.fps,s.imagesPath=n.images),i.bones)for(let t=0;t<i.bones.length;t++){let n=i.bones[t],r=null,o=Je(n,"parent",null);o&&(r=s.findBone(o));const a=new zt(s.bones.length,n.name,r);a.length=Je(n,"length",0)*e,a.x=Je(n,"x",0)*e,a.y=Je(n,"y",0)*e,a.rotation=Je(n,"rotation",0),a.scaleX=Je(n,"scaleX",1),a.scaleY=Je(n,"scaleY",1),a.shearX=Je(n,"shearX",0),a.shearY=Je(n,"shearY",0),a.transformMode=m.enumValue(Nt,Je(n,"transform","Normal")),a.skinRequired=Je(n,"skin",!1);const h=Je(n,"color",null);h&&a.color.setFromString(h),s.bones.push(a)}if(i.slots)for(let t=0;t<i.slots.length;t++){const e=i.slots[t],n=s.findBone(e.bone);if(!n)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);const r=new le(s.slots.length,e.name,n),o=Je(e,"color",null);o&&r.color.setFromString(o);const a=Je(e,"dark",null);a&&(r.darkColor=h.fromString(a)),r.attachmentName=Je(e,"attachment",null),r.blendMode=m.enumValue(ce,Je(e,"blend","normal")),s.slots.push(r)}if(i.ik)for(let t=0;t<i.ik.length;t++){const n=i.ik[t],r=new Ht(n.name);r.order=Je(n,"order",0),r.skinRequired=Je(n,"skin",!1);for(let t=0;t<n.bones.length;t++){const e=s.findBone(n.bones[t]);if(!e)throw new Error(`Couldn't find bone ${n.bones[t]} for IK constraint ${n.name}.`);r.bones.push(e)}const o=s.findBone(n.target);if(!o)throw new Error(`Couldn't find target bone ${n.target} for IK constraint ${n.name}.`);r.target=o,r.mix=Je(n,"mix",1),r.softness=Je(n,"softness",0)*e,r.bendDirection=Je(n,"bendPositive",!0)?1:-1,r.compress=Je(n,"compress",!1),r.stretch=Je(n,"stretch",!1),r.uniform=Je(n,"uniform",!1),s.ikConstraints.push(r)}if(i.transform)for(let t=0;t<i.transform.length;t++){const n=i.transform[t],r=new ue(n.name);r.order=Je(n,"order",0),r.skinRequired=Je(n,"skin",!1);for(let t=0;t<n.bones.length;t++){const e=n.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for transform constraint ${n.name}.`);r.bones.push(i)}const o=n.target,a=s.findBone(o);if(!a)throw new Error(`Couldn't find target bone ${o} for transform constraint ${n.name}.`);r.target=a,r.local=Je(n,"local",!1),r.relative=Je(n,"relative",!1),r.offsetRotation=Je(n,"rotation",0),r.offsetX=Je(n,"x",0)*e,r.offsetY=Je(n,"y",0)*e,r.offsetScaleX=Je(n,"scaleX",0),r.offsetScaleY=Je(n,"scaleY",0),r.offsetShearY=Je(n,"shearY",0),r.mixRotate=Je(n,"mixRotate",1),r.mixX=Je(n,"mixX",1),r.mixY=Je(n,"mixY",r.mixX),r.mixScaleX=Je(n,"mixScaleX",1),r.mixScaleY=Je(n,"mixScaleY",r.mixScaleX),r.mixShearY=Je(n,"mixShearY",1),s.transformConstraints.push(r)}if(i.path)for(let t=0;t<i.path.length;t++){const n=i.path[t],r=new Zt(n.name);r.order=Je(n,"order",0),r.skinRequired=Je(n,"skin",!1);for(let t=0;t<n.bones.length;t++){const e=n.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for path constraint ${n.name}.`);r.bones.push(i)}const o=n.target,a=s.findSlot(o);if(!a)throw new Error(`Couldn't find target slot ${o} for path constraint ${n.name}.`);r.target=a,r.positionMode=m.enumValue(Kt,Je(n,"positionMode","Percent")),r.spacingMode=m.enumValue(Jt,Je(n,"spacingMode","Length")),r.rotateMode=m.enumValue(Qt,Je(n,"rotateMode","Tangent")),r.offsetRotation=Je(n,"rotation",0),r.position=Je(n,"position",0),0==r.positionMode&&(r.position*=e),r.spacing=Je(n,"spacing",0),0!=r.spacingMode&&1!=r.spacingMode||(r.spacing*=e),r.mixRotate=Je(n,"mixRotate",1),r.mixX=Je(n,"mixX",1),r.mixY=Je(n,"mixY",r.mixX),s.pathConstraints.push(r)}if(i.skins)for(let t=0;t<i.skins.length;t++){const e=i.skins[t],n=new he(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){const i=e.bones[t],r=s.findBone(i);if(!r)throw new Error(`Couldn't find bone ${i} for skin ${e.name}.`);n.bones.push(r)}if(e.ik)for(let t=0;t<e.ik.length;t++){const i=e.ik[t],r=s.findIkConstraint(i);if(!r)throw new Error(`Couldn't find IK constraint ${i} for skin ${e.name}.`);n.constraints.push(r)}if(e.transform)for(let t=0;t<e.transform.length;t++){const i=e.transform[t],r=s.findTransformConstraint(i);if(!r)throw new Error(`Couldn't find transform constraint ${i} for skin ${e.name}.`);n.constraints.push(r)}if(e.path)for(let t=0;t<e.path.length;t++){const i=e.path[t],r=s.findPathConstraint(i);if(!r)throw new Error(`Couldn't find path constraint ${i} for skin ${e.name}.`);n.constraints.push(r)}for(const t in e.attachments){const i=s.findSlot(t);if(!i)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);const r=e.attachments[t];for(const t in r){const e=this.readAttachment(r[t],n,i.index,t,s);e&&n.setAttachment(i.index,t,e)}}s.skins.push(n),"default"==n.name&&(s.defaultSkin=n)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){const e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error(`Skin not found: ${e.skin}`);const n=i.getAttachment(e.slotIndex,e.parent);if(!n)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?n:e.mesh,e.mesh.setParentMesh(n),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(const t in i.events){const e=i.events[t],n=new jt(t);n.intValue=Je(e,"int",0),n.floatValue=Je(e,"float",0),n.stringValue=Je(e,"string",""),n.audioPath=Je(e,"audio",null),n.audioPath&&(n.volume=Je(e,"volume",1),n.balance=Je(e,"balance",0)),s.events.push(n)}if(i.animations)for(const t in i.animations){const e=i.animations[t];this.readAnimation(e,t,s)}return s}readAttachment(t,e,s,i,n){const r=this.scale;switch(i=Je(t,"name",i),Je(t,"type","region")){case"region":{const s=Je(t,"path",i),n=this.readSequence(Je(t,"sequence",null)),o=this.attachmentLoader.newRegionAttachment(e,i,s,n);if(!o)return null;o.path=s,o.x=Je(t,"x",0)*r,o.y=Je(t,"y",0)*r,o.scaleX=Je(t,"scaleX",1),o.scaleY=Je(t,"scaleY",1),o.rotation=Je(t,"rotation",0),o.width=t.width*r,o.height=t.height*r,o.sequence=n;const a=Je(t,"color",null);return a&&o.color.setFromString(a),null!=o.region&&o.updateRegion(),o}case"boundingbox":{const s=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!s)return null;this.readVertices(t,s,t.vertexCount<<1);const n=Je(t,"color",null);return n&&s.color.setFromString(n),s}case"mesh":case"linkedmesh":{const n=Je(t,"path",i),o=this.readSequence(Je(t,"sequence",null)),a=this.attachmentLoader.newMeshAttachment(e,i,n,o);if(!a)return null;a.path=n;const h=Je(t,"color",null);h&&a.color.setFromString(h),a.width=Je(t,"width",0)*r,a.height=Je(t,"height",0)*r,a.sequence=o;const l=Je(t,"parent",null);if(l)return this.linkedMeshes.push(new $e(a,Je(t,"skin",null),s,l,Je(t,"timelines",!0))),a;const c=t.uvs;return this.readVertices(t,a,c.length),a.triangles=t.triangles,a.regionUVs=c,null!=a.region&&a.updateRegion(),a.edges=Je(t,"edges",null),a.hullLength=2*Je(t,"hull",0),a}case"path":{const s=this.attachmentLoader.newPathAttachment(e,i);if(!s)return null;s.closed=Je(t,"closed",!1),s.constantSpeed=Je(t,"constantSpeed",!0);const n=t.vertexCount;this.readVertices(t,s,n<<1);const o=m.newArray(n/3,0);for(let e=0;e<t.lengths.length;e++)o[e]=t.lengths[e]*r;s.lengths=o;const a=Je(t,"color",null);return a&&s.color.setFromString(a),s}case"point":{const s=this.attachmentLoader.newPointAttachment(e,i);if(!s)return null;s.x=Je(t,"x",0)*r,s.y=Je(t,"y",0)*r,s.rotation=Je(t,"rotation",0);const n=Je(t,"color",null);return n&&s.color.setFromString(n),s}case"clipping":{const s=this.attachmentLoader.newClippingAttachment(e,i);if(!s)return null;const r=Je(t,"end",null);r&&(s.endSlot=n.findSlot(r));const o=t.vertexCount;this.readVertices(t,s,o<<1);const a=Je(t,"color",null);return a&&s.color.setFromString(a),s}}return null}readSequence(t){if(null==t)return null;const e=new I(Je(t,"count",0));return e.start=Je(t,"start",1),e.digits=Je(t,"digits",0),e.setupIndex=Je(t,"setup",0),e}readVertices(t,e,s){const i=this.scale;e.worldVerticesLength=s;const n=t.vertices;if(s==n.length){const t=m.toFloatArray(n);if(1!=i)for(let e=0,s=n.length;e<s;e++)t[e]*=i;return void(e.vertices=t)}const r=new Array,o=new Array;for(let t=0,e=n.length;t<e;){const e=n[t++];o.push(e);for(let s=t+4*e;t<s;t+=4)o.push(n[t]),r.push(n[t+1]*i),r.push(n[t+2]*i),r.push(n[t+3])}e.bones=o,e.vertices=m.toFloatArray(r)}readAnimation(t,e,s){const i=this.scale,n=new Array;if(t.slots)for(const e in t.slots){const i=t.slots[e],r=s.findSlot(e);if(!r)throw new Error(`Slot not found: ${e}`);const o=r.index;for(const t in i){const e=i[t];if(!e)continue;const s=e.length;if("attachment"==t){const t=new Z(s,o);for(let i=0;i<s;i++){const s=e[i];t.setFrame(i,Je(s,"time",0),Je(s,"name",null))}n.push(t)}else if("rgba"==t){let t=new q(s,s<<2,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.color);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b,a.a);const o=e[s+1];if(!o){t.shrink(n);break}const l=Je(o,"time",0),c=h.fromString(o.color),u=i.curve;u&&(n=Ke(u,t,n,s,0,r,l,a.r,c.r,1),n=Ke(u,t,n,s,1,r,l,a.g,c.g,1),n=Ke(u,t,n,s,2,r,l,a.b,c.b,1),n=Ke(u,t,n,s,3,r,l,a.a,c.a,1)),r=l,a=c,i=o}n.push(t)}else if("rgb"==t){let t=new G(s,3*s,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.color);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b);const o=e[s+1];if(!o){t.shrink(n);break}const l=Je(o,"time",0),c=h.fromString(o.color),u=i.curve;u&&(n=Ke(u,t,n,s,0,r,l,a.r,c.r,1),n=Ke(u,t,n,s,1,r,l,a.g,c.g,1),n=Ke(u,t,n,s,2,r,l,a.b,c.b,1)),r=l,a=c,i=o}n.push(t)}else if("alpha"==t)n.push(He(e,new j(s,s,o),0,1));else if("rgba2"==t){let t=new $(s,7*s,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.light),l=h.fromString(i.dark);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b,a.a,l.r,l.g,l.b);const o=e[s+1];if(!o){t.shrink(n);break}const c=Je(o,"time",0),u=h.fromString(o.light),d=h.fromString(o.dark),f=i.curve;f&&(n=Ke(f,t,n,s,0,r,c,a.r,u.r,1),n=Ke(f,t,n,s,1,r,c,a.g,u.g,1),n=Ke(f,t,n,s,2,r,c,a.b,u.b,1),n=Ke(f,t,n,s,3,r,c,a.a,u.a,1),n=Ke(f,t,n,s,4,r,c,l.r,d.r,1),n=Ke(f,t,n,s,5,r,c,l.g,d.g,1),n=Ke(f,t,n,s,6,r,c,l.b,d.b,1)),r=c,a=u,l=d,i=o}n.push(t)}else if("rgb2"==t){let t=new H(s,6*s,o),i=e[0],r=Je(i,"time",0),a=h.fromString(i.light),l=h.fromString(i.dark);for(let s=0,n=0;;s++){t.setFrame(s,r,a.r,a.g,a.b,l.r,l.g,l.b);const o=e[s+1];if(!o){t.shrink(n);break}const c=Je(o,"time",0),u=h.fromString(o.light),d=h.fromString(o.dark),f=i.curve;f&&(n=Ke(f,t,n,s,0,r,c,a.r,u.r,1),n=Ke(f,t,n,s,1,r,c,a.g,u.g,1),n=Ke(f,t,n,s,2,r,c,a.b,u.b,1),n=Ke(f,t,n,s,3,r,c,l.r,d.r,1),n=Ke(f,t,n,s,4,r,c,l.g,d.g,1),n=Ke(f,t,n,s,5,r,c,l.b,d.b,1)),r=c,a=u,l=d,i=o}n.push(t)}}}if(t.bones)for(const e in t.bones){const r=t.bones[e],o=s.findBone(e);if(!o)throw new Error(`Bone not found: ${e}`);const a=o.index;for(const t in r){const e=r[t],s=e.length;if(0!=s)if("rotate"===t)n.push(He(e,new L(s,s,a),0,1));else if("translate"===t){const t=new O(s,s<<1,a);n.push(Ze(e,t,"x","y",0,i))}else if("translatex"===t){const t=new D(s,s,a);n.push(He(e,t,0,i))}else if("translatey"===t){const t=new B(s,s,a);n.push(He(e,t,0,i))}else if("scale"===t){const t=new V(s,s<<1,a);n.push(Ze(e,t,"x","y",1,1))}else if("scalex"===t){const t=new z(s,s,a);n.push(He(e,t,1,1))}else if("scaley"===t){const t=new N(s,s,a);n.push(He(e,t,1,1))}else if("shear"===t){const t=new _(s,s<<1,a);n.push(Ze(e,t,"x","y",0,1))}else if("shearx"===t){const t=new U(s,s,a);n.push(He(e,t,0,1))}else if("sheary"===t){const t=new W(s,s,a);n.push(He(e,t,0,1))}}}if(t.ik)for(const e in t.ik){let r=t.ik[e],o=r[0];if(!o)continue;const a=s.findIkConstraint(e);if(!a)throw new Error(`IK Constraint not found: ${e}`);let h=s.ikConstraints.indexOf(a),l=new st(r.length,r.length<<1,h),c=Je(o,"time",0),u=Je(o,"mix",1),d=Je(o,"softness",0)*i;for(let t=0,e=0;;t++){l.setFrame(t,c,u,d,Je(o,"bendPositive",!0)?1:-1,Je(o,"compress",!1),Je(o,"stretch",!1));const s=r[t+1];if(!s){l.shrink(e);break}const n=Je(s,"time",0),a=Je(s,"mix",1),h=Je(s,"softness",0)*i,f=o.curve;f&&(e=Ke(f,l,e,t,0,c,n,u,a,1),e=Ke(f,l,e,t,1,c,n,d,h,i)),c=n,u=a,d=h,o=s}n.push(l)}if(t.transform)for(const e in t.transform){let i=t.transform[e],r=i[0];if(!r)continue;const o=s.findTransformConstraint(e);if(!o)throw new Error(`Transform constraint not found: ${e}`);let a=s.transformConstraints.indexOf(o),h=new it(i.length,6*i.length,a),l=Je(r,"time",0),c=Je(r,"mixRotate",1),u=Je(r,"mixX",1),d=Je(r,"mixY",u),f=Je(r,"mixScaleX",1),p=Je(r,"mixScaleY",f),m=Je(r,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,u,d,f,p,m);const s=i[t+1];if(!s){h.shrink(e);break}const n=Je(s,"time",0),o=Je(s,"mixRotate",1),a=Je(s,"mixX",1),g=Je(s,"mixY",a),x=Je(s,"mixScaleX",1),w=Je(s,"mixScaleY",x),y=Je(s,"mixShearY",1),b=r.curve;b&&(e=Ke(b,h,e,t,0,l,n,c,o,1),e=Ke(b,h,e,t,1,l,n,u,a,1),e=Ke(b,h,e,t,2,l,n,d,g,1),e=Ke(b,h,e,t,3,l,n,f,x,1),e=Ke(b,h,e,t,4,l,n,p,w,1),e=Ke(b,h,e,t,5,l,n,m,y,1)),l=n,c=o,u=a,d=g,f=x,p=w,f=x,r=s}n.push(h)}if(t.path)for(const e in t.path){const r=t.path[e],o=s.findPathConstraint(e);if(!o)throw new Error(`Path constraint not found: ${e}`);const a=s.pathConstraints.indexOf(o);for(const t in r){let e=r[t],s=e[0];if(!s)continue;const h=e.length;if("position"===t){const t=new nt(h,h,a);n.push(He(e,t,0,0==o.positionMode?i:1))}else if("spacing"===t){const t=new rt(h,h,a);n.push(He(e,t,0,0==o.spacingMode||1==o.spacingMode?i:1))}else if("mix"===t){let t=new ot(h,3*h,a),i=Je(s,"time",0),r=Je(s,"mixRotate",1),o=Je(s,"mixX",1),l=Je(s,"mixY",o);for(let n=0,a=0;;n++){t.setFrame(n,i,r,o,l);const h=e[n+1];if(!h){t.shrink(a);break}const c=Je(h,"time",0),u=Je(h,"mixRotate",1),d=Je(h,"mixX",1),f=Je(h,"mixY",d),p=s.curve;p&&(a=Ke(p,t,a,n,0,i,c,r,u,1),a=Ke(p,t,a,n,1,i,c,o,d,1),a=Ke(p,t,a,n,2,i,c,l,f,1)),i=c,r=u,o=d,l=f,s=h}n.push(t)}}}if(t.attachments)for(const e in t.attachments){const r=t.attachments[e],o=s.findSkin(e);if(!o)throw new Error(`Skin not found: ${e}`);for(const t in r){const e=r[t],a=s.findSlot(t);if(!a)throw new Error(`Slot not found: ${t}`);const h=a.index;for(const t in e){const s=e[t],r=o.getAttachment(h,t);for(const t in s){let e=s[t],o=e[0];if(o)if("deform"==t){let t=r.bones,s=r.vertices,a=t?s.length/3*2:s.length,l=new K(e.length,e.length,h,r),c=Je(o,"time",0);for(let n=0,r=0;;n++){let h,u=Je(o,"vertices",null);if(u){h=m.newFloatArray(a);const e=Je(o,"offset",0);if(m.arrayCopy(u,0,h,e,u.length),1!=i)for(let t=e,s=t+u.length;t<s;t++)h[t]*=i;if(!t)for(let t=0;t<a;t++)h[t]+=s[t]}else h=t?m.newFloatArray(a):s;l.setFrame(n,c,h);const d=e[n+1];if(!d){l.shrink(r);break}const f=Je(d,"time",0),p=o.curve;p&&(r=Ke(p,l,r,n,0,c,f,0,1,1)),c=f,o=d}n.push(l)}else if("sequence"==t){let t=new ht(e.length,h,r),s=0;for(let i=0;i<e.length;i++){const n=Je(o,"delay",s),r=Je(o,"time",0),a=E[Je(o,"mode","hold")],h=Je(o,"index",0);t.setFrame(i,r,a,h,n),s=n,o=e[i+1]}n.push(t)}}}}}if(t.drawOrder){let e=new et(t.drawOrder.length),i=s.slots.length,r=0;for(let n=0;n<t.drawOrder.length;n++,r++){let o=t.drawOrder[n],a=null,h=Je(o,"offsets",null);if(h){a=m.newArray(i,-1);let t=m.newArray(i-h.length,0),e=0,n=0;for(let i=0;i<h.length;i++){const r=h[i],o=s.findSlot(r.slot);if(!o)throw new Error(`Slot not found: ${o}`);const l=o.index;for(;e!=l;)t[n++]=e++;a[e+r.offset]=e++}for(;e<i;)t[n++]=e++;for(let e=i-1;e>=0;e--)-1==a[e]&&(a[e]=t[--n])}e.setFrame(r,Je(o,"time",0),a)}n.push(e)}if(t.events){let e=new Q(t.events.length),i=0;for(let n=0;n<t.events.length;n++,i++){const r=t.events[n],o=s.findEvent(r.name);if(!o)throw new Error(`Event not found: ${r.name}`);const a=new Gt(m.toSinglePrecision(Je(r,"time",0)),o);a.intValue=Je(r,"int",o.intValue),a.floatValue=Je(r,"float",o.floatValue),a.stringValue=Je(r,"string",o.stringValue),a.data.audioPath&&(a.volume=Je(r,"volume",1),a.balance=Je(r,"balance",0)),e.setFrame(i,a)}n.push(e)}let r=0;for(let t=0,e=n.length;t<e;t++)r=Math.max(r,n[t].getDuration());s.animations.push(new T(e,n,r))}},$e=class{constructor(t,e,s,i,n){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=n}};function He(t,e,s,i){let n=t[0],r=Je(n,"time",0),o=Je(n,"value",s)*i,a=0;for(let h=0;;h++){e.setFrame(h,r,o);const l=t[h+1];if(!l)return e.shrink(a),e;const c=Je(l,"time",0),u=Je(l,"value",s)*i;n.curve&&(a=Ke(n.curve,e,a,h,0,r,c,o,u,i)),r=c,o=u,n=l}}function Ze(t,e,s,i,n,r){let o=t[0],a=Je(o,"time",0),h=Je(o,s,n)*r,l=Je(o,i,n)*r,c=0;for(let u=0;;u++){e.setFrame(u,a,h,l);const d=t[u+1];if(!d)return e.shrink(c),e;const f=Je(d,"time",0),p=Je(d,s,n)*r,m=Je(d,i,n)*r,g=o.curve;g&&(c=Ke(g,e,c,u,0,a,f,h,p,r),c=Ke(g,e,c,u,1,a,f,l,m,r)),a=f,h=p,l=m,o=d}}function Ke(t,e,s,i,n,r,o,a,h,l){if("stepped"==t)return e.setStepped(i),s;const c=n<<2,u=t[c],d=t[c+1]*l,f=t[c+2],p=t[c+3]*l;return e.setBezier(s,i,n,r,a,u,d,f,p,o,h),s+1}function Je(t,e,s){return void 0!==t[e]?t[e]:s}void 0===Math.fround&&(Math.fround=(be=new Float32Array(1),function(t){return be[0]=t,be[0]}));var Qe=class{constructor(t,e={alpha:"true"}){if(this.restorables=new Array,t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{const s=t;this.gl=s.getContext("webgl2",e)||s.getContext("webgl",e),this.canvas=s,s.addEventListener("webglcontextlost",(t=>{t&&t.preventDefault()})),s.addEventListener("webglcontextrestored",(t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()}))}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){const e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}},ts=class{static getDestGLBlendMode(t){switch(t){case 0:case 2:case 3:return 771;case 1:return 1;default:throw new Error(`Unknown blend mode: ${t}`)}}static getSourceColorGLBlendMode(t,e=!1){switch(t){case 0:case 1:return e?1:770;case 2:return 774;case 3:return 1;default:throw new Error(`Unknown blend mode: ${t}`)}}static getSourceAlphaGLBlendMode(t){switch(t){case 0:case 1:return 1;case 2:return 771;case 3:return 769;default:throw new Error(`Unknown blend mode: ${t}`)}}},es=class extends It{constructor(t,e,s=!1){super(e),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.context=t instanceof Qe?t:new Qe(t),this.useMipMaps=s,this.restore(),this.context.addRestorable(this)}setFilters(t,e){const s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,es.validateMagFilter(e)),this.useMipMaps=es.usesMipMaps(t),this.useMipMaps&&s.generateMipmap(s.TEXTURE_2D)}static validateMagFilter(t){switch(t){case 9987:case 9987:case 9985:case 9986:case 9984:return 9729;default:return t}}static usesMipMaps(t){switch(t){case 9987:case 9987:case 9985:case 9986:case 9984:return!0;default:return!1}}setWraps(t,e){const s=this.context.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,e)}update(t){const e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),es.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){const e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){const t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}},ss=es;ss.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;var is=class extends Wt{constructor(t,e="",s=new qt){super((e=>new ss(t,e)),e,s)}},ns=class{constructor(t=0,e=0,s=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=s}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,s){return this.x=t,this.y=e,this.z=s,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){const e=t.values;return this.set(this.x*e[rs]+this.y*e[os]+this.z*e[as]+e[hs],this.x*e[ls]+this.y*e[cs]+this.z*e[us]+e[ds],this.x*e[fs]+this.y*e[ps]+this.z*e[ms]+e[gs])}project(t){const e=t.values,s=1/(this.x*e[xs]+this.y*e[ws]+this.z*e[ys]+e[bs]);return this.set((this.x*e[rs]+this.y*e[os]+this.z*e[as]+e[hs])*s,(this.x*e[ls]+this.y*e[cs]+this.z*e[us]+e[ds])*s,(this.x*e[fs]+this.y*e[ps]+this.z*e[ms]+e[gs])*s)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){const e=t.x-this.x,s=t.y-this.y,i=t.z-this.z;return Math.sqrt(e*e+s*s+i*i)}},rs=0,os=4,as=8,hs=12,ls=1,cs=5,us=9,ds=13,fs=2,ps=6,ms=10,gs=14,xs=3,ws=7,ys=11,bs=15,vs=class{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);const t=this.values;t[rs]=1,t[cs]=1,t[ms]=1,t[bs]=1}set(t){return this.values.set(t),this}transpose(){const t=this.temp,e=this.values;return t[rs]=e[rs],t[os]=e[ls],t[as]=e[fs],t[hs]=e[xs],t[ls]=e[os],t[cs]=e[cs],t[us]=e[ps],t[ds]=e[ws],t[fs]=e[as],t[ps]=e[us],t[ms]=e[ms],t[gs]=e[ys],t[xs]=e[hs],t[ws]=e[ds],t[ys]=e[gs],t[bs]=e[bs],this.set(t)}identity(){const t=this.values;return t[rs]=1,t[os]=0,t[as]=0,t[hs]=0,t[ls]=0,t[cs]=1,t[us]=0,t[ds]=0,t[fs]=0,t[ps]=0,t[ms]=1,t[gs]=0,t[xs]=0,t[ws]=0,t[ys]=0,t[bs]=1,this}invert(){const t=this.values,e=this.temp,s=t[xs]*t[ps]*t[us]*t[hs]-t[fs]*t[ws]*t[us]*t[hs]-t[xs]*t[cs]*t[ms]*t[hs]+t[ls]*t[ws]*t[ms]*t[hs]+t[fs]*t[cs]*t[ys]*t[hs]-t[ls]*t[ps]*t[ys]*t[hs]-t[xs]*t[ps]*t[as]*t[ds]+t[fs]*t[ws]*t[as]*t[ds]+t[xs]*t[os]*t[ms]*t[ds]-t[rs]*t[ws]*t[ms]*t[ds]-t[fs]*t[os]*t[ys]*t[ds]+t[rs]*t[ps]*t[ys]*t[ds]+t[xs]*t[cs]*t[as]*t[gs]-t[ls]*t[ws]*t[as]*t[gs]-t[xs]*t[os]*t[us]*t[gs]+t[rs]*t[ws]*t[us]*t[gs]+t[ls]*t[os]*t[ys]*t[gs]-t[rs]*t[cs]*t[ys]*t[gs]-t[fs]*t[cs]*t[as]*t[bs]+t[ls]*t[ps]*t[as]*t[bs]+t[fs]*t[os]*t[us]*t[bs]-t[rs]*t[ps]*t[us]*t[bs]-t[ls]*t[os]*t[ms]*t[bs]+t[rs]*t[cs]*t[ms]*t[bs];if(0==s)throw new Error("non-invertible matrix");const i=1/s;return e[rs]=t[us]*t[gs]*t[ws]-t[ds]*t[ms]*t[ws]+t[ds]*t[ps]*t[ys]-t[cs]*t[gs]*t[ys]-t[us]*t[ps]*t[bs]+t[cs]*t[ms]*t[bs],e[os]=t[hs]*t[ms]*t[ws]-t[as]*t[gs]*t[ws]-t[hs]*t[ps]*t[ys]+t[os]*t[gs]*t[ys]+t[as]*t[ps]*t[bs]-t[os]*t[ms]*t[bs],e[as]=t[as]*t[ds]*t[ws]-t[hs]*t[us]*t[ws]+t[hs]*t[cs]*t[ys]-t[os]*t[ds]*t[ys]-t[as]*t[cs]*t[bs]+t[os]*t[us]*t[bs],e[hs]=t[hs]*t[us]*t[ps]-t[as]*t[ds]*t[ps]-t[hs]*t[cs]*t[ms]+t[os]*t[ds]*t[ms]+t[as]*t[cs]*t[gs]-t[os]*t[us]*t[gs],e[ls]=t[ds]*t[ms]*t[xs]-t[us]*t[gs]*t[xs]-t[ds]*t[fs]*t[ys]+t[ls]*t[gs]*t[ys]+t[us]*t[fs]*t[bs]-t[ls]*t[ms]*t[bs],e[cs]=t[as]*t[gs]*t[xs]-t[hs]*t[ms]*t[xs]+t[hs]*t[fs]*t[ys]-t[rs]*t[gs]*t[ys]-t[as]*t[fs]*t[bs]+t[rs]*t[ms]*t[bs],e[us]=t[hs]*t[us]*t[xs]-t[as]*t[ds]*t[xs]-t[hs]*t[ls]*t[ys]+t[rs]*t[ds]*t[ys]+t[as]*t[ls]*t[bs]-t[rs]*t[us]*t[bs],e[ds]=t[as]*t[ds]*t[fs]-t[hs]*t[us]*t[fs]+t[hs]*t[ls]*t[ms]-t[rs]*t[ds]*t[ms]-t[as]*t[ls]*t[gs]+t[rs]*t[us]*t[gs],e[fs]=t[cs]*t[gs]*t[xs]-t[ds]*t[ps]*t[xs]+t[ds]*t[fs]*t[ws]-t[ls]*t[gs]*t[ws]-t[cs]*t[fs]*t[bs]+t[ls]*t[ps]*t[bs],e[ps]=t[hs]*t[ps]*t[xs]-t[os]*t[gs]*t[xs]-t[hs]*t[fs]*t[ws]+t[rs]*t[gs]*t[ws]+t[os]*t[fs]*t[bs]-t[rs]*t[ps]*t[bs],e[ms]=t[os]*t[ds]*t[xs]-t[hs]*t[cs]*t[xs]+t[hs]*t[ls]*t[ws]-t[rs]*t[ds]*t[ws]-t[os]*t[ls]*t[bs]+t[rs]*t[cs]*t[bs],e[gs]=t[hs]*t[cs]*t[fs]-t[os]*t[ds]*t[fs]-t[hs]*t[ls]*t[ps]+t[rs]*t[ds]*t[ps]+t[os]*t[ls]*t[gs]-t[rs]*t[cs]*t[gs],e[xs]=t[us]*t[ps]*t[xs]-t[cs]*t[ms]*t[xs]-t[us]*t[fs]*t[ws]+t[ls]*t[ms]*t[ws]+t[cs]*t[fs]*t[ys]-t[ls]*t[ps]*t[ys],e[ws]=t[os]*t[ms]*t[xs]-t[as]*t[ps]*t[xs]+t[as]*t[fs]*t[ws]-t[rs]*t[ms]*t[ws]-t[os]*t[fs]*t[ys]+t[rs]*t[ps]*t[ys],e[ys]=t[as]*t[cs]*t[xs]-t[os]*t[us]*t[xs]-t[as]*t[ls]*t[ws]+t[rs]*t[us]*t[ws]+t[os]*t[ls]*t[ys]-t[rs]*t[cs]*t[ys],e[bs]=t[os]*t[us]*t[fs]-t[as]*t[cs]*t[fs]+t[as]*t[ls]*t[ps]-t[rs]*t[us]*t[ps]-t[os]*t[ls]*t[ms]+t[rs]*t[cs]*t[ms],t[rs]=e[rs]*i,t[os]=e[os]*i,t[as]=e[as]*i,t[hs]=e[hs]*i,t[ls]=e[ls]*i,t[cs]=e[cs]*i,t[us]=e[us]*i,t[ds]=e[ds]*i,t[fs]=e[fs]*i,t[ps]=e[ps]*i,t[ms]=e[ms]*i,t[gs]=e[gs]*i,t[xs]=e[xs]*i,t[ws]=e[ws]*i,t[ys]=e[ys]*i,t[bs]=e[bs]*i,this}determinant(){const t=this.values;return t[xs]*t[ps]*t[us]*t[hs]-t[fs]*t[ws]*t[us]*t[hs]-t[xs]*t[cs]*t[ms]*t[hs]+t[ls]*t[ws]*t[ms]*t[hs]+t[fs]*t[cs]*t[ys]*t[hs]-t[ls]*t[ps]*t[ys]*t[hs]-t[xs]*t[ps]*t[as]*t[ds]+t[fs]*t[ws]*t[as]*t[ds]+t[xs]*t[os]*t[ms]*t[ds]-t[rs]*t[ws]*t[ms]*t[ds]-t[fs]*t[os]*t[ys]*t[ds]+t[rs]*t[ps]*t[ys]*t[ds]+t[xs]*t[cs]*t[as]*t[gs]-t[ls]*t[ws]*t[as]*t[gs]-t[xs]*t[os]*t[us]*t[gs]+t[rs]*t[ws]*t[us]*t[gs]+t[ls]*t[os]*t[ys]*t[gs]-t[rs]*t[cs]*t[ys]*t[gs]-t[fs]*t[cs]*t[as]*t[bs]+t[ls]*t[ps]*t[as]*t[bs]+t[fs]*t[os]*t[us]*t[bs]-t[rs]*t[ps]*t[us]*t[bs]-t[ls]*t[os]*t[ms]*t[bs]+t[rs]*t[cs]*t[ms]*t[bs]}translate(t,e,s){const i=this.values;return i[hs]+=t,i[ds]+=e,i[gs]+=s,this}copy(){return(new vs).set(this.values)}projection(t,e,s,i){this.identity();const n=1/Math.tan(s*(Math.PI/180)/2),r=(e+t)/(t-e),o=2*e*t/(t-e),a=this.values;return a[rs]=n/i,a[ls]=0,a[fs]=0,a[xs]=0,a[os]=0,a[cs]=n,a[ps]=0,a[ws]=0,a[as]=0,a[us]=0,a[ms]=r,a[ys]=-1,a[hs]=0,a[ds]=0,a[gs]=o,a[bs]=0,this}ortho2d(t,e,s,i){return this.ortho(t,t+s,e,e+i,0,1)}ortho(t,e,s,i,n,r){this.identity();const o=2/(e-t),a=2/(i-s),h=-2/(r-n),l=-(e+t)/(e-t),c=-(i+s)/(i-s),u=-(r+n)/(r-n),d=this.values;return d[rs]=o,d[ls]=0,d[fs]=0,d[xs]=0,d[os]=0,d[cs]=a,d[ps]=0,d[ws]=0,d[as]=0,d[us]=0,d[ms]=h,d[ys]=0,d[hs]=l,d[ds]=c,d[gs]=u,d[bs]=1,this}multiply(t){const e=this.temp,s=this.values,i=t.values;return e[rs]=s[rs]*i[rs]+s[os]*i[ls]+s[as]*i[fs]+s[hs]*i[xs],e[os]=s[rs]*i[os]+s[os]*i[cs]+s[as]*i[ps]+s[hs]*i[ws],e[as]=s[rs]*i[as]+s[os]*i[us]+s[as]*i[ms]+s[hs]*i[ys],e[hs]=s[rs]*i[hs]+s[os]*i[ds]+s[as]*i[gs]+s[hs]*i[bs],e[ls]=s[ls]*i[rs]+s[cs]*i[ls]+s[us]*i[fs]+s[ds]*i[xs],e[cs]=s[ls]*i[os]+s[cs]*i[cs]+s[us]*i[ps]+s[ds]*i[ws],e[us]=s[ls]*i[as]+s[cs]*i[us]+s[us]*i[ms]+s[ds]*i[ys],e[ds]=s[ls]*i[hs]+s[cs]*i[ds]+s[us]*i[gs]+s[ds]*i[bs],e[fs]=s[fs]*i[rs]+s[ps]*i[ls]+s[ms]*i[fs]+s[gs]*i[xs],e[ps]=s[fs]*i[os]+s[ps]*i[cs]+s[ms]*i[ps]+s[gs]*i[ws],e[ms]=s[fs]*i[as]+s[ps]*i[us]+s[ms]*i[ms]+s[gs]*i[ys],e[gs]=s[fs]*i[hs]+s[ps]*i[ds]+s[ms]*i[gs]+s[gs]*i[bs],e[xs]=s[xs]*i[rs]+s[ws]*i[ls]+s[ys]*i[fs]+s[bs]*i[xs],e[ws]=s[xs]*i[os]+s[ws]*i[cs]+s[ys]*i[ps]+s[bs]*i[ws],e[ys]=s[xs]*i[as]+s[ws]*i[us]+s[ys]*i[ms]+s[bs]*i[ys],e[bs]=s[xs]*i[hs]+s[ws]*i[ds]+s[ys]*i[gs]+s[bs]*i[bs],this.set(this.temp)}multiplyLeft(t){const e=this.temp,s=this.values,i=t.values;return e[rs]=i[rs]*s[rs]+i[os]*s[ls]+i[as]*s[fs]+i[hs]*s[xs],e[os]=i[rs]*s[os]+i[os]*s[cs]+i[as]*s[ps]+i[hs]*s[ws],e[as]=i[rs]*s[as]+i[os]*s[us]+i[as]*s[ms]+i[hs]*s[ys],e[hs]=i[rs]*s[hs]+i[os]*s[ds]+i[as]*s[gs]+i[hs]*s[bs],e[ls]=i[ls]*s[rs]+i[cs]*s[ls]+i[us]*s[fs]+i[ds]*s[xs],e[cs]=i[ls]*s[os]+i[cs]*s[cs]+i[us]*s[ps]+i[ds]*s[ws],e[us]=i[ls]*s[as]+i[cs]*s[us]+i[us]*s[ms]+i[ds]*s[ys],e[ds]=i[ls]*s[hs]+i[cs]*s[ds]+i[us]*s[gs]+i[ds]*s[bs],e[fs]=i[fs]*s[rs]+i[ps]*s[ls]+i[ms]*s[fs]+i[gs]*s[xs],e[ps]=i[fs]*s[os]+i[ps]*s[cs]+i[ms]*s[ps]+i[gs]*s[ws],e[ms]=i[fs]*s[as]+i[ps]*s[us]+i[ms]*s[ms]+i[gs]*s[ys],e[gs]=i[fs]*s[hs]+i[ps]*s[ds]+i[ms]*s[gs]+i[gs]*s[bs],e[xs]=i[xs]*s[rs]+i[ws]*s[ls]+i[ys]*s[fs]+i[bs]*s[xs],e[ws]=i[xs]*s[os]+i[ws]*s[cs]+i[ys]*s[ps]+i[bs]*s[ws],e[ys]=i[xs]*s[as]+i[ws]*s[us]+i[ys]*s[ms]+i[bs]*s[ys],e[bs]=i[xs]*s[hs]+i[ws]*s[ds]+i[ys]*s[gs]+i[bs]*s[bs],this.set(this.temp)}lookAt(t,e,s){const i=vs.xAxis,n=vs.yAxis,r=vs.zAxis;r.setFrom(e).normalize(),i.setFrom(e).normalize(),i.cross(s).normalize(),n.setFrom(i).cross(r).normalize(),this.identity();const o=this.values;return o[rs]=i.x,o[os]=i.y,o[as]=i.z,o[ls]=n.x,o[cs]=n.y,o[us]=n.z,o[fs]=-r.x,o[ps]=-r.y,o[ms]=-r.z,vs.tmpMatrix.identity(),vs.tmpMatrix.values[hs]=-t.x,vs.tmpMatrix.values[ds]=-t.y,vs.tmpMatrix.values[gs]=-t.z,this.multiply(vs.tmpMatrix),this}},As=vs;As.xAxis=new ns,As.yAxis=new ns,As.zAxis=new ns,As.tmpMatrix=new vs;var Ss=class{constructor(t,e){this.position=new ns(0,0,0),this.direction=new ns(0,0,-1),this.up=new ns(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new As,this.inverseProjectionView=new As,this.projection=new As,this.view=new As,this.viewportWidth=t,this.viewportHeight=e,this.update()}update(){const t=this.projection,e=this.view,s=this.projectionView,i=this.inverseProjectionView,n=this.zoom,r=this.viewportWidth,o=this.viewportHeight;t.ortho(n*(-r/2),n*(r/2),n*(-o/2),n*(o/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),s.set(t.values),s.multiply(e),i.set(s.values).invert()}screenToWorld(t,e,s){const i=t.x,n=s-t.y-1;return t.x=2*i/e-1,t.y=2*n/s-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,s){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=s*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}},Ms=class{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=t,this.setupCallbacks(t)}setupCallbacks(t){const e=e=>{if(e instanceof MouseEvent){const s=t.getBoundingClientRect();this.mouseX=e.clientX-s.left,this.mouseY=e.clientY-s.top,this.listeners.map((t=>{this.buttonDown?t.dragged&&t.dragged(this.mouseX,this.mouseY):t.moved&&t.moved(this.mouseX,this.mouseY)}))}},s=i=>{if(i instanceof MouseEvent){const n=t.getBoundingClientRect();this.mouseX=i.clientX-n.left,this.mouseY=i.clientY-n.top,this.buttonDown=!1,this.listeners.map((t=>{t.up&&t.up(this.mouseX,this.mouseY)})),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s)}};t.addEventListener("mousedown",(i=>{if(i instanceof MouseEvent){const n=t.getBoundingClientRect();this.mouseX=i.clientX-n.left,this.mouseY=i.clientY-n.top,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.mouseX,this.mouseY)})),document.addEventListener("mousemove",e),document.addEventListener("mouseup",s)}}),!0),t.addEventListener("mousemove",e,!0),t.addEventListener("mouseup",s,!0),t.addEventListener("wheel",(t=>{t.preventDefault();let e=t.deltaY;t.deltaMode==WheelEvent.DOM_DELTA_LINE&&(e*=8),t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e*=24),this.listeners.map((e=>{e.wheel&&e.wheel(t.deltaY)}))}),!0),t.addEventListener("touchstart",(e=>{if(!this.touch0||!this.touch1){const s=e.changedTouches.item(0);if(!s)return;const i=t.getBoundingClientRect(),n=s.clientX-i.left,r=s.clientY-i.top,o=new Is(s.identifier,n,r);if(this.mouseX=n,this.mouseY=r,this.buttonDown=!0,this.touch0){if(!this.touch1){this.touch1=o;const t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(t*t+e*e),this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,this.initialPinchDistance)}))}}else this.touch0=o,this.listeners.map((t=>{t.down&&t.down(o.x,o.y)}))}e.preventDefault()}),!1),t.addEventListener("touchmove",(e=>{if(this.touch0){const s=e.changedTouches,i=t.getBoundingClientRect();for(let t=0;t<s.length;t++){const e=s[t],n=e.clientX-i.left,r=e.clientY-i.top;this.touch0.identifier===e.identifier&&(this.touch0.x=this.mouseX=n,this.touch0.y=this.mouseY=r,this.listeners.map((t=>{t.dragged&&t.dragged(n,r)}))),this.touch1&&this.touch1.identifier===e.identifier&&(this.touch1.x=this.mouseX=n,this.touch1.y=this.mouseY=r)}if(this.touch0&&this.touch1){const t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x,s=Math.sqrt(t*t+e*e);this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,s)}))}}e.preventDefault()}),!1);const i=e=>{if(this.touch0){const s=e.changedTouches,i=t.getBoundingClientRect();for(let t=0;t<s.length;t++){const e=s[t],n=e.clientX-i.left,r=e.clientY-i.top;if(this.touch0.identifier===e.identifier){if(this.touch0=null,this.mouseX=n,this.mouseY=r,this.listeners.map((t=>{t.up&&t.up(n,r)})),!this.touch1){this.buttonDown=!1;break}this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.touch0.x,this.touch0.y)}))}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}e.preventDefault()};t.addEventListener("touchend",i,!1),t.addEventListener("touchcancel",i)}addListener(t){this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}},Is=class{constructor(t,e,s){this.identifier=t,this.x=e,this.y=s}},Es=class{constructor(t,e){this.canvas=t,this.camera=e;let s=0,i=0,n=0,r=0,o=0,a=0,h=0;new Ms(t).addListener({down:(t,l)=>{s=e.position.x,i=e.position.y,n=o=t,r=a=l,h=e.zoom},dragged:(h,l)=>{const c=h-n,u=l-r,d=e.screenToWorld(new ns(0,0),t.clientWidth,t.clientHeight),f=e.screenToWorld(new ns(c,u),t.clientWidth,t.clientHeight).sub(d);e.position.set(s-f.x,i-f.y,0),e.update(),o=h,a=l},wheel:s=>{const i=s/200*e.zoom,n=e.zoom+i;if(n>0){let i=0,r=0;if(s<0)i=o,r=a;else{const e=new ns(t.clientWidth/2+15,t.clientHeight/2),s=o-e.x,n=t.clientHeight-1-a-e.y;i=e.x-s,r=t.clientHeight-1-e.y+n}const h=e.screenToWorld(new ns(i,r),t.clientWidth,t.clientHeight);e.zoom=n,e.update();const l=e.screenToWorld(new ns(i,r),t.clientWidth,t.clientHeight);e.position.add(h.sub(l)),e.update()}},zoom:(t,s)=>{const i=t/s;e.zoom=h*i},up:(t,e)=>{o=t,a=e},moved:(t,e)=>{o=t,a=e}})}},ks=class{constructor(t,e,s){this.vertexShader=e,this.fragmentShader=s,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=s,this.context=t instanceof Qe?t:new Qe(t),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){const t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){const s=this.context.gl,i=s.createShader(t);if(!i)throw new Error("Couldn't create shader.");if(s.shaderSource(i,e),s.compileShader(i),!s.getShaderParameter(i,s.COMPILE_STATUS)){const t=`Couldn't compile shader: ${s.getShaderInfoLog(i)}`;if(s.deleteShader(i),!s.isContextLost())throw new Error(t)}return i}compileProgram(t,e){const s=this.context.gl,i=s.createProgram();if(!i)throw new Error("Couldn't compile program.");if(s.attachShader(i,t),s.attachShader(i,e),s.linkProgram(i),!s.getProgramParameter(i,s.LINK_STATUS)){const t=`Couldn't compile shader program: ${s.getProgramInfoLog(i)}`;if(s.deleteProgram(i),!s.isContextLost())throw new Error(t)}return i}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,s){this.context.gl.uniform2f(this.getUniformLocation(t),e,s)}setUniform3f(t,e,s,i){this.context.gl.uniform3f(this.getUniformLocation(t),e,s,i)}setUniform4f(t,e,s,i,n){this.context.gl.uniform4f(this.getUniformLocation(t),e,s,i,n)}setUniform2x2f(t,e){const s=this.context.gl;this.tmp2x2.set(e),s.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){const s=this.context.gl;this.tmp3x3.set(e),s.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){const s=this.context.gl;this.tmp4x4.set(e),s.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){const e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");const s=e.getUniformLocation(this.program,t);if(!s&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return s}getAttributeLocation(t){const e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");const s=e.getAttribLocation(this.program,t);if(-1==s&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return s}dispose(){this.context.removeRestorable(this);const t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){const e=`\n\t\t\t\tattribute vec4 ${ks.POSITION};\n\t\t\t\tattribute vec4 ${ks.COLOR};\n\t\t\t\tattribute vec2 ${ks.TEXCOORDS};\n\t\t\t\tuniform mat4 ${ks.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${ks.COLOR};\n\t\t\t\t\tv_texCoords = ${ks.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${ks.MVP_MATRIX} * ${ks.POSITION};\n\t\t\t\t}\n\t\t\t`;return new ks(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")}static newTwoColoredTextured(t){const e=`\n\t\t\t\tattribute vec4 ${ks.POSITION};\n\t\t\t\tattribute vec4 ${ks.COLOR};\n\t\t\t\tattribute vec4 ${ks.COLOR2};\n\t\t\t\tattribute vec2 ${ks.TEXCOORDS};\n\t\t\t\tuniform mat4 ${ks.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ${ks.COLOR};\n\t\t\t\t\tv_dark = ${ks.COLOR2};\n\t\t\t\t\tv_texCoords = ${ks.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${ks.MVP_MATRIX} * ${ks.POSITION};\n\t\t\t\t}\n\t\t\t`;return new ks(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")}static newColored(t){const e=`\n\t\t\t\tattribute vec4 ${ks.POSITION};\n\t\t\t\tattribute vec4 ${ks.COLOR};\n\t\t\t\tuniform mat4 ${ks.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${ks.COLOR};\n\t\t\t\t\tgl_Position = ${ks.MVP_MATRIX} * ${ks.POSITION};\n\t\t\t\t}\n\t\t\t`;return new ks(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")}},Ts=ks;Ts.MVP_MATRIX="u_projTrans",Ts.POSITION="a_position",Ts.COLOR="a_color",Ts.COLOR2="a_color2",Ts.TEXCOORDS="a_texCoords",Ts.SAMPLER="u_texture";var Cs=class{constructor(t,e,s,i){this.attributes=e,this.verticesBuffer=null,this.verticesLength=0,this.dirtyVertices=!1,this.indicesBuffer=null,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t instanceof Qe?t:new Qe(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(s*this.elementsPerVertex),this.indices=new Uint16Array(i),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(let e=0;e<this.attributes.length;e++)t+=this.attributes[e].numElements;return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error(`Mesh can't store more than ${this.maxVertices()} vertices`);this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error(`Mesh can't store more than ${this.maxIndices()} indices`);this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,s,i){const n=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?n.drawElements(e,i,n.UNSIGNED_SHORT,2*s):n.drawArrays(e,s,i),this.unbind(t)}bind(t){const e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let s=0;for(let i=0;i<this.attributes.length;i++){const n=this.attributes[i],r=t.getAttributeLocation(n.name);e.enableVertexAttribArray(r),e.vertexAttribPointer(r,n.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*s),s+=n.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){const e=this.context.gl;for(let s=0;s<this.attributes.length;s++){const i=this.attributes[s],n=t.getAttributeLocation(i.name);e.disableVertexAttribArray(n)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){const t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);const t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}},Rs=class{constructor(t,e,s){this.name=t,this.type=e,this.numElements=s}},Fs=class extends Rs{constructor(){super(Ts.POSITION,Os.Float,2)}},Ys=class extends Rs{constructor(){super(Ts.POSITION,Os.Float,3)}},Ps=class extends Rs{constructor(t=0){super(Ts.TEXCOORDS+(0==t?"":t),Os.Float,2)}},Xs=class extends Rs{constructor(){super(Ts.COLOR,Os.Float,4)}},Ls=class extends Rs{constructor(){super(Ts.COLOR2,Os.Float,4)}},Os=(t=>(t[t.Float=0]="Float",t))(Os||{}),Ds=class{constructor(t,e=!0,s=10920){if(this.drawCalls=0,this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.cullWasEnabled=!1,s>10920)throw new Error(`Can't have more than 10920 triangles per batch: ${s}`);this.context=t instanceof Qe?t:new Qe(t);const i=e?[new Fs,new Xs,new Ps,new Ls]:[new Fs,new Xs,new Ps];this.mesh=new Cs(t,i,s,3*s);const n=this.context.gl;this.srcColorBlend=n.SRC_ALPHA,this.srcAlphaBlend=n.ONE,this.dstBlend=n.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;const e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE)}setBlendMode(t,e,s){this.srcColorBlend==t&&this.srcAlphaBlend==e&&this.dstBlend==s||(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=s,!this.isDrawing)||(this.flush(),this.context.gl.blendFuncSeparate(t,s,e,s))}draw(t,e,s){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+s.length>this.mesh.getIndices().length)&&this.flush();const i=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);const n=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<s.length;t++,e++)n[t]=s[e]+i;this.indicesLength+=s.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,Ds.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;const t=this.context.gl;t.disable(t.BLEND),this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){const t=Ds.globalDrawCalls;return Ds.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}},Bs=Ds;Bs.globalDrawCalls=0;var Vs=class{constructor(t,e=10920){if(this.isDrawing=!1,this.shapeType=zs.Filled,this.color=new h(1,1,1,1),this.shader=null,this.vertexIndex=0,this.tmp=new w,e>10920)throw new Error(`Can't have more than 10920 triangles per batch: ${e}`);this.context=t instanceof Qe?t:new Qe(t),this.mesh=new Cs(t,[new Fs,new Xs],e,0);const s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;const e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,s){this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=s,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,s,e,s))}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,s,i){this.color.set(t,e,s,i)}point(t,e,s){this.check(zs.Point,1),s||(s=this.color),this.vertex(t,e,s)}line(t,e,s,i,n){this.check(zs.Line,2),this.mesh.getVertices(),this.vertexIndex,n||(n=this.color),this.vertex(t,e,n),this.vertex(s,i,n)}triangle(t,e,s,i,n,r,o,a,h,l){this.check(t?zs.Filled:zs.Line,3),this.mesh.getVertices(),this.vertexIndex,a||(a=this.color),h||(h=this.color),l||(l=this.color),t?(this.vertex(e,s,a),this.vertex(i,n,h),this.vertex(r,o,l)):(this.vertex(e,s,a),this.vertex(i,n,h),this.vertex(i,n,a),this.vertex(r,o,h),this.vertex(r,o,a),this.vertex(e,s,h))}quad(t,e,s,i,n,r,o,a,h,l,c,u,d){this.check(t?zs.Filled:zs.Line,3),this.mesh.getVertices(),this.vertexIndex,l||(l=this.color),c||(c=this.color),u||(u=this.color),d||(d=this.color),t?(this.vertex(e,s,l),this.vertex(i,n,c),this.vertex(r,o,u),this.vertex(r,o,u),this.vertex(a,h,d),this.vertex(e,s,l)):(this.vertex(e,s,l),this.vertex(i,n,c),this.vertex(i,n,c),this.vertex(r,o,u),this.vertex(r,o,u),this.vertex(a,h,d),this.vertex(a,h,d),this.vertex(e,s,l))}rect(t,e,s,i,n,r){this.quad(t,e,s,e+i,s,e+i,s+n,e,s+n,r,r,r,r)}rectLine(t,e,s,i,n,r,o){this.check(t?zs.Filled:zs.Line,8),o||(o=this.color);const a=this.tmp.set(n-s,e-i);a.normalize(),r*=.5;const h=a.x*r,l=a.y*r;t?(this.vertex(e+h,s+l,o),this.vertex(e-h,s-l,o),this.vertex(i+h,n+l,o),this.vertex(i-h,n-l,o),this.vertex(i+h,n+l,o),this.vertex(e-h,s-l,o)):(this.vertex(e+h,s+l,o),this.vertex(e-h,s-l,o),this.vertex(i+h,n+l,o),this.vertex(i-h,n-l,o),this.vertex(i+h,n+l,o),this.vertex(e+h,s+l,o),this.vertex(i-h,n-l,o),this.vertex(e-h,s-l,o))}x(t,e,s){this.line(t-s,e-s,t+s,e+s),this.line(t-s,e+s,t+s,e-s)}polygon(t,e,s,i){if(s<3)throw new Error("Polygon must contain at least 3 vertices");this.check(zs.Line,2*s),i||(i=this.color),this.mesh.getVertices(),this.vertexIndex,s<<=1;const n=t[e<<=1],r=t[e+1],o=e+s;for(let a=e,h=e+s-2;a<h;a+=2){let e=t[a],s=t[a+1],h=0,l=0;a+2>=o?(h=n,l=r):(h=t[a+2],l=t[a+3]),this.vertex(e,s,i),this.vertex(h,l,i)}}circle(t,e,s,i,n,r=0){if(0==r&&(r=Math.max(1,6*c.cbrt(i)|0)),r<=0)throw new Error("segments must be > 0.");n||(n=this.color);let o=2*c.PI/r,a=Math.cos(o),h=Math.sin(o),l=i,u=0;if(t){this.check(zs.Filled,3*r+3),r--;for(let t=0;t<r;t++){this.vertex(e,s,n),this.vertex(e+l,s+u,n);const t=l;l=a*l-h*u,u=h*t+a*u,this.vertex(e+l,s+u,n)}this.vertex(e,s,n),this.vertex(e+l,s+u,n)}else{this.check(zs.Line,2*r+2);for(let t=0;t<r;t++){this.vertex(e+l,s+u,n);const t=l;l=a*l-h*u,u=h*t+a*u,this.vertex(e+l,s+u,n)}this.vertex(e+l,s+u,n)}l=i,u=0,this.vertex(e+l,s+u,n)}curve(t,e,s,i,n,r,o,a,h,l){this.check(zs.Line,2*h+2),l||(l=this.color);let c=1/h,u=c*c,d=c*c*c,f=3*c,p=3*u,m=6*u,g=6*d,x=t-2*s+n,w=e-2*i+r,y=3*(s-n)-t+o,b=3*(i-r)-e+a,v=t,A=e,S=(s-t)*f+x*p+y*d,M=(i-e)*f+w*p+b*d,I=x*m+y*g,E=w*m+b*g,k=y*g,T=b*g;for(;h-- >0;)this.vertex(v,A,l),v+=S,A+=M,S+=I,M+=E,I+=k,E+=T,this.vertex(v,A,l);this.vertex(v,A,l),this.vertex(o,a,l)}vertex(t,e,s){let i=this.vertexIndex,n=this.mesh.getVertices();n[i++]=t,n[i++]=e,n[i++]=s.r,n[i++]=s.g,n[i++]=s.b,n[i++]=s.a,this.vertexIndex=i}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();const t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}},zs=(t=>(t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled",t))(zs||{}),Ns=class{constructor(t){this.boneLineColor=new h(1,0,0,1),this.boneOriginColor=new h(0,1,0,1),this.attachmentLineColor=new h(0,0,1,.5),this.triangleLineColor=new h(1,.64,0,.5),this.pathColor=(new h).setFromString("FF7F00"),this.clipColor=new h(.8,0,0,2),this.aabbColor=new h(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new We,this.temp=new Array,this.vertices=m.newFloatArray(2048),this.context=t instanceof Qe?t:new Qe(t)}draw(t,e,s){const i=e.x,n=e.y,r=this.context.gl,o=this.premultipliedAlpha?r.ONE:r.SRC_ALPHA;t.setBlendMode(o,r.ONE,r.ONE_MINUS_SRC_ALPHA);const a=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,i=a.length;e<i;e++){const i=a[e];if(s&&s.indexOf(i.data.name)>-1)continue;if(!i.parent)continue;const n=i.data.length*i.a+i.worldX,r=i.data.length*i.c+i.worldY;t.rectLine(!0,i.worldX,i.worldY,n,r,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(i,n,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);const s=e.slots;for(let e=0,i=s.length;e<i;e++){const i=s[e],n=i.getAttachment();if(n instanceof Bt){const e=n,s=this.vertices;e.computeWorldVertices(i,s,0,2),t.line(s[0],s[1],s[2],s[3]),t.line(s[2],s[3],s[4],s[5]),t.line(s[4],s[5],s[6],s[7]),t.line(s[6],s[7],s[0],s[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){const s=e.slots;for(let e=0,i=s.length;e<i;e++){const i=s[e];if(!i.bone.active)continue;const n=i.getAttachment();if(!(n instanceof Xt))continue;const r=n,o=this.vertices;r.computeWorldVertices(i,0,r.worldVerticesLength,o,0,2);let a=r.triangles,h=r.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,s=a.length;e<s;e+=3){const s=2*a[e],i=2*a[e+1],n=2*a[e+2];t.triangle(!1,o[s],o[s+1],o[i],o[i+1],o[n],o[n+1])}}if(this.drawMeshHull&&h>0){t.setColor(this.attachmentLineColor),h=2*(h>>1);let e=o[h-2],s=o[h-1];for(let i=0,n=h;i<n;i+=2){const n=o[i],r=o[i+1];t.line(n,r,e,s),e=n,s=r}}}}if(this.drawBoundingBoxes){const s=this.bounds;s.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,s.minX,s.minY,s.getWidth(),s.getHeight());const i=s.polygons,n=s.boundingBoxes;for(let e=0,s=i.length;e<s;e++){const s=i[e];t.setColor(n[e].color),t.polygon(s,0,s.length)}}if(this.drawPaths){const s=e.slots;for(let e=0,i=s.length;e<i;e++){const i=s[e];if(!i.bone.active)continue;const n=i.getAttachment();if(!(n instanceof Lt))continue;let r=n,o=r.worldVerticesLength,a=this.temp=m.setArraySize(this.temp,o,0);r.computeWorldVertices(i,0,o,a,0,2);let h=this.pathColor,l=a[2],c=a[3],u=0,d=0;if(r.closed){t.setColor(h);const e=a[0],s=a[1],i=a[o-2],n=a[o-1];u=a[o-4],d=a[o-3],t.curve(l,c,e,s,i,n,u,d,32),t.setColor(Ns.LIGHT_GRAY),t.line(l,c,e,s),t.line(u,d,i,n)}o-=4;for(let e=4;e<o;e+=6){const s=a[e],i=a[e+1],n=a[e+2],r=a[e+3];u=a[e+4],d=a[e+5],t.setColor(h),t.curve(l,c,s,i,n,r,u,d,32),t.setColor(Ns.LIGHT_GRAY),t.line(l,c,s,i),t.line(u,d,n,r),l=u,c=d}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,i=a.length;e<i;e++){const i=a[e];s&&s.indexOf(i.data.name)>-1||t.circle(!0,i.worldX,i.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){const s=e.slots;t.setColor(this.clipColor);for(let e=0,i=s.length;e<i;e++){const i=s[e];if(!i.bone.active)continue;const n=i.getAttachment();if(!(n instanceof Mt))continue;const r=n,o=r.worldVerticesLength,a=this.temp=m.setArraySize(this.temp,o,0);r.computeWorldVertices(i,0,o,a,0,2);for(let e=0,s=a.length;e<s;e+=2){const s=a[e],i=a[e+1],n=a[(e+2)%a.length],r=a[(e+3)%a.length];t.line(s,i,n,r)}}}}dispose(){}},_s=Ns;_s.LIGHT_GRAY=new h(192/255,192/255,192/255,1),_s.GREEN=new h(0,1,0,1);var Us=class{constructor(t,e=!0){this.premultipliedAlpha=!1,this.tempColor=new h,this.tempColor2=new h,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new class{constructor(t,e,s){this.vertices=t,this.numVertices=e,this.numFloats=s}}([],0,0),this.clipper=new Ge,this.temp=new w,this.temp2=new w,this.temp3=new h,this.temp4=new h,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=m.newFloatArray(1024*this.vertexSize)}draw(t,e,s=-1,i=-1,n=null){let r,o,a,h=this.clipper,l=this.premultipliedAlpha,c=this.twoColorTint,u=null,d=(this.temp,this.temp2,this.temp3,this.temp4,this.renderable),f=e.drawOrder,p=e.color,g=c?12:8,x=!1;-1==s&&(x=!0);for(let e=0,w=f.length;e<w;e++){const w=h.isClipping()?2:g,y=f[e];if(!y.bone.active){h.clipEndWithSlot(y);continue}if(s>=0&&s==y.data.index&&(x=!0),!x){h.clipEndWithSlot(y);continue}i>=0&&i==y.data.index&&(x=!1);let b,v=y.getAttachment();if(v instanceof Bt){const t=v;d.vertices=this.vertices,d.numVertices=4,d.numFloats=w<<2,t.computeWorldVertices(y,d.vertices,0,w),o=Us.QUAD_TRIANGLES,r=t.uvs,b=t.region.renderObject.page.texture,a=t.color}else{if(!(v instanceof Xt)){if(v instanceof Mt){const t=v;h.clipStart(y,t);continue}h.clipEndWithSlot(y);continue}{const t=v;d.vertices=this.vertices,d.numVertices=t.worldVerticesLength>>1,d.numFloats=d.numVertices*w,d.numFloats>d.vertices.length&&(d.vertices=this.vertices=m.newFloatArray(d.numFloats)),t.computeWorldVertices(y,0,t.worldVerticesLength,d.vertices,0,w),o=t.triangles,b=t.region.renderObject.page.texture,r=t.uvs,a=t.color}}if(b){const e=y.color,s=this.tempColor;s.r=p.r*e.r*a.r,s.g=p.g*e.g*a.g,s.b=p.b*e.b*a.b,s.a=p.a*e.a*a.a,l&&(s.r*=s.a,s.g*=s.a,s.b*=s.a);const i=this.tempColor2;y.darkColor?(l?(i.r=y.darkColor.r*s.a,i.g=y.darkColor.g*s.a,i.b=y.darkColor.b*s.a):i.setFromColor(y.darkColor),i.a=l?1:0):i.set(0,0,0,1);const f=y.data.blendMode;if(f!=u&&(u=f,t.setBlendMode(ts.getSourceColorGLBlendMode(u,l),ts.getSourceAlphaGLBlendMode(u),ts.getDestGLBlendMode(u))),h.isClipping()){h.clipTriangles(d.vertices,d.numFloats,o,o.length,r,s,i,c);const e=new Float32Array(h.clippedVertices),a=h.clippedTriangles;n&&n(d.vertices,d.numFloats,g),t.draw(b,e,a)}else{const e=d.vertices;if(c)for(let t=2,n=0,o=d.numFloats;t<o;t+=g,n+=2)e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]=s.a,e[t+4]=r[n],e[t+5]=r[n+1],e[t+6]=i.r,e[t+7]=i.g,e[t+8]=i.b,e[t+9]=i.a;else for(let t=2,i=0,n=d.numFloats;t<n;t+=g,i+=2)e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]=s.a,e[t+4]=r[i],e[t+5]=r[i+1];const a=d.vertices.subarray(0,d.numFloats);n&&n(d.vertices,d.numFloats,g),t.draw(b,a,o)}}h.clipEndWithSlot(y)}h.clipEnd()}},Ws=Us;Ws.QUAD_TRIANGLES=[0,1,2,2,3,0];var qs,Gs,js,$s=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Hs=[0,1,2,2,3,0],Zs=new h(1,1,1,1),Ks=class{constructor(t,e,s=!0){this.twoColorTint=!1,this.activeRenderer=null,this.canvas=t,this.context=e instanceof Qe?e:new Qe(e),this.twoColorTint=s,this.camera=new Ss(t.width,t.height),this.batcherShader=s?Ts.newTwoColoredTextured(this.context):Ts.newColoredTextured(this.context),this.batcher=new Bs(this.context,s),this.shapesShader=Ts.newColored(this.context),this.shapes=new Vs(this.context),this.skeletonRenderer=new Ws(this.context,s),this.skeletonDebugRenderer=new _s(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,s=-1,i=-1,n=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,s,i,n)}drawSkeletonDebug(t,e=!1,s){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,s)}drawTexture(t,e,s,i,n,r){this.enableRenderer(this.batcher),r||(r=Zs);let o=0;$s[o++]=e,$s[o++]=s,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=0,$s[o++]=1,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o++]=0),$s[o++]=e+i,$s[o++]=s,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=1,$s[o++]=1,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o++]=0),$s[o++]=e+i,$s[o++]=s+n,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=1,$s[o++]=0,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o++]=0),$s[o++]=e,$s[o++]=s+n,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=0,$s[o++]=0,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o]=0),this.batcher.draw(t,$s,Hs)}drawTextureUV(t,e,s,i,n,r,o,a,h,l){this.enableRenderer(this.batcher),l||(l=Zs);let c=0;$s[c++]=e,$s[c++]=s,$s[c++]=l.r,$s[c++]=l.g,$s[c++]=l.b,$s[c++]=l.a,$s[c++]=r,$s[c++]=o,this.twoColorTint&&($s[c++]=0,$s[c++]=0,$s[c++]=0,$s[c++]=0),$s[c++]=e+i,$s[c++]=s,$s[c++]=l.r,$s[c++]=l.g,$s[c++]=l.b,$s[c++]=l.a,$s[c++]=a,$s[c++]=o,this.twoColorTint&&($s[c++]=0,$s[c++]=0,$s[c++]=0,$s[c++]=0),$s[c++]=e+i,$s[c++]=s+n,$s[c++]=l.r,$s[c++]=l.g,$s[c++]=l.b,$s[c++]=l.a,$s[c++]=a,$s[c++]=h,this.twoColorTint&&($s[c++]=0,$s[c++]=0,$s[c++]=0,$s[c++]=0),$s[c++]=e,$s[c++]=s+n,$s[c++]=l.r,$s[c++]=l.g,$s[c++]=l.b,$s[c++]=l.a,$s[c++]=r,$s[c++]=h,this.twoColorTint&&($s[c++]=0,$s[c++]=0,$s[c++]=0,$s[c]=0),this.batcher.draw(t,$s,Hs)}drawTextureRotated(t,e,s,i,n,r,o,a,h){this.enableRenderer(this.batcher),h||(h=Zs);let l=e+r,u=s+o,d=-r,f=-o,p=i-r,m=n-o,g=d,x=f,w=d,y=m,b=p,v=m,A=p,S=f,M=0,I=0,E=0,k=0,T=0,C=0,R=0,F=0;if(0!=a){const t=c.cosDeg(a),e=c.sinDeg(a);M=t*g-e*x,I=e*g+t*x,R=t*w-e*y,F=e*w+t*y,T=t*b-e*v,C=e*b+t*v,E=T+(M-R),k=C+(I-F)}else M=g,I=x,R=w,F=y,T=b,C=v,E=A,k=S;M+=l,I+=u,E+=l,k+=u,T+=l,C+=u,R+=l,F+=u;let Y=0;$s[Y++]=M,$s[Y++]=I,$s[Y++]=h.r,$s[Y++]=h.g,$s[Y++]=h.b,$s[Y++]=h.a,$s[Y++]=0,$s[Y++]=1,this.twoColorTint&&($s[Y++]=0,$s[Y++]=0,$s[Y++]=0,$s[Y++]=0),$s[Y++]=E,$s[Y++]=k,$s[Y++]=h.r,$s[Y++]=h.g,$s[Y++]=h.b,$s[Y++]=h.a,$s[Y++]=1,$s[Y++]=1,this.twoColorTint&&($s[Y++]=0,$s[Y++]=0,$s[Y++]=0,$s[Y++]=0),$s[Y++]=T,$s[Y++]=C,$s[Y++]=h.r,$s[Y++]=h.g,$s[Y++]=h.b,$s[Y++]=h.a,$s[Y++]=1,$s[Y++]=0,this.twoColorTint&&($s[Y++]=0,$s[Y++]=0,$s[Y++]=0,$s[Y++]=0),$s[Y++]=R,$s[Y++]=F,$s[Y++]=h.r,$s[Y++]=h.g,$s[Y++]=h.b,$s[Y++]=h.a,$s[Y++]=0,$s[Y++]=0,this.twoColorTint&&($s[Y++]=0,$s[Y++]=0,$s[Y++]=0,$s[Y]=0),this.batcher.draw(t,$s,Hs)}drawRegion(t,e,s,i,n,r){this.enableRenderer(this.batcher),r||(r=Zs);let o=0;$s[o++]=e,$s[o++]=s,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=t.u,$s[o++]=t.v2,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o++]=0),$s[o++]=e+i,$s[o++]=s,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=t.u2,$s[o++]=t.v2,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o++]=0),$s[o++]=e+i,$s[o++]=s+n,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=t.u2,$s[o++]=t.v,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o++]=0),$s[o++]=e,$s[o++]=s+n,$s[o++]=r.r,$s[o++]=r.g,$s[o++]=r.b,$s[o++]=r.a,$s[o++]=t.u,$s[o++]=t.v,this.twoColorTint&&($s[o++]=0,$s[o++]=0,$s[o++]=0,$s[o]=0),this.batcher.draw(t.page.texture,$s,Hs)}line(t,e,s,i,n,r){this.enableRenderer(this.shapes),this.shapes.line(t,e,s,i,n)}triangle(t,e,s,i,n,r,o,a,h,l){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,s,i,n,r,o,a,h,l)}quad(t,e,s,i,n,r,o,a,h,l,c,u,d){this.enableRenderer(this.shapes),this.shapes.quad(t,e,s,i,n,r,o,a,h,l,c,u,d)}rect(t,e,s,i,n,r){this.enableRenderer(this.shapes),this.shapes.rect(t,e,s,i,n,r)}rectLine(t,e,s,i,n,r,o){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,s,i,n,r,o)}polygon(t,e,s,i){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,s,i)}circle(t,e,s,i,n,r=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,s,i,n,r)}curve(t,e,s,i,n,r,o,a,h,l){this.enableRenderer(this.shapes),this.shapes.curve(t,e,s,i,n,r,o,a,h,l)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){const e=this.canvas,s=window.devicePixelRatio||1,i=Math.round(e.clientWidth*s),n=Math.round(e.clientHeight*s);if(e.width==i&&e.height==n||(e.width=i,e.height=n),this.context.gl.viewport(0,0,e.width,e.height),t===Js.Expand)this.camera.setViewport(i,n);else if(t===Js.Fit){const t=e.width,s=e.height,i=this.camera.viewportWidth,n=this.camera.viewportHeight,r=n/i<s/t?i/t:n/s;this.camera.setViewport(t*r,s*r)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof Bs?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Ts.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof Vs?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Ts.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}},Js=(t=>(t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit",t))(Js||{}),Qs=0,ti=163,ei=class{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new y,this.backgroundColor=new h(.135,.135,.135,1),this.tempColor=new h,this.renderer=t,this.timeKeeper.maxDelta=9,!Gs){const t=navigator.userAgent.indexOf("Safari")>-1,e=()=>Qs++;(Gs=new Image).src=ii,t||(Gs.crossOrigin="anonymous"),Gs.onload=e,(qs=new Image).src=si,t||(qs.crossOrigin="anonymous"),qs.onload=e}}dispose(){let t,e;null==(t=this.logo)||t.dispose(),null==(e=this.spinner)||e.dispose()}draw(t=!1){if(Qs<2||t&&this.fadeOut>1)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));const s=this.tempColor,i=this.renderer,n=i.canvas,r=i.context.gl;if(i.resize(1),i.camera.position.set(n.width/2,n.height/2,0),i.batcher.setBlendMode(r.ONE,r.ONE,r.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;s.setFromColor(this.backgroundColor),e=1-this.fadeOut/1,e=1-(e-1)*(e-1),s.a*=e,s.a>0&&(i.camera.zoom=1,i.begin(),i.quad(!0,0,0,n.width,0,n.width,n.height,0,n.height,s,s,s,s),i.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(r.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),r.clear(r.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),s.set(e,e,e,e),this.logo||(this.logo=new ss(i.context,Gs),this.spinner=new ss(i.context,qs)),i.camera.zoom=Math.max(1,ti/n.height),i.begin(),i.drawTexture(this.logo,(n.width-165)/2,(n.height-108)/2,165,108,s),this.spinner&&i.drawTextureRotated(this.spinner,(n.width-ti)/2,(n.height-ti)/2,ti,ti,81.5,81.5,this.angle,s),i.end()}},si="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAALKElEQVR42u2de2iW5R/GPzuqcwfnnKfNmafl5tTNHWzqNi3DEMQykcAoJSsySkspjSIk0iD/07Kf4R+FnVBDUTshZGpWUEJaaiWFgZlUFmXmIe3HNXthyebeZ77P9H13ffBG8Y8H7ut7vff93N/7fu4vGGPiFZiez/Qtw9lytJajfzfw9z/j+efPOv7cV8W+lUNY2a8T/ayTCRsWFLJA5rtUO1LLkV5p9LJeJizQiHeqnlOtmVFtdTGrrZkJCxYXsTgaI6r9MY4/UpNItW4mFDaXsTlaM6qVZlBq3UwofFrJp0HMWJ9DvXUzobCznJ1BzFjWlTLrZkJh/TDWBzFjTgo51s2EgnKI0Rrx+FiOWzNzVaym91Syx5qZsGBWb2ZFa0ZN6dbMhAWTcpkUrRmXD2K5NTNhgVbH0Zpxbl/mWjMTFvRIo0e0ZpzcncnWzISKtvmiMWNRJ4qslwmVXRXsas2Ix8ZwzFqZsGFREYtaM+Oaa1ljrUzYkJ9G/ok6TlzKjJWZVFor0y7c1Zu7WjLiqiGsskamXdHopyT4vALmzS9k/t19uHtKHlOSIMn6xAtARjIZ1sFcUSZ0Y4La+G6M18hS2IlCn4a+WoC0JNL0d/dUupdnUj40g6EJ2VEdMnhrOG/p5f/jUXz8SgmvaGU6KpNRNsLVQV0OdXf24s63h/P2gWoOrBjMCr2GJFQnnxnIM3q5P1PPmaYv+4ev4/C6UtbpV2gzXCkgL5W8Bwt48OIc6ul6Tp+s4+SyASxLiI4+PYCn1bHzDZxvaQW6vZzto7MYnQIpNkf7kp5EuozYUroqEjcNKHHd0Tl9mBPN1pk+hFeieGBnBtog7UXjsj9pWg+m6duecw2cay1OC/uxMC47KmP9OIYfoz1YoC20J/rzRG4quTZK2EAyJGs20qwUbYw0aNRmUxtvfUW/uEtNzc1NB1/X8LVyd15hh82F43AvD+VlXcsSJEZa1CQ3ejleAO7oxR3RDP0XN91X4+NXYb8nkv7UNTwV7e0YTdu7I3g33t7tuaEbNwSZpps2fSyvs4M2Tjhot+jb0Xzbltj8r5j/xVt/6Z1Ob93U1ZYO691EhhzchcHeXosVjcNZysyezLw4xRZt05R+fTeuj8vOj+zKyG0j2aZcVVs6v+QalnjrMFZASQYl2nBoSyz06e3j/Xk8rgWYmMvEICu2pm1HOTuc7okV8FgRj0XukwzanhvCc/F+72TjoQjdObN1OFuDLmh0xP+WHtxiI10ukJlCprb4guiv1fP+avZrS1C7NAkliHZjDtZwMMgqbukAltpMlwuMy2FcEBPqvfLLar5Uqi0hBdEwryy+Mv5n6zkbjTBa+dlMlwvUZFETZKGiFM7tvbhdJ3gSVRO0wzIjnxmvl/J6a6JsGMYGrahtpssFeqbR841S3mhN80OjOaSDEdqd6SjaMKgzgzRK7q1ib3PT9sYyNo7JZoyNFNvRcVMZmy7WOvIuryv/Zvdmdt90+nY0bRp3AvROohFwdwW7dTG7RFlbwlqdrbOBYg005NAQmZU0HWt1rXMBH1Xw0dQ8pmqzoaPmdhun7bHZjNVe9qP9eFQfO1VkUmHjhAVUZ1GtnKFSbjrkrPfy4i4UW5t/6ZxM54J0CqxFe81KpGsQyE4h23oYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjLna+bdOy+IiFquIpGq16Pb79cNYv3IIK/X/ugx+Ui6TVKvYVU9Nc8gX8od8Ir/IN/KPfCQ/yVfyl/6/pfJvLChkQdD6wyqntquCXYuKWJSfRr6D0dEAxV3xlw/khyD+kd/ku/88cHo+09tS3LBpO1HHCVUqcIA6CqB4K+6X6x35L/JM2loXurlWmUmlA5XogOIcK8/If5HncrSWo7F6cKIWPjT/RXGOlWfkv8hzaWsN4uaaysE6WIkOKM6x8oz8F3kusXqo2vxC5jtYiQ4ozrH0TeS5qIZcrB7qkrwdA8U5Vp6R/yLPZV8V+2L14Cl5THGwEh1QnGPlGfkv8lyUlIzFQ1cNYVVHrcjZ0VCcFe9Y+Eb+izy3ceclUl43aFN52DXXssYpnY6a4qFS8ZcP2uIf+e7inRh6pdFrdTGrm8uiHx/L8T2V7NGWzvJBLJ/bl7mTuzO5qBNFDoiJID/IF/KHfCK/yDfyT3O7d/KbfNfS80hNIrU0g9L6HOq1x5iTQo6FNpeLfCQ/yVfyl3xmXYwxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHNk9z4JwJ0SqKTdQkbyEwhU393T6V7zzR6pieR3tE1ITeVXImhe6BXDGZFdRbVeank2TBhcaEMr0rwbixj49IBLL2/L/ffmMuNHfqO9tFZjJYBd1ewO3Lx+IcVfKhqna5nHZYR6XFPH+5R3eeI5t9fx/fvjeC9Jdew5OKZKqFR/RDVKL6vL/f9PJafmyvHsL+a/ff24V6NmjZQbGchVbY6UM2BluqHv1rCqzVZ1KQlkZboepCdQvacPsz5bjTfXao+yMEaDt7Wk9tSIMVGig3TejCtJSM2bSpkPjWPqd1S6Zao+lORSYWmgkOjORRNwZqd5ezMSiHLRooNr5XwWjS6/1XHX9vL2T67N7M1iyXa9JCrYjVrS1gbpJyw6hBfsmiNCYT0P9/A+Wj1/6qGr5YNYFlJBiWJogEzezLz/ZG8/9s4fgtSyuvNYbyp1IONFBtu7sHNv4/j9yAxUHWrdaWsG9+N8XHd+YxkMpSy+aySz841cC5oXbmHCnnI74yxAgZ3YbDeB4PEQCOpBpFNZWwa2ZWRcdnxLsl00crtRB0n2lLg8JNRfDKoM4NsolgBSmw/UMADba1+qpmqfyf6x1u/0a/og3I+aEunP6/i86osqmygcGarF4p54dex/Bo0LqfqOfVwIQ/HW5/RSkwV1oN2WLlHTc82TljAwM4M1O5LWwYKZTjibYXNS0N5KcjKTe10PadfLObFuJwK4ozp+UzXDBTUjL+M5ZcBnRkQV53dMIwNQTu6bSTbVEzbi5awuVByd2E/FgaN0Tc1fKOzBHHV2aAdVSdv6s5NNkp7cSH/++xAng2yyHx+CM/H21YhfdPp+0U1X0TbSZnXx8faG9Aop0MS0cToh1p+iLcpOkLj9t/JOk5eqoPHxnDsyf486an5yqCDK7XZ1O4oZ4dWyy3FSXHUAYq47uyYbMZoGmhpG3DlEFb6uNiVBhpyaHhnBO8oJmfqOROJjzIiP43hJ8UxITqqX56S2Hur2KsOnq3nrE6PPNKPRwrSKbAZrjTQNZmuE7oxYXMZmxWbw9dxWFu4W4ezVedOE6qzI7oyYkY+M7TPeWsPbk2UX1qioSN+E3OZqOR2cReKE+qQRFN0Pi7y73g/UawU1KzezJpXwLz5hczX1ueUPKYkNb6GJQZ+j7/aAfRZREsv+quGsMoamXZBW2Gt5eU0alorEzYsKmJRa/m4NdeyxlqZsCGa84DKnVorEzboC7podis69DfIJmwufHMc7famvvmxZiYsKOtKWbRm1OcW1syEBboSJFozLh/EcmtmwgIluaM14/phrLdmJixYXMTiaM24p5I91syEBTphFOR7Y2tmwgJNvUFOr+tov3UzoaAv44KYUatv62ZCoemdhtG0+hzqrZsJBR08DWLG0gxKrZu50qvpxos3U5NItW4mFPp1ot+lPlpq2lYXs9qamVBZUMiC1ox4pJYjvlfStAu6GmTLcLboMtPIV4/6im5fFfuUi9QIap2MiWP+D96R1vPmsD/fAAAAAElFTkSuQmCC",ii="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=",ni=class{constructor(t,e){this.time=new y,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),e.webglConfig&&(e.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new Qe(t,e.webglConfig),this.renderer=new Ks(t,this.context),this.gl=this.context.gl,this.assetManager=new is(this.context,e.pathPrefix),this.input=new Ms(t),e.app.loadAssets&&e.app.loadAssets(this);const s=()=>{requestAnimationFrame(s),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this)},i=()=>{this.assetManager.isLoadingComplete()?this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),s()):requestAnimationFrame(i)};requestAnimationFrame(i)}clear(t,e,s,i){this.gl.clearColor(t,e,s,i),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}};return js=n,((n,r,o,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(const o of s(r))i.call(n,o)||void 0===o||t(n,o,{get:()=>r[o],enumerable:!(a=e(r,o))||a.enumerable});return n})(t({},"__esModule",{value:!0}),js)})();t.exports=e}).call(window)},3524:(t,e,s)=>{const i=s(7473),n=s(4597),r=s(6732),o=s(2482),a=s(704),h=s(3137),l=s(1192),c=new i({Extends:h,initialize:function(t,e,s,i,r,c,u){let d,f,p,m=[],g=t.cacheManager.custom.spine;if(o(e)){const s=e;for(e=n(s,"key"),f=new a(t,{key:e,url:n(s,"jsonURL"),extension:n(s,"jsonExtension","json"),xhrSettings:n(s,"jsonXhrSettings")}),i=n(s,"atlasURL"),r=n(s,"preMultipliedAlpha"),Array.isArray(i)||(i=[i]),d=0;d<i.length;d++)(p=new l(t,{key:`${e}!${d}`,url:i[d],extension:n(s,"atlasExtension","atlas"),xhrSettings:n(s,"atlasXhrSettings")})).cache=g,m.push(p)}else for(f=new a(t,e,s,c),Array.isArray(i)||(i=[i]),d=0;d<i.length;d++)(p=new l(t,`${e}!${d}`,i[d],u)).cache=g,m.push(p);m.unshift(f),h.call(this,t,"spine",e,m),this.config.preMultipliedAlpha=r},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var e=t.data.split("\n"),s=[e[0]],i=0;i<e.length;i++){let t=e[i];""===t.trim()&&i<e.length-1&&(t=e[i+1],s.push(t))}const o=this.config,a=this.loader,h=a.baseURL,l=a.path,c=a.prefix,u=n(o,"baseURL",this.baseURL),d=n(o,"path",t.src.match(/^.*\//))[0],f=n(o,"prefix",this.prefix),p=n(o,"textureXhrSettings");a.setBaseURL(u),a.setPath(d),a.setPrefix(f);for(let t=0;t<s.length;t++){const e=s[t],i=new r(a,e,e,p);a.keyExists(i)||(this.addToMultiFile(i),a.addFile(i))}a.setBaseURL(h),a.setPath(l),a.setPrefix(c)}},addToCache:function(){if(this.isReadyToProcess()){let r;this.files[0].addToCache();for(var t="",e="",s=!!this.config.preMultipliedAlpha,i=this.loader.textureManager,n=1;n<this.files.length;n++){const s=this.files[n];if("text"===s.type)t=s.key.replace(/![\d]$/,""),r=s.cache,e=e.concat(s.data);else{const t=s.key.trim(),e=t.indexOf("!"),n=t.substr(e+1);i.exists(n)||i.addImage(n,s.data)}s.pendingDestroy()}r.add(t,{preMultipliedAlpha:s,data:e,prefix:this.prefix}),this.complete=!0}}});t.exports=c},4513:(t,e,s)=>{const i=s(2494),n=s(7473),r=s(5851),o=s(3527),a=s(5722),h={canvas:s(5159),webgl:s(7518)},l=s(3524),c=s(8332),u=s(5782),d=s(1984),f=new n({Extends:a,initialize:function(t,e,s){a.call(this,t,e,s);const n=e.game;this.isWebGL=2===n.config.renderType,this.cache=n.cache.addCustom("spine"),this.spineTextures=n.cache.addCustom("spineTextures"),this.json=n.cache.json,this.textures=n.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=h,this.temp1,this.temp2,this.isWebGL?(this.runtime=h.webgl,this.renderer=n.renderer,this.gl=n.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=h.canvas,this.renderer=n.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:n.scale.width,height:n.scale.height,preRender:d,postRender:d,render:d,destroy:d}),e.registerFileType("spine",this.spineFileCallback,t),e.registerGameObject("spine",(function(t,e,i,n,r){const o=this.scene.sys[s],a=new c(this.scene,o,t,e,i,n,r);return this.displayList.add(a),this.updateList.add(a),a}),(function(t,e){void 0===t&&(t={});const n=r(t,"key",null),o=r(t,"animationName",null),a=r(t,"loop",!1),h=this.scene.sys[s],l=new c(this.scene,h,0,0,n,o,a);void 0!==e&&(t.add=e),i(this.scene,l,t);const u=r(t,"skinName",!1);u&&l.setSkinByName(u);const d=r(t,"slotName",!1),f=r(t,"attachmentName",null);return d&&l.setAttachment(d,f),l.refresh()})),e.registerGameObject("spineContainer",(function(t,e,i){const n=this.scene.sys[s],r=new u(this.scene,n,t,e,i);return this.displayList.add(r),r}),(function(t,e){void 0===t&&(t={});const n=r(t,"x",0),o=r(t,"y",0),a=r(t,"children",null),h=this.scene.sys[s],l=new u(this.scene,h,n,o,a);return void 0!==e&&(t.add=e),i(this.scene,l,t),l}))},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(o,this.onResize,this)):this.bootCanvas();const t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new h.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){let t=this.renderer.spineSceneRenderer;t||(t=new h.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0),this.renderer.spineSceneRenderer=t),this.sceneRenderer=t,this.skeletonRenderer=t.skeletonRenderer,this.skeletonDebugRenderer=t.skeletonDebugRenderer,this.temp1=new h.webgl.Vector3(0,0,0),this.temp2=new h.webgl.Vector3(0,0,0)},getAtlasCanvas:function(t){const e=this.cache.get(t);if(e){let s,i=this.spineTextures;if(i.has(t))s=i.get(t);else{const t=this.textures;s=new this.runtime.TextureAtlas(e.data,(function(s){return new h.canvas.CanvasTexture(t.get(e.prefix+s).getSourceImage())}))}return s}console.warn(`No atlas data for: ${t}`)},getAtlasWebGL:function(t){const e=this.cache.get(t);if(e){let s,i=this.spineTextures;if(i.has(t))s=i.get(t);else{const t=this.textures,i=this.sceneRenderer.context.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s=new this.runtime.TextureAtlas(e.data,(function(s){return new h.webgl.GLTexture(i,t.get(e.prefix+s).getSourceImage(),!1)}))}return s}console.warn(`No atlas data for: ${t}`)},spineFileCallback:function(t,e,s,i,n,r,o){let a;if(o=o||{},Array.isArray(t))for(let e=0;e<t.length;e++)(a=new l(this,t[e])).prefix=a.prefix||o.prefix||"",this.addFile(a.files);else(a=new l(this,t,e,s,i,n,r)).prefix=a.prefix||o.prefix||"",this.addFile(a.files);return this},worldToLocal:function(t,e,s,i){const n=this.temp1,r=this.temp2,o=this.sceneRenderer.camera;n.set(t+s.x,e-s.y,0);const a=o.viewportWidth,h=o.viewportHeight;return o.screenToWorld(n,a,h),i&&null!==i.parent?(i.parent.worldToLocal(r.set(n.x-s.x,n.y-s.y,0)),new this.runtime.Vector2(r.x,r.y)):i?new this.runtime.Vector2(n.x-s.x,n.y-s.y):new this.runtime.Vector2(n.x,n.y)},getVector2:function(t,e){return new this.runtime.Vector2(t,e)},getVector3:function(t,e,s){return new h.webgl.Vector3(t,e,s)},setDebugBones:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function(t,e){let s=t,i=t,n=-1!==t.indexOf(".");if(n){const e=t.split(".");s=e.shift(),i=e.join(".")}const o=this.cache.get(s),a=this.getAtlas(s);if(!a)return null;if(!this.spineTextures.has(s)){let t,e,i,n=this.gl;for(this.isWebGL&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t=0;t<a.pages.length;t++)e=a.pages[t],i=o.prefix?o.prefix+e.name:e.name,this.isWebGL?e.setTexture(new this.runtime.GLTexture(n,this.textures.get(i).getSourceImage(),!1)):e.setTexture(new this.runtime.CanvasTexture(this.textures.get(i).getSourceImage()));this.spineTextures.add(s,a)}let h,l=o.preMultipliedAlpha,c=new this.runtime.AtlasAttachmentLoader(a),u=new this.runtime.SkeletonJson(c);if(e)h=e;else{const t=this.json.get(s);h=n?r(t,i):t}if(h){const t=u.readSkeletonData(h);return{skeletonData:t,skeleton:new this.runtime.Skeleton(t),preMultipliedAlpha:l}}return null},createAnimationState:function(t){const e=new this.runtime.AnimationStateData(t.data);return{stateData:e,state:new this.runtime.AnimationState(e)}},getBounds:function(t){const e=new this.runtime.Vector2,s=new this.runtime.Vector2;return t.getBounds(e,s,[]),{offset:e,size:s}},onResize:function(){const t=this.renderer,e=this.sceneRenderer,s=t.width,i=t.height;e.camera.position.x=s/2,e.camera.position.y=i/2,e.camera.setViewport(s,i)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(o,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null;const t=this.renderer.spineSceneRenderer;t&&t.dispose(),this.renderer.spineSceneRenderer=null,this.sceneRenderer=null}});f.SpineGameObject=c,f.SpineContainer=u,t.exports=f},5782:(t,e,s)=>{const i=s(7473),n=s(7361),r=s(7738),o=new i({Extends:n,Mixins:[r],initialize:function(t,e,s,i,r){n.call(this,t,s,i,r),this.type="Spine",this.plugin=e},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=o},8064:t=>{t.exports=function(t,e,s,i){const n=e.list;if(0!==n.length){s.addToRenderList(e);const r=e.localTransform;i?(r.loadIdentity(),r.multiply(i),r.translate(e.x,e.y),r.rotate(e.rotation),r.scale(e.scaleX,e.scaleY)):r.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);const o=-1!==e.blendMode;o||t.setBlendMode(0);const a=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,s);for(let e=0;e<n.length;e++){const i=n[e];if(i.willRender(s)){const e=i.alpha,n=i.scrollFactorX,c=i.scrollFactorY;o||i.blendMode===t.currentBlendMode||t.setBlendMode(i.blendMode),i.setScrollFactor(n*h,c*l),i.setAlpha(e*a),i.renderCanvas(t,i,s,r),i.setAlpha(e),i.setScrollFactor(n,c)}}e.mask&&e.mask.postRenderCanvas(t)}}},7738:(t,e,s)=>{let i=s(1984),n=s(1984);i=s(434),n=s(8064),t.exports={renderWebGL:i,renderCanvas:n}},434:t=>{t.exports=function(t,e,s,i){const n=e.plugin.sceneRenderer,r=e.list;if(0!==r.length){s.addToRenderList(e);const o=e.localTransform;i?(o.loadIdentity(),o.multiply(i),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.newType&&(t.pipelines.clear(),n.begin());const a=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(let i=0;i<r.length;i++){const a=r[i];if(a.willRender(s,e)){const i=a.mask;i&&(n.end(),t.pipelines.rebind(),i.preRenderWebGL(t,a,s),t.pipelines.clear(),n.begin()),a.renderWebGL(t,a,s,o,e),i&&(n.end(),t.pipelines.rebind(),i.postRenderWebGL(t,s),t.pipelines.clear(),n.begin())}}t.nextTypeMatch=a,a||(n.end(),t.pipelines.rebind())}else n.batcher.isDrawing&&t.finalType&&(n.end(),t.pipelines.rebind())}},6576:t=>{t.exports="complete"},8621:t=>{t.exports="dispose"},8944:t=>{t.exports="end"},7494:t=>{t.exports="event"},1908:t=>{t.exports="interrupted"},5591:t=>{t.exports="start"},5146:(t,e,s)=>{t.exports={COMPLETE:s(6576),DISPOSE:s(8621),END:s(8944),EVENT:s(7494),INTERRUPTED:s(1908),START:s(5591)}},8332:(t,e,s)=>{const i=s(6412),n=s(2915),r=s(7473),o=s(1991),a=s(3131),h=s(9660),l=s(4627),c=s(3212),u=s(8414),d=s(3426),f=s(7149),p=s(2273),m=s(4208),g=s(5146),x=s(2762),w=new r({Extends:p,Mixins:[o,a,h,l,c,u,x],initialize:function(t,e,s,i,n,r,o){p.call(this,t,"Spine"),this.plugin=e,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(s,i),n&&this.setSkeleton(n,r,o)},willRender:function(t,e){const s=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!e&&!s&&this.parentContainer){const t=this.plugin,e=t.sceneRenderer;t.gl&&e.batcher.isDrawing&&(e.end(),t.renderer.pipelines.rebind())}return s},setAlpha:function(t,e){if(void 0===t&&(t=1),e){const s=this.findSlot(e);s&&(s.color.a=n(t,0,1))}else this.alpha=t;return this},alpha:{get:function(){return this.skeleton.color.a},set:function(t){const e=n(t,0,1);this.skeleton&&(this.skeleton.color.a=e),0===e?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(t){const e=n(t,0,1);this.skeleton&&(this.skeleton.color.r=e)}},green:{get:function(){return this.skeleton.color.g},set:function(t){const e=n(t,0,1);this.skeleton&&(this.skeleton.color.g=e)}},blue:{get:function(){return this.skeleton.color.b},set:function(t){const e=n(t,0,1);this.skeleton&&(this.skeleton.color.b=e)}},setColor:function(t,e){void 0===t&&(t=16777215);let s=(t>>16&255)/255,i=(t>>8&255)/255,n=(255&t)/255,r=t>16777215?(t>>>24)/255:null,o=this.skeleton;if(e){const t=this.findSlot(e);t&&(o=t)}return o.color.r=s,o.color.g=i,o.color.b=n,null!==r&&(o.color.a=r),this},setSkeletonFromJSON:function(t,e,s,i){return this.setSkeleton(t,e,s,i)},setSkeleton:function(t,e,s,i){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());let n=this.plugin.createSkeleton(t,i);this.skeletonData=n.skeletonData,this.preMultipliedAlpha=n.preMultipliedAlpha;const r=n.skeleton;return r.setSkin(),r.setToSetupPose(),this.skeleton=r,n=this.plugin.createAnimationState(r),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=n.state,this.stateData=n.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),e&&this.setAnimation(0,e,s),this.root=this.getRootBone(),this.root&&(this.root.rotation=m(d(this.rotation))+90),this.state.apply(r),r.updateCache(),this.updateSize()},onComplete:function(t){this.emit(g.COMPLETE,t)},onDispose:function(t){this.emit(g.DISPOSE,t)},onEnd:function(t){this.emit(g.END,t)},onEvent:function(t,e){this.emit(g.EVENT,t,e)},onInterrupted:function(t){this.emit(g.INTERRUPTED,t)},onStart:function(t){this.emit(g.START,t)},refresh:function(){return this.root&&(this.root.rotation=m(d(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(t,e,s,i){const n=this.skeleton;return void 0===t&&(t=n.data.width),void 0===e&&(e=n.data.height),void 0===s&&(s=0),void 0===i&&(i=0),this.width=t,this.height=e,this.displayOriginX=n.x-s,this.displayOriginY=n.y-i,this},setOffset:function(t,e){const s=this.skeleton;return void 0===t&&(t=0),void 0===e&&(e=0),this.displayOriginX=s.x-t,this.displayOriginY=s.y-e,this},updateSize:function(){const t=this.skeleton,e=this.plugin.renderer.height,s=this.scaleX,i=this.scaleY;t.x=this.x,t.y=e-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();const n=this.getBounds();return this.width=n.size.x,this.height=n.size.y,this.displayOriginX=this.x-n.offset.x,this.displayOriginY=this.y-(e-(this.height+n.offset.y)),t.scaleX=s,t.scaleY=i,t.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.refresh()}},getBoneList:function(){const t=[],e=this.skeletonData;if(e)for(let s=0;s<e.bones.length;s++)t.push(e.bones[s].name);return t},getSkinList:function(){const t=[],e=this.skeletonData;if(e)for(let s=0;s<e.skins.length;s++)t.push(e.skins[s].name);return t},getSlotList:function(){for(var t=[],e=this.skeleton,s=0;s<e.slots.length;s++)t.push(e.slots[s].data.name);return t},getAnimationList:function(){const t=[],e=this.skeletonData;if(e)for(let s=0;s<e.animations.length;s++)t.push(e.animations[s].name);return t},getCurrentAnimation:function(t){void 0===t&&(t=0);const e=this.state.getCurrent(t);if(e)return e.animation},play:function(t,e,s){return this.setAnimation(0,t,e,s),this},setAnimation:function(t,e,s,i){if(void 0===s&&(s=!1),void 0===i&&(i=!1),i&&this.state){const s=this.state.getCurrent(t);if(s&&s.animation.name===e&&!s.isComplete())return}if(this.findAnimation(e))return this.state.setAnimation(t,e,s)},addAnimation:function(t,e,s,i){return void 0===s&&(s=!1),void 0===i&&(i=0),this.state.addAnimation(t,e,s,i)},setEmptyAnimation:function(t,e){return this.state.setEmptyAnimation(t,e)},clearTrack:function(t){return this.state.clearTrack(t),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(t){const e=this.skeleton;return e.setSkinByName(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setSkin:function(t){const e=this.skeleton;return e.setSkin(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setMix:function(t,e,s){return this.stateData.setMix(t,e,s),this},getAttachment:function(t,e){return this.skeleton.getAttachment(t,e)},getAttachmentByName:function(t,e){return this.skeleton.getAttachmentByName(t,e)},setAttachment:function(t,e){if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)for(let s=0;s<t.length;s++)this.skeleton.setAttachment(t[s],e[s]);else this.skeleton.setAttachment(t,e);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(t,e,s,r,o,a){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=360);const h=this.plugin.renderer.height,l=d(i(t.worldX,h-t.worldY,e,s)+f(r));return t.rotation=n(m(l),o,a),this},findBone:function(t){return this.skeleton.findBone(t)},findBoneIndex:function(t){return this.skeleton.findBoneIndex(t)},findSlot:function(t){return this.skeleton.findSlot(t)},findSlotIndex:function(t){return this.skeleton.findSlotIndex(t)},findSkin:function(t){return this.skeletonData.findSkin(t)},findEvent:function(t){return this.skeletonData.findEvent(t)},findAnimation:function(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(t,e){const s=this.skeleton;this.state.update(e/1e3*this.timeScale),this.state.apply(s)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=w},2753:(t,e,s)=>{const i=s(3426),n=s(4208),r=s(8445);t.exports=function(t,e,s,o){const a=t.currentContext,h=e.plugin,l=e.skeleton,c=h.skeletonRenderer,u=t._tempMatrix1,d=t._tempMatrix2,f=t._tempMatrix3;s.addToRenderList(e),d.applyITRS(e.x,e.y,e.rotation,Math.abs(e.scaleX),Math.abs(e.scaleY)),u.copyFrom(s.matrix),o?(u.multiplyWithOffset(o,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),d.e=e.x,d.f=e.y,u.multiply(d,f)):(d.e-=s.scrollX*e.scrollFactorX,d.f-=s.scrollY*e.scrollFactorY,u.multiply(d,f)),l.x=f.tx,l.y=f.ty,l.scaleX=f.scaleX,l.scaleY=-1*f.scaleY,e.scaleX<0?(l.scaleX*=-1,e.root.rotation=n(f.rotationNormalized)):e.root.rotation=r(n(i(f.rotationNormalized))+90,0,360),e.scaleY<0&&(l.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*n(f.rotationNormalized):e.root.rotation+=2*n(f.rotationNormalized)),s.renderToTexture&&(l.y=f.ty,l.scaleY*=-1),l.updateWorldTransform(),c.ctx=a,c.debugRendering=h.drawDebug||e.drawDebug,a.save(),c.draw(l),a.restore()}},2762:(t,e,s)=>{let i=s(1984),n=s(1984),r=s(1984);i=s(4290),r=s(780),n=s(2753),t.exports={renderWebGL:i,renderCanvas:n,renderDirect:r}},780:(t,e,s)=>{const i=s(2915),n=s(3426),r=s(2208),o=s(4208),a=s(8445);t.exports=function(t,e,s,h,l){const c=e.plugin,u=e.skeleton,d=c.sceneRenderer;t.pipelines.clear(),d.begin();const f=e.scrollFactorX,p=e.scrollFactorY,m=u.color.a;l&&(e.scrollFactorX=l.scrollFactorX,e.scrollFactorY=l.scrollFactorY,u.color.a=i(m*l.alpha,0,1)),s.addToRenderList(e);const g=r(e,s,h).calc,x=t.height;if(u.x=g.tx,u.y=x-g.ty,u.scaleX=g.scaleX,u.scaleY=g.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=a(o(g.rotationNormalized)-180,0,360)):e.root.rotation=a(o(n(g.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*o(g.rotationNormalized):e.root.rotation+=2*o(g.rotationNormalized)),u.updateWorldTransform(),d.drawSkeleton(u,e.preMultipliedAlpha),l&&(e.scrollFactorX=f,e.scrollFactorY=p,u.color.a=m),c.drawDebug||e.drawDebug){const t=u.x,s=u.y;u.x=0,u.y=0,d.drawSkeletonDebug(u,e.preMultipliedAlpha),u.x=t,u.y=s}d.end(),t.pipelines.rebind()}},4290:(t,e,s)=>{const i=s(2915),n=s(3426),r=s(2208),o=s(4208),a=s(8445);t.exports=function(t,e,s,h,l){const c=e.plugin,u=e.skeleton,d=c.sceneRenderer;t.newType&&(t.pipelines.clear(),d.begin());const f=e.scrollFactorX,p=e.scrollFactorY,m=u.color.a;l&&(e.scrollFactorX=l.scrollFactorX,e.scrollFactorY=l.scrollFactorY,u.color.a=i(m*l.alpha,0,1)),s.addToRenderList(e);const g=r(e,s,h).calc,x=t.height;if(u.x=g.tx,u.y=x-g.ty,u.scaleX=g.scaleX,u.scaleY=g.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=a(o(g.rotationNormalized)-180,0,360)):e.root.rotation=a(o(n(g.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*o(g.rotationNormalized):e.root.rotation+=2*o(g.rotationNormalized)),u.updateWorldTransform(),d.drawSkeleton(u,e.preMultipliedAlpha),l&&(e.scrollFactorX=f,e.scrollFactorY=p,u.color.a=m),c.drawDebug||e.drawDebug){const t=u.x,s=u.y;u.x=0,u.y=0,d.drawSkeletonDebug(u,e.preMultipliedAlpha),u.x=t,u.y=s}t.nextTypeMatch||(d.end(),t.pipelines.rebind())}},9454:(t,e,s)=>{const i={VERSION:"3.60.0",BlendModes:s(8351),ScaleModes:s(8196),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=i},1081:(t,e,s)=>{const i=s(7473),n=s(6748),r=new i({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(t){const e=this.list;if(Array.isArray(t)){for(var s=[],i=0;i<t.length;i++)s.push(e[t[i]]);return s}return e[t]},getAll:function(){const t={};for(const e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){const e={};for(const s in this.list)this.list.hasOwnProperty(s)&&s.match(t)&&(e[s]=this.list[s]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(const e in t)this.setValue(e,t[e]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);let s=this.get(t);return void 0===s&&(s=0),this.set(t,s+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{const s=this,i=this.list,r=this.events,o=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return i[t]},set:function(e){if(!s._frozen){const s=i[t];i[t]=e,r.emit(n.CHANGE_DATA,o,t,e,s),r.emit(n.CHANGE_DATA_KEY+t,o,e,s)}}}),i[t]=e,r.emit(n.SET_DATA,o,t,e)}return this},each:function(t,e){for(var s=[this.parent,null,void 0],i=1;i<arguments.length;i++)s.push(arguments[i]);for(const i in this.list)s[1]=i,s[2]=this.list[i],t.apply(e,s);return this},merge:function(t,e){for(const s in void 0===e&&(e=!0),t)t.hasOwnProperty(s)&&(e||!e&&!this.has(s))&&this.setValue(s,t[s]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(let e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){const e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){let e;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(const t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){let t=0;for(const e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=r},9044:t=>{t.exports="changedata"},7801:t=>{t.exports="changedata-"},4873:t=>{t.exports="destroy"},9966:t=>{t.exports="removedata"},4586:t=>{t.exports="setdata"},6748:(t,e,s)=>{t.exports={CHANGE_DATA:s(9044),CHANGE_DATA_KEY:s(7801),DESTROY:s(4873),REMOVE_DATA:s(9966),SET_DATA:s(4586)}},3004:(t,e,s)=>{const i=s(2776),n={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);const t=document.createElement("audio"),e=!!t.canPlayType;try{if(e){const e=function(e,s){const i=t.canPlayType(`audio/${e}`).replace(/^no$/,"");return s?Boolean(i||t.canPlayType(`audio/${s}`).replace(/^no$/,"")):Boolean(i)};if(n.ogg=e('ogg; codecs="vorbis"'),n.opus=e('ogg; codecs="opus"',"opus"),n.mp3=e("mpeg"),n.wav=e("wav"),n.m4a=e("x-m4a"),n.aac=e("aac"),n.flac=e("flac","x-flac"),n.webm=e('webm; codecs="vorbis"'),""!==t.canPlayType('audio/mp4; codecs="ec-3"'))if(i.edge)n.dolby=!0;else if(i.safari&&i.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){const t=parseInt(RegExp.$1,10),e=parseInt(RegExp.$2,10);(10===t&&e>=11||t>10)&&(n.dolby=!0)}}}catch(t){}return n}()},2776:(t,e,s)=>{let i,n=s(5203),r={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};t.exports=(i=navigator.userAgent,/Edg\/\d+/.test(i)?(r.edge=!0,r.es2019=!0):/OPR/.test(i)?(r.opera=!0,r.es2019=!0):/Chrome\/(\d+)/.test(i)&&!n.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10),r.es2019=r.chromeVersion>69):/Firefox\D+(\d+)/.test(i)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10),r.es2019=r.firefoxVersion>10):/AppleWebKit/.test(i)&&n.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(i)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(i)&&!n.windowsPhone?(r.safari=!0,r.safariVersion=parseInt(RegExp.$1,10),r.es2019=r.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(i)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(i)&&(r.silk=!0),r)},6505:(t,e,s)=>{let i,n,r,o=s(8073),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(r=new Image).onload=function(){const t=new Image;t.onload=function(){const e=o.create2D(t,6).getContext("2d",{willReadFrequently:!0});if(e.globalCompositeOperation="multiply",e.drawImage(r,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;const s=e.getImageData(2,0,1,1).data;o.remove(t),a.supportNewBlendModes=255===s[0]&&0===s[1]&&0===s[2]},t.src=`${i}/wCKxvRF${n}`},r.src=`${i}AP804Oa6${n}`,!1),a.supportInverseAlpha=function(){const t=o.create2D(this,2).getContext("2d",{willReadFrequently:!0});t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);const e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);const s=t.getImageData(1,0,1,1),i=s.data[0]===e.data[0]&&s.data[1]===e.data[1]&&s.data[2]===e.data[2]&&s.data[3]===e.data[3];return o.remove(this),i}()),a)},6543:(t,e,s)=>{const i=s(5203),n=s(2776),r=s(8073),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(t){o.localStorage=!1}o.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),o.fileSystem=!!window.requestFileSystem;let t,e,s,a=!1;return o.webGL=function(){if(window.WebGLRenderingContext)try{const t=r.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),s=r.create2D(this),i=s.getContext("2d",{willReadFrequently:!0}).createImageData(1,1);return a=i.data instanceof Uint8ClampedArray,r.remove(t),r.remove(s),!!e}catch(t){return!1}return!1}(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(o.getUserMedia=!1),!i.iOS&&(n.ie||n.firefox||n.chrome)&&(o.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(o.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),s=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===s[0]||2712847316!==s[0]&&null)),o.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==o.littleEndian&&a,o}()},3922:t=>{const e={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return e;let t,s="Fullscreen",i="FullScreen",n=[`request${s}`,`request${i}`,`webkitRequest${s}`,`webkitRequest${i}`,`msRequest${s}`,`msRequest${i}`,`mozRequest${i}`,`mozRequest${s}`];for(t=0;t<n.length;t++)if(document.documentElement[n[t]]){e.available=!0,e.request=n[t];break}const r=[`cancel${i}`,`exit${s}`,`webkitCancel${i}`,`webkitExit${s}`,`msCancel${i}`,`msExit${s}`,`mozCancel${i}`,`mozExit${s}`];if(e.available)for(t=0;t<r.length;t++)if(document[r[t]]){e.cancel=r[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}()},1454:(t,e,s)=>{const i=s(2776),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||i.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":i.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),n)},5203:t=>{const e={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return e;const t=navigator.userAgent;/Windows/.test(t)?e.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(e.iOS=!0,e.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),e.iOSVersion=parseInt(RegExp.$1,10)):e.macOS=!0:/Android/.test(t)?e.android=!0:/Linux/.test(t)?e.linux=!0:/iP[ao]d|iPhone/i.test(t)?(e.iOS=!0,navigator.appVersion.match(/OS (\d+)/),e.iOSVersion=parseInt(RegExp.$1,10),e.iPhone=-1!==t.toLowerCase().indexOf("iphone"),e.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?e.kindle=!0:/CrOS/.test(t)&&(e.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(e.android=!1,e.iOS=!1,e.macOS=!1,e.windows=!0,e.windowsPhone=!0);const s=/Silk/.test(t);return(e.windows||e.macOS||e.linux&&!s||e.chromeOS)&&(e.desktop=!0),(e.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(e.desktop=!1),navigator.standalone&&(e.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(e.cordova=!0),void 0!==window.ejecta&&(e.ejecta=!0)),"undefined"!=typeof process&&process.versions&&process.versions.node&&(e.node=!0),e.node&&"object"==typeof process.versions&&(e.nodeWebkit=!!process.versions["node-webkit"],e.electron=!!process.versions.electron),/Crosswalk/.test(t)&&(e.crosswalk=!0),e.pixelRatio=window.devicePixelRatio||1,e}()},2131:(t,e,s)=>{const i=s(4597),n={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};t.exports=function(){if("function"==typeof importScripts)return n;const t=document.createElement("video"),e=!!t.canPlayType,s=/^no$/;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(s,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(s,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType("video/x-m4v").replace(s,"")&&(n.m4v=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(s,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(s,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(s,"")&&(n.hls=!0))}catch(t){}return t.parentNode&&t.parentNode.removeChild(t),n.getVideoURL=function(t){Array.isArray(t)||(t=[t]);for(let r=0;r<t.length;r++){var e,s=i(t[r],"url",t[r]);if(0===s.indexOf("blob:"))return{url:s,type:""};if(e=0===s.indexOf("data:")?s.split(",")[0].match(/\/(.*?);/):s.match(/\.([a-zA-Z0-9]+)($|\?)/),e=i(t[r],"type",e?e[1]:"").toLowerCase(),n[e])return{url:s,type:e}}return null},n}()},9356:(t,e,s)=>{t.exports={os:s(5203),browser:s(2776),features:s(6543),input:s(1454),audio:s(3004),video:s(2131),fullscreen:s(3922),canvasFeatures:s(6505)}},5686:(t,e,s)=>{var i=s(7473),n=new Float32Array(20),r=new i({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(t){return this._matrix.set(t),this._dirty=!0,this},reset:function(){const t=this._matrix;return t.fill(0),t[0]=1,t[6]=1,t[12]=1,t[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){const t=this._data;return this._dirty&&(t.set(this._matrix),t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._dirty=!1),t},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);const s=t;return this.multiply([s,0,0,0,0,0,s,0,0,0,0,0,s,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);const s=2*t/3+1,i=-.5*(s-1);return this.multiply([s,i,i,0,0,i,s,i,0,0,i,i,s,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;const s=Math.cos(t),i=Math.sin(t),n=.213,r=.715,o=.072;return this.multiply([n+.787*s+i*-n,r+s*-r+i*-r,o+s*-o+.928*i,0,0,n+s*-n+.143*i,r+s*(1-r)+.14*i,o+s*-o+-.283*i,0,0,n+s*-n+-.787*i,r+s*-r+i*r,o+.928*s+i*o,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply(r.BLACK_WHITE,t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);const s=t+1,i=-.5*(s-1);return this.multiply([s,0,0,0,i,0,s,0,0,i,0,0,s,0,i,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply(r.NEGATIVE,t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply(r.DESATURATE_LUMINANCE,t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply(r.SEPIA,t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply(r.LSD,t)},brown:function(t){return void 0===t&&(t=!1),this.multiply(r.BROWN,t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply(r.VINTAGE,t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply(r.KODACHROME,t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply(r.TECHNICOLOR,t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply(r.POLAROID,t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply(r.SHIFT_BGR,t)},multiply:function(t,e){void 0===e&&(e=!1),e||this.reset();const s=this._matrix,i=n;return i.set(s),s.set([i[0]*t[0]+i[1]*t[5]+i[2]*t[10]+i[3]*t[15],i[0]*t[1]+i[1]*t[6]+i[2]*t[11]+i[3]*t[16],i[0]*t[2]+i[1]*t[7]+i[2]*t[12]+i[3]*t[17],i[0]*t[3]+i[1]*t[8]+i[2]*t[13]+i[3]*t[18],i[0]*t[4]+i[1]*t[9]+i[2]*t[14]+i[3]*t[19]+i[4],i[5]*t[0]+i[6]*t[5]+i[7]*t[10]+i[8]*t[15],i[5]*t[1]+i[6]*t[6]+i[7]*t[11]+i[8]*t[16],i[5]*t[2]+i[6]*t[7]+i[7]*t[12]+i[8]*t[17],i[5]*t[3]+i[6]*t[8]+i[7]*t[13]+i[8]*t[18],i[5]*t[4]+i[6]*t[9]+i[7]*t[14]+i[8]*t[19]+i[9],i[10]*t[0]+i[11]*t[5]+i[12]*t[10]+i[13]*t[15],i[10]*t[1]+i[11]*t[6]+i[12]*t[11]+i[13]*t[16],i[10]*t[2]+i[11]*t[7]+i[12]*t[12]+i[13]*t[17],i[10]*t[3]+i[11]*t[8]+i[12]*t[13]+i[13]*t[18],i[10]*t[4]+i[11]*t[9]+i[12]*t[14]+i[13]*t[19]+i[14],i[15]*t[0]+i[16]*t[5]+i[17]*t[10]+i[18]*t[15],i[15]*t[1]+i[16]*t[6]+i[17]*t[11]+i[18]*t[16],i[15]*t[2]+i[16]*t[7]+i[17]*t[12]+i[18]*t[17],i[15]*t[3]+i[16]*t[8]+i[17]*t[13]+i[18]*t[18],i[15]*t[4]+i[16]*t[9]+i[17]*t[14]+i[18]*t[19]+i[19]]),this._dirty=!0,this}});r.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t.exports=r},8073:(t,e,s)=>{let i,n,r,o=s(9454),a=s(2150),h=[],l=!1;t.exports=(r=function(){let t=0;return h.forEach((function(e){e.parent&&t++})),t},{create2D:function(t,e,s){return i(t,e,s,o.CANVAS)},create:i=function(t,e,s,i,r){let c;void 0===e&&(e=1),void 0===s&&(s=1),void 0===i&&(i=o.CANVAS),void 0===r&&(r=!1);let u=n(i);return null===u?(u={parent:t,canvas:document.createElement("canvas"),type:i},i===o.CANVAS&&h.push(u),c=u.canvas):(u.parent=t,c=u.canvas),r&&(u.parent=c),c.width=e,c.height=s,l&&i===o.CANVAS&&a.disable(c.getContext("2d",{willReadFrequently:!1})),c},createWebGL:function(t,e,s){return i(t,e,s,o.WEBGL)},disableSmoothing:function(){l=!0},enableSmoothing:function(){l=!1},first:n=function(t){if(void 0===t&&(t=o.CANVAS),t===o.WEBGL)return null;for(let e=0;e<h.length;e++){const s=h[e];if(!s.parent&&s.type===t)return s}return null},free:function(){return h.length-r()},pool:h,remove:function(t){const e=t instanceof HTMLCanvasElement;h.forEach((function(s){(e&&s.canvas===t||!e&&s.parent===t)&&(s.parent=null,s.canvas.width=1,s.canvas.height=1)}))},total:r})},2150:t=>{let e,s="";t.exports={disable:function(t){return""===s&&(s=e(t)),s&&(t[s]=!1),t},enable:function(t){return""===s&&(s=e(t)),s&&(t[s]=!0),t},getPrefix:e=function(t){for(let e=["i","webkitI","msI","mozI","oI"],s=0;s<e.length;s++){const i=`${e[s]}mageSmoothingEnabled`;if(i in t)return i}return null},isEnabled:function(t){return null!==s?t[s]:null}}},7499:(t,e,s)=>{const i=s(7473),n=s(3649),r=new i({initialize:function(t,e,s,i,n,r){e||(e=t.sys.make.image({x:s,y:i,key:n,frame:r,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,s){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,s)},postRenderWebGL:function(t,e,s){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e,s)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});n.register("bitmapMask",(function(t,e,s,i,n){return new r(this.scene,t,e,s,i,n)})),t.exports=r},6726:(t,e,s)=>{const i=new(s(7473))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,s){const i=t.gl;t.flush(),0===t.maskStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:s}),this.applyStencil(t,s,!0),t.maskCount++},applyStencil:function(t,e,s){let i=t.gl,n=this.geometryMask,r=t.maskCount,o=255;i.colorMask(!1,!1,!1,!1),s?(i.stencilFunc(i.EQUAL,r,o),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r++):(i.stencilFunc(i.EQUAL,r+1,o),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),this.level=r,n.renderWebGL(t,n,e),t.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),this.invertAlpha?i.stencilFunc(i.NOTEQUAL,r,o):i.stencilFunc(i.EQUAL,r,o)},postRenderWebGL:function(t){const e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();const s=t.currentMask;if(0===t.maskStack.length)s.mask=null,e.disable(e.STENCIL_TEST);else{const e=t.maskStack[t.maskStack.length-1];e.mask.applyStencil(t,e.camera,!1),t.currentCameraMask.mask!==e.mask?(s.mask=e.mask,s.camera=e.camera):s.mask=null}},preRenderCanvas:function(t,e,s){const i=this.geometryMask;t.currentContext.save(),i.renderCanvas(t,i,s,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=i},7340:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e){void 0===e&&(e=1),n.call(this,r.BARREL,t),this.amount=e}});t.exports=o},5170:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o,a,h){void 0===s&&(s=1),void 0===i&&(i=1),void 0===o&&(o=1),void 0===a&&(a=1),void 0===h&&(h=4),n.call(this,r.BLOOM,t),this.steps=h,this.offsetX=s,this.offsetY=i,this.blurStrength=o,this.strength=a,this.glcolor=[1,1,1],null!=e&&(this.color=e)},color:{get:function(){const t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){const e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=o},4199:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o,a,h){void 0===e&&(e=0),void 0===s&&(s=2),void 0===i&&(i=2),void 0===o&&(o=1),void 0===h&&(h=4),n.call(this,r.BLUR,t),this.quality=0,this.x=s,this.y=i,this.steps=h,this.strength=o,this.glcolor=[1,1,1],null!=a&&(this.color=a)},color:{get:function(){const t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){const e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=o},3132:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o,a,h,l){void 0===e&&(e=.5),void 0===s&&(s=1),void 0===i&&(i=.2),void 0===o&&(o=!1),void 0===a&&(a=1),void 0===h&&(h=1),void 0===l&&(l=1),n.call(this,r.BOKEH,t),this.radius=e,this.amount=s,this.contrast=i,this.isTiltShift=o,this.strength=l,this.blurX=a,this.blurY=h}});t.exports=o},6610:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o,a){void 0===e&&(e=8),void 0===o&&(o=1),void 0===a&&(a=.005),n.call(this,r.CIRCLE,t),this.scale=o,this.feather=a,this.thickness=e,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],null!=s&&(this.color=s),null!=i&&(this.backgroundColor=i)},color:{get:function(){const t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){const e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundColor:{get:function(){const t=this.glcolor2;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){const e=this.glcolor2;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=o},4931:(t,e,s)=>{const i=s(7473),n=s(5686),r=s(1571),o=new i({Extends:n,initialize:function(t){n.call(this),this.type=r.COLOR_MATRIX,this.gameObject=t,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});t.exports=o},6128:(t,e,s)=>{const i=new(s(7473))({initialize:function(t,e){this.type=t,this.gameObject=e,this.active=!0},setActive:function(t){return this.active=t,this},destroy:function(){this.gameObject=null,this.active=!1}});t.exports=i},9195:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i){void 0===e&&(e="__WHITE"),void 0===s&&(s=.005),void 0===i&&(i=.005),n.call(this,r.DISPLACEMENT,t),this.x=s,this.y=i,this.glTexture,this.setTexture(e)},setTexture:function(t){const e=this.gameObject.scene.sys.textures.getFrame(t);return e&&(this.glTexture=e.glTexture),this}});t.exports=o},445:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o){void 0===s&&(s=4),void 0===i&&(i=0),void 0===o&&(o=!1),n.call(this,r.GLOW,t),this.outerStrength=s,this.innerStrength=i,this.knockout=o,this.glcolor=[1,1,1,1],void 0!==e&&(this.color=e)},color:{get:function(){const t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){const e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=o},7724:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o,a,h,l,c){void 0===i&&(i=.2),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=1),void 0===c&&(c=0),n.call(this,r.GRADIENT,t),this.alpha=i,this.size=c,this.fromX=o,this.fromY=a,this.toX=h,this.toY=l,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],null!=e&&(this.color1=e),null!=s&&(this.color2=s)},color1:{get:function(){const t=this.glcolor1;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){const e=this.glcolor1;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}},color2:{get:function(){const t=this.glcolor2;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){const e=this.glcolor2;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}}});t.exports=o},4412:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e){void 0===e&&(e=1),n.call(this,r.PIXELATE,t),this.amount=e}});t.exports=o},75:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o,a,h,l){void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=.1),void 0===o&&(o=1),void 0===h&&(h=6),void 0===l&&(l=1),n.call(this,r.SHADOW,t),this.x=e,this.y=s,this.decay=i,this.power=o,this.glcolor=[0,0,0,1],this.samples=h,this.intensity=l,void 0!==a&&(this.color=a)},color:{get:function(){const t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){const e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=o},8734:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o){void 0===e&&(e=.5),void 0===s&&(s=.5),void 0===i&&(i=3),void 0===o&&(o=!1),n.call(this,r.SHINE,t),this.speed=e,this.lineWidth=s,this.gradient=i,this.reveal=o}});t.exports=o},2437:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o){void 0===e&&(e=.5),void 0===s&&(s=.5),void 0===i&&(i=.5),void 0===o&&(o=.5),n.call(this,r.VIGNETTE,t),this.x=e,this.y=s,this.radius=i,this.strength=o}});t.exports=o},5984:(t,e,s)=>{const i=s(7473),n=s(6128),r=s(1571),o=new i({Extends:n,initialize:function(t,e,s,i,o){void 0===e&&(e=.1),void 0===s&&(s=0),void 0===i&&(i=0),void 0===o&&(o=!1),n.call(this,r.WIPE,t),this.progress=0,this.wipeWidth=e,this.direction=s,this.axis=i,this.reveal=o}});t.exports=o},1571:t=>{t.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},7347:(t,e,s)=>{let i=s(1030),n=s(1571),r={Barrel:s(7340),Controller:s(6128),Bloom:s(5170),Blur:s(4199),Bokeh:s(3132),Circle:s(6610),ColorMatrix:s(4931),Displacement:s(9195),Glow:s(445),Gradient:s(7724),Pixelate:s(4412),Shadow:s(75),Shine:s(8734),Vignette:s(2437),Wipe:s(5984)};r=i(!1,r,n),t.exports=r},2494:(t,e,s)=>{const i=s(8351),n=s(8361);t.exports=function(t,e,s){e.x=n(s,"x",0),e.y=n(s,"y",0),e.depth=n(s,"depth",0),e.flipX=n(s,"flipX",!1),e.flipY=n(s,"flipY",!1);const r=n(s,"scale",null);"number"==typeof r?e.setScale(r):null!==r&&(e.scaleX=n(r,"x",1),e.scaleY=n(r,"y",1));const o=n(s,"scrollFactor",null);"number"==typeof o?e.setScrollFactor(o):null!==o&&(e.scrollFactorX=n(o,"x",1),e.scrollFactorY=n(o,"y",1)),e.rotation=n(s,"rotation",0);const a=n(s,"angle",null);null!==a&&(e.angle=a),e.alpha=n(s,"alpha",1);const h=n(s,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){const t=n(h,"x",.5),s=n(h,"y",.5);e.setOrigin(t,s)}return e.blendMode=n(s,"blendMode",i.NORMAL),e.visible=n(s,"visible",!0),n(s,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},2273:(t,e,s)=>{var i=s(7473),n=s(6125),r=s(1081),o=s(4399),a=s(3389),h=s(204),l=new i({Extends:o,initialize:function(t,e){o.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(t,e){return this.data||(this.data=new r(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new r(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new r(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new r(this)),this.data.get(t)},setInteractive:function(t,e,s){return this.scene.sys.input.enable(this,t,e,s),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(t){return!(this.displayList&&this.displayList.active&&!this.displayList.willRender(t)||l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,s=[];e&&(s.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?s.unshift(this.displayList.getIndex(t)):s.unshift(this.scene.sys.displayList.getIndex(t)),s},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){const t=this.displayList||this.scene.sys.displayList;return t&&t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,t.exports=l},3649:(t,e,s)=>{const i=s(7473),n=s(8456),r=s(204),o=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},n.register("GameObjectFactory",o,"add"),t.exports=o},2208:(t,e,s)=>{const i=s(4227),n=new i,r=new i,o=new i,a={camera:n,sprite:r,calc:o};t.exports=function(t,e,s){const i=n,h=r,l=o;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),i.copyFrom(e.matrix),s?(i.multiplyWithOffset(s,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),i.multiply(h,l),a}},4344:(t,e,s)=>{const i=s(2915),n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,s,n){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=i(t,0,1),this._alphaTR=i(e,0,1),this._alphaBL=i(s,0,1),this._alphaBR=i(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){const e=i(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){const e=i(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){const e=i(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){const e=i(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){const e=i(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=n},4518:(t,e,s)=>{const i=s(2915),n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){const e=i(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=n},5173:(t,e,s)=>{const i=s(8351),n={_blendMode:i.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=i[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=n},1991:t=>{t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},8305:t=>{t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,s,i){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,s,i,this.flipX,this.flipY);else{const e=t;this.frame.setCropUVs(this._crop,e.x,e.y,e.width,e.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},3131:t=>{t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},1626:(t,e,s)=>{const i=s(7473),n=s(7347),r=s(8935),o=new i({initialize:function(t,e){this.gameObject=t,this.isPost=e,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(t){return void 0===t&&(t=0),this.padding=t,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(t){if(!this.isPost){const e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,void 0!==t&&(this.padding=t),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(let t=this.list,e=0;e<t.length;e++)t[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(t){let e;if(this.isPost){let s=this.gameObject.getPostPipeline(String(t.type));for(Array.isArray(s)||(s=[s]),e=0;e<s.length;e++){const i=s[e];if(i.controller===t){this.gameObject.removePostPipeline(i),t.destroy();break}}}else{const s=this.list;for(e=0;e<s.length;e++)s[e]===t&&(r(s,e),t.destroy())}return this.gameObject},disable:function(t){return void 0===t&&(t=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,t&&this.clear(),this.gameObject},add:function(t,e){if(!this.isPost)return this.enabled||this.enable(),this.list.push(t),t;const s=String(t.type);this.gameObject.setPostPipeline(s,e);let i=this.gameObject.getPostPipeline(s);return i?(Array.isArray(i)&&(i=i.pop()),i.controller=t,t):void 0},addGlow:function(t,e,s,i,r,o){return this.add(new n.Glow(this.gameObject,t,e,s,i),{quality:r,distance:o})},addShadow:function(t,e,s,i,r,o,a){return this.add(new n.Shadow(this.gameObject,t,e,s,i,r,o,a))},addPixelate:function(t){return this.add(new n.Pixelate(this.gameObject,t))},addVignette:function(t,e,s,i){return this.add(new n.Vignette(this.gameObject,t,e,s,i))},addShine:function(t,e,s,i){return this.add(new n.Shine(this.gameObject,t,e,s,i))},addBlur:function(t,e,s,i,r,o){return this.add(new n.Blur(this.gameObject,t,e,s,i,r,o))},addGradient:function(t,e,s,i,r,o,a,h){return this.add(new n.Gradient(this.gameObject,t,e,s,i,r,o,a,h))},addBloom:function(t,e,s,i,r,o){return this.add(new n.Bloom(this.gameObject,t,e,s,i,r,o))},addColorMatrix:function(){return this.add(new n.ColorMatrix(this.gameObject))},addCircle:function(t,e,s,i,r){return this.add(new n.Circle(this.gameObject,t,e,s,i,r))},addBarrel:function(t){return this.add(new n.Barrel(this.gameObject,t))},addDisplacement:function(t,e,s){return this.add(new n.Displacement(this.gameObject,t,e,s))},addWipe:function(t,e,s){return this.add(new n.Wipe(this.gameObject,t,e,s))},addReveal:function(t,e,s){return this.add(new n.Wipe(this.gameObject,t,e,s,!0))},addBokeh:function(t,e,s){return this.add(new n.Bokeh(this.gameObject,t,e,s))},addTiltShift:function(t,e,s,i,r,o){return this.add(new n.Bokeh(this.gameObject,t,e,s,!0,i,r,o))},destroy:function(){this.clear(),this.gameObject=null}});t.exports=o},9660:t=>{t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},3671:(t,e,s)=>{const i=s(1392),n=s(9876),r=s(2529),o={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&n(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t,e){return void 0===t&&(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getTopLeft:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new r),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){let e,s,n,r,o,a,h,l;if(void 0===t&&(t=new i),this.parentContainer){const i=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),i.transformPoint(t.x,t.y,t),e=t.x,s=t.y,this.getTopRight(t),i.transformPoint(t.x,t.y,t),n=t.x,r=t.y,this.getBottomLeft(t),i.transformPoint(t.x,t.y,t),o=t.x,a=t.y,this.getBottomRight(t),i.transformPoint(t.x,t.y,t),h=t.x,l=t.y}else this.getTopLeft(t),e=t.x,s=t.y,this.getTopRight(t),n=t.x,r=t.y,this.getBottomLeft(t),o=t.x,a=t.y,this.getBottomRight(t),h=t.x,l=t.y;return t.x=Math.min(e,n,o,h),t.y=Math.min(s,r,a,l),t.width=Math.max(e,n,o,h)-t.x,t.height=Math.max(s,r,a,l)-t.y,t}};t.exports=o},2246:(t,e,s)=>{const i=s(7499),n=s(6726),r={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t,e,s,n,r){return void 0===t&&(this.texture||this.shader||this.geom)&&(t=this),new i(this.scene,t,e,s,n,r)},createGeometryMask:function(t){return void 0!==t||"Graphics"!==this.type&&!this.geom||(t=this),new n(this.scene,t)}};t.exports=r},5085:t=>{t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},77:(t,e,s)=>{const i=s(7149),n=s(1864),r=s(5851),o=s(3747),a=s(2529),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);const s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){const t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);const s=this.pathTween;s&&s.isPlaying()&&s.stop(),"number"==typeof t&&(t={duration:t}),t.from=r(t,"from",0),t.to=r(t,"to",1);const h=n(t,"positionOnPath",!1);this.rotateToPath=n(t,"rotateToPath",!1),this.pathRotationOffset=r(t,"rotationOffset",0);const l=r(t,"startAt",e);if(l&&(t.onStart=function(t){const e=t.data[0];e.progress=l,e.elapsed=e.duration*l;const s=e.ease(e.progress);e.current=e.start+(e.end-e.start)*s,e.setTargetValue()}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),t.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){const t=this.path.getPoint(.1);this.rotation=Math.atan2(t.y-this.y,t.x-this.x)+i(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){const t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){const t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){const t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){const t=this.pathTween;if(t){const e=t.data[0],s=this.pathDelta,n=this.pathVector;if(s.copy(n).negate(),e.state===o.COMPLETE)return this.path.getPoint(e.end,n),s.add(n),n.add(this.pathOffset),void this.setPosition(n.x,n.y);if(e.state!==o.PLAYING_FORWARD&&e.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),n),s.add(n),n.add(this.pathOffset);const r=this.x,a=this.y;this.setPosition(n.x,n.y);const h=this.x-r,l=this.y-a;if(0===h&&0===l)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(l,h)+i(this.pathRotationOffset))}}};t.exports=h},986:(t,e,s)=>{const i=s(3911),n={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(t){this.pipelineData={};const e=this.scene.sys.renderer;if(!e)return!1;const s=e.pipelines;if(s){void 0===t&&(t=s.default);const e=s.get(t);if(e)return this.defaultPipeline=e,this.pipeline=e,!0}return!1},setPipeline:function(t,e,s){const n=this.scene.sys.renderer;if(!n)return this;const r=n.pipelines;if(r){const n=r.get(t);n&&(this.pipeline=n),e&&(this.pipelineData=s?i(e):e)}return this},setPipelineData:function(t,e){const s=this.pipelineData;return void 0===e?delete s[t]:s[t]=e,this},resetPipeline:function(t){return void 0===t&&(t=!1),this.pipeline=this.defaultPipeline,t&&(this.pipelineData={}),null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};t.exports=n},4461:(t,e,s)=>{const i=s(3911),n=s(1626),r=s(8935),o={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(t){this.postPipelines=[],this.postPipelineData={},this.postFX=new n(this,!0),t&&(this.preFX=new n(this,!1))},setPostPipeline:function(t,e,s){const n=this.scene.sys.renderer;if(!n)return this;const r=n.pipelines;if(r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++){const i=r.getPostPipeline(t[s],this,e);i&&this.postPipelines.push(i)}e&&(this.postPipelineData=s?i(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(t,e){const s=this.postPipelineData;return void 0===e?delete s[t]:s[t]=e,this},getPostPipeline:function(t){for(var e="string"==typeof t,s=this.postPipelines,i=[],n=0;n<s.length;n++){const r=s[n];(e&&r.name===t||!e&&r instanceof t)&&i.push(r)}return 1===i.length?i[0]:i},resetPostPipeline:function(t){void 0===t&&(t=!1);for(let t=this.postPipelines,e=0;e<t.length;e++)t[e].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.postPipelineData={})},removePostPipeline:function(t){for(let e="string"==typeof t,s=this.postPipelines,i=s.length-1;i>=0;i--){const n=s[i];(e&&n.name===t||!e&&n===t)&&(n.destroy(),r(s,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};t.exports=o},4627:t=>{t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},1868:t=>{const e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;const e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=e},4976:(t,e,s)=>{const i=s(2362),n={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,s){return void 0===e&&(e=!0),void 0===s&&(s=!0),t instanceof i?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},9243:(t,e,s)=>{const i=s(2362),n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,s,i){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,s,i,this.flipX,this.flipY);else{const e=t;this.frame.setCropUVs(this._crop,e.x,e.y,e.width,e.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,s){return void 0===e&&(e=!0),void 0===s&&(s=!0),t instanceof i?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},5693:t=>{t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,s,i){return void 0===t&&(t=16777215),void 0===e&&(e=t,s=t,i=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=s,this.tintBottomRight=i,this.tintFill=!1,this},setTintFill:function(t,e,s,i){return this.setTint(t,e,s,i),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){const t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},6125:t=>{t.exports=function(t){const e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},3212:(t,e,s)=>{const i=s(7425),n=s(4227),r=s(7556),o=s(3692),a=s(2820),h=s(2529),l={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:0!==this._scaleY&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:0!==this._scaleX&&(this.renderFlags|=4)}},angle:{get:function(){return a(this._rotation*i.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*i.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=o(t)}},setPosition:function(t,e,s,i){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===s&&(s=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=s,this.w=i,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,s,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===s&&(s=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),this.x=t+Math.random()*s,this.y=e+Math.random()*i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new n);let s=this.parentContainer;if(!s)return this.getLocalTransformMatrix(t);for(e||(e=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);s;)e.applyITRS(s.x,s.y,s._rotation,s._scaleX,s._scaleY),e.multiply(t,t),s=s.parentContainer;return t},getLocalPoint:function(t,e,s,i){s||(s=new h),i||(i=this.scene.sys.cameras.main);const n=i.scrollX,o=i.scrollY,a=t+n*this.scrollFactorX-n,l=e+o*this.scrollFactorY-o;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,l,s):r(a,l,this.x,this.y,this.rotation,this.scaleX,this.scaleY,s),this._originComponent&&(s.x+=this._displayOriginX,s.y+=this._displayOriginY),s},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=l},4227:(t,e,s)=>{const i=s(7473),n=s(7425),r=s(2529),o=new i({initialize:function(t,e,s,i,n,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=0),this.matrix=new Float32Array([t,e,s,i,n,r,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){const t=this.matrix,e=t[0],s=t[1],i=t[2],r=t[3];return e||s?s>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):i||r?n.TAU-(r>0?Math.acos(-i/this.scaleY):-Math.acos(i/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){const t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){const s=this.matrix;return s[4]=s[0]*t+s[2]*e+s[4],s[5]=s[1]*t+s[3]*e+s[5],this},scale:function(t,e){const s=this.matrix;return s[0]*=t,s[1]*=t,s[2]*=e,s[3]*=e,this},rotate:function(t){const e=Math.sin(t),s=Math.cos(t),i=this.matrix,n=i[0],r=i[1],o=i[2],a=i[3];return i[0]=n*s+o*e,i[1]=r*s+a*e,i[2]=n*-e+o*s,i[3]=r*-e+a*s,this},multiply:function(t,e){const s=this.matrix,i=t.matrix,n=s[0],r=s[1],o=s[2],a=s[3],h=s[4],l=s[5],c=i[0],u=i[1],d=i[2],f=i[3],p=i[4],m=i[5],g=void 0===e?s:e.matrix;return g[0]=c*n+u*o,g[1]=c*r+u*a,g[2]=d*n+f*o,g[3]=d*r+f*a,g[4]=p*n+m*o+h,g[5]=p*r+m*a+l,g},multiplyWithOffset:function(t,e,s){const i=this.matrix,n=t.matrix,r=i[0],o=i[1],a=i[2],h=i[3],l=e*r+s*a+i[4],c=e*o+s*h+i[5],u=n[0],d=n[1],f=n[2],p=n[3],m=n[4],g=n[5];return i[0]=u*r+d*a,i[1]=u*o+d*h,i[2]=f*r+p*a,i[3]=f*o+p*h,i[4]=m*r+g*a+l,i[5]=m*o+g*h+c,this},transform:function(t,e,s,i,n,r){const o=this.matrix,a=o[0],h=o[1],l=o[2],c=o[3],u=o[4],d=o[5];return o[0]=t*a+e*l,o[1]=t*h+e*c,o[2]=s*a+i*l,o[3]=s*h+i*c,o[4]=n*a+r*l+u,o[5]=n*h+r*c+d,this},transformPoint:function(t,e,s){void 0===s&&(s={x:0,y:0});const i=this.matrix,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],l=i[5];return s.x=t*n+e*o+h,s.y=t*r+e*a+l,s},invert:function(){const t=this.matrix,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=e*n-s*i;return t[0]=n/a,t[1]=-s/a,t[2]=-i/a,t[3]=e/a,t[4]=(i*o-n*r)/a,t[5]=-(e*o-s*r)/a,this},copyFrom:function(t){const e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){const e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){const e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){const e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){const e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,s,i,n,r){const o=this.matrix;return o[0]=t,o[1]=e,o[2]=s,o[3]=i,o[4]=n,o[5]=r,this},decomposeMatrix:function(){const t=this.decomposedMatrix,e=this.matrix,s=e[0],i=e[1],n=e[2],r=e[3],o=s*r-i*n;if(t.translateX=e[4],t.translateY=e[5],s||i){const e=Math.sqrt(s*s+i*i);t.rotation=i>0?Math.acos(s/e):-Math.acos(s/e),t.scaleX=e,t.scaleY=o/e}else if(n||r){const e=Math.sqrt(n*n+r*r);t.rotation=.5*Math.PI-(r>0?Math.acos(-n/e):-Math.acos(n/e)),t.scaleX=o/e,t.scaleY=e}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,s,i,n){const r=this.matrix,o=Math.sin(s),a=Math.cos(s);return r[4]=t,r[5]=e,r[0]=a*i,r[1]=o*i,r[2]=-o*n,r[3]=a*n,this},applyInverse:function(t,e,s){void 0===s&&(s=new r);const i=this.matrix,n=i[0],o=i[1],a=i[2],h=i[3],l=i[4],c=i[5],u=1/(n*h+a*-o);return s.x=h*u*t+-a*u*e+(c*a-l*h)*u,s.y=n*u*e+-o*u*t+(-c*n+l*o)*u,s},setQuad:function(t,e,s,i,n,r){void 0===r&&(r=this.quad);const o=this.matrix,a=o[0],h=o[1],l=o[2],c=o[3],u=o[4],d=o[5];return r[0]=t*a+e*l+u,r[1]=t*h+e*c+d,r[2]=t*a+i*l+u,r[3]=t*h+i*c+d,r[4]=s*a+i*l+u,r[5]=s*h+i*c+d,r[6]=s*a+e*l+u,r[7]=s*h+e*c+d,n&&r.forEach((function(t,e){r[e]=Math.round(t)})),r},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,s){let i=this.getX(t,e);return s&&(i=Math.round(i)),i},getYRound:function(t,e,s){let i=this.getY(t,e);return s&&(i=Math.round(i)),i},getCSSMatrix:function(){const t=this.matrix;return`matrix(${t[0]},${t[1]},${t[2]},${t[3]},${t[4]},${t[5]})`},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});t.exports=o},8414:t=>{t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},4286:(t,e,s)=>{t.exports={Alpha:s(4344),AlphaSingle:s(4518),BlendMode:s(5173),ComputedSize:s(1991),Crop:s(8305),Depth:s(3131),Flip:s(9660),FX:s(1626),GetBounds:s(3671),Mask:s(2246),Origin:s(5085),PathFollower:s(77),Pipeline:s(986),PostPipeline:s(4461),ScrollFactor:s(4627),Size:s(1868),Texture:s(4976),TextureCrop:s(9243),Tint:s(5693),ToJSON:s(6125),Transform:s(3212),TransformMatrix:s(4227),Visible:s(8414)}},7361:(t,e,s)=>{const i=s(1953),n=s(8351),r=s(7473),o=s(4286),a=s(3389),h=s(2273),l=s(1392),c=s(3232),u=s(9422),d=s(2529),f=new r({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.PostPipeline,o.Transform,o.Visible,c],initialize:function(t,e,s,i){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(e,s),this.setBlendMode(n.SKIP_CHECK),i&&this.add(i)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer){const e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){let e=this.list,s=new l,i=!1;t.setEmpty();for(let n=0;n<e.length;n++){const r=e[n];r.getBounds&&(r.getBounds(s),i?u(s,t,t):(t.setTo(s.x,s.y,s.width,s.height),i=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this,t.removeFromDisplayList(),t.addedToScene())},removeHandler:function(t){t.off(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer=null,t.removedFromScene(),t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):(e.x=t.x,e.y=t.y);const s=this.tempTransformMatrix;return s.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),s.invert(),s.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return i.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return i.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,s){return e[t]-s[t]}),i.StableSort(this.list,e),this):this},getByName:function(t){return i.GetFirst(this.list,"name",t)},getRandom:function(t,e){return i.GetRandom(this.list,t,e)},getFirst:function(t,e,s,n){return i.GetFirst(this.list,t,e,s,n)},getAll:function(t,e,s,n){return i.GetAll(this.list,t,e,s,n)},count:function(t,e,s,n){return i.CountAllMatching(this.list,t,e,s,n)},swap:function(t,e){return i.Swap(this.list,t,e),this},moveTo:function(t,e){return i.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return i.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return i.MoveBelow(this.list,t,e),this},remove:function(t,e){let s=i.Remove(this.list,t,this.removeHandler,this);if(e&&s){Array.isArray(s)||(s=[s]);for(let t=0;t<s.length;t++)s[t].destroy()}return this},removeAt:function(t,e){const s=i.RemoveAt(this.list,t,this.removeHandler,this);return e&&s&&s.destroy(),this},removeBetween:function(t,e,s){const n=i.RemoveBetween(this.list,t,e,this.removeHandler,this);if(s)for(let t=0;t<n.length;t++)n[t].destroy();return this},removeAll:function(t){const e=this.list;if(t){for(let t=0;t<e.length;t++)e[t]&&e[t].scene&&(e[t].off(a.DESTROY,this.remove,this),e[t].destroy());this.list=[]}else i.RemoveBetween(e,0,e.length,this.removeHandler,this);return this},bringToTop:function(t){return i.BringToTop(this.list,t),this},sendToBack:function(t){return i.SendToBack(this.list,t),this},moveUp:function(t){return i.MoveUp(this.list,t),this},moveDown:function(t){return i.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(t,e,s){return i.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),s&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,s,n){return i.SetAll(this.list,t,e,s,n),this},each:function(t,e){let s,i=[null],n=this.list.slice(),r=n.length;for(s=2;s<arguments.length;s++)i.push(arguments[s]);for(s=0;s<r;s++)i[0]=n[s],t.apply(e,i);return this},iterate:function(t,e){let s,i=[null];for(s=2;s<arguments.length;s++)i.push(arguments[s]);for(s=0;s<this.list.length;s++)i[0]=this.list[s],t.apply(e,i);return this},setScrollFactor:function(t,e,s){return void 0===e&&(e=t),void 0===s&&(s=!1),this.scrollFactorX=t,this.scrollFactorY=e,s&&(i.SetAll(this.list,"scrollFactorX",t),i.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=f},2840:t=>{t.exports=function(t,e,s,i){s.addToRenderList(e);const n=e.list;if(0!==n.length){const r=e.localTransform;i?(r.loadIdentity(),r.multiply(i),r.translate(e.x,e.y),r.rotate(e.rotation),r.scale(e.scaleX,e.scaleY)):r.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);const o=-1!==e.blendMode;o||t.setBlendMode(0);const a=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,s);for(let e=0;e<n.length;e++){const i=n[e];if(i.willRender(s)){const e=i.alpha,n=i.scrollFactorX,c=i.scrollFactorY;o||i.blendMode===t.currentBlendMode||t.setBlendMode(i.blendMode),i.setScrollFactor(n*h,c*l),i.setAlpha(e*a),i.renderCanvas(t,i,s,r),i.setAlpha(e),i.setScrollFactor(n,c)}}e.mask&&e.mask.postRenderCanvas(t)}}},3232:(t,e,s)=>{let i=s(1984),n=i,r=i;n=s(4343),r=s(2840),t.exports={renderWebGL:n,renderCanvas:r}},4343:t=>{t.exports=function(t,e,s,i){s.addToRenderList(e);const n=e.list,r=n.length;if(0!==r){const c=e.localTransform;i?(c.loadIdentity(),c.multiply(i),c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(e.scaleX,e.scaleY)):c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);const u=-1!==e.blendMode;u||t.setBlendMode(0);for(let i=e.alpha,d=e.scrollFactorX,f=e.scrollFactorY,p=0;p<r;p++){const m=n[p];if(m.willRender(s)){var o,a,h,l;if(void 0!==m.alphaTopLeft)o=m.alphaTopLeft,a=m.alphaTopRight,h=m.alphaBottomLeft,l=m.alphaBottomRight;else{const t=m.alpha;o=t,a=t,h=t,l=t}const g=m.scrollFactorX,x=m.scrollFactorY;u||m.blendMode===t.currentBlendMode||t.setBlendMode(m.blendMode);const w=m.mask;w&&w.preRenderWebGL(t,m,s);const y=m.type;y!==t.currentType&&(t.newType=!0,t.currentType=y),t.nextTypeMatch=p<r-1&&n[p+1].type===t.currentType,m.setScrollFactor(g*d,x*f),m.setAlpha(o*i,a*i,h*i,l*i),m.renderWebGL(t,m,s,c,e),m.setAlpha(o,a,h,l),m.setScrollFactor(g,x),w&&w.postRenderWebGL(t,s),t.newType=!1}}t.pipelines.postBatch(e)}}},6608:t=>{t.exports="addedtoscene"},4265:t=>{t.exports="destroy"},8671:t=>{t.exports="removedfromscene"},3420:t=>{t.exports="complete"},601:t=>{t.exports="created"},7919:t=>{t.exports="error"},6231:t=>{t.exports="locked"},5241:t=>{t.exports="loop"},8325:t=>{t.exports="playing"},3356:t=>{t.exports="play"},7513:t=>{t.exports="seeked"},5788:t=>{t.exports="seeking"},7111:t=>{t.exports="stalled"},8118:t=>{t.exports="stop"},9184:t=>{t.exports="textureready"},4287:t=>{t.exports="unlocked"},857:t=>{t.exports="unsupported"},3389:(t,e,s)=>{t.exports={ADDED_TO_SCENE:s(6608),DESTROY:s(4265),REMOVED_FROM_SCENE:s(8671),VIDEO_COMPLETE:s(3420),VIDEO_CREATED:s(601),VIDEO_ERROR:s(7919),VIDEO_LOCKED:s(6231),VIDEO_LOOP:s(5241),VIDEO_PLAY:s(3356),VIDEO_PLAYING:s(8325),VIDEO_SEEKED:s(7513),VIDEO_SEEKING:s(5788),VIDEO_STALLED:s(7111),VIDEO_STOP:s(8118),VIDEO_TEXTURE:s(9184),VIDEO_UNLOCKED:s(4287),VIDEO_UNSUPPORTED:s(857)}},1643:t=>{t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},8881:(t,e,s)=>{const i=s(7655);t.exports=function(t,e,s){return void 0===s&&(s=new i),s.x=t.x1+(t.x2-t.x1)*e,s.y=t.y1+(t.y2-t.y1)*e,s}},4479:(t,e,s)=>{const i=s(4771),n=s(7655);t.exports=function(t,e,s,r){void 0===r&&(r=[]),!e&&s>0&&(e=i(t)/s);for(let s=t.x1,i=t.y1,o=t.x2,a=t.y2,h=0;h<e;h++){const t=h/e,l=s+(o-s)*t,c=i+(a-i)*t;r.push(new n(l,c))}return r}},4771:t=>{t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},284:(t,e,s)=>{const i=s(7473),n=s(8881),r=s(4479),o=s(1643),a=s(3915),h=s(2529),l=new i({initialize:function(t,e,s,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=0),this.type=o.LINE,this.x1=t,this.y1=e,this.x2=s,this.y2=i},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,s){return r(this,t,e,s)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,s,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=0),this.x1=t,this.y1=e,this.x2=s,this.y2=i,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=l},3915:(t,e,s)=>{const i=s(7655);t.exports=function(t,e){void 0===e&&(e=new i);const s=Math.random();return e.x=t.x1+s*(t.x2-t.x1),e.y=t.y1+s*(t.y2-t.y1),e}},7655:(t,e,s)=>{const i=s(7473),n=s(1643),r=new i({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=n.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=r},5956:t=>{t.exports=function(t,e,s){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=s&&t.y+t.height>=s}},716:(t,e,s)=>{const i=s(7120),n=s(7655);t.exports=function(t,e,s){if(void 0===s&&(s=new n),e<=0||e>=1)return s.x=t.x,s.y=t.y,s;let r=i(t)*e;return e>.5?(r-=t.width+t.height)<=t.width?(s.x=t.right-r,s.y=t.bottom):(s.x=t.x,s.y=t.bottom-(r-t.width)):r<=t.width?(s.x=t.x+r,s.y=t.y):(s.x=t.right,s.y=t.y+(r-t.width)),s}},8151:(t,e,s)=>{const i=s(716),n=s(7120);t.exports=function(t,e,s,r){void 0===r&&(r=[]),!e&&s>0&&(e=n(t)/s);for(let s=0;s<e;s++){const n=s/e;r.push(i(t,n))}return r}},7120:t=>{t.exports=function(t){return 2*(t.width+t.height)}},2161:(t,e,s)=>{const i=s(7655);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},1392:(t,e,s)=>{const i=s(7473),n=s(5956),r=s(716),o=s(8151),a=s(1643),h=s(284),l=s(2161),c=new i({initialize:function(t,e,s,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=s,this.height=i},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,s){return o(this,t,e,s)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,s,i){return this.x=t,this.y=e,this.width=s,this.height=i,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},9422:(t,e,s)=>{const i=s(1392);t.exports=function(t,e,s){void 0===s&&(s=new i);const n=Math.min(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.right,e.right)-n,a=Math.max(t.bottom,e.bottom)-r;return s.setTo(n,r,o,a)}},1593:(t,e,s)=>{const i=s(7473),n=s(4359),r=s(1179),o=s(4597),a=s(5593),h=s(7410),l=s(5874),c=s(707),u=new i({initialize:function(t,e){if(this.loader=t,this.cache=o(e,"cache",!1),this.type=o(e,"type",!1),!this.type)throw new Error(`Invalid File type: ${this.type}`);this.key=o(e,"key",!1);const s=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+s),!this.key)throw new Error(`Invalid File key: ${this.key}`);let i=o(e,"url");void 0===i?i=`${t.path+s}.${o(e,"extension","")}`:"string"!=typeof i||i.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)||(i=t.path+i),this.url=i,this.src="",this.xhrSettings=c(o(e,"responseType",void 0)),o(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,o(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn(`Local data URIs are not supported: ${this.key}`):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(t,e){let s=t.responseURL&&this.loader.localSchemes.some((function(e){return 0===t.responseURL.indexOf(e)}))&&0===e.target.status,i=!(e.target&&200!==e.target.status)||s;4===t.readyState&&t.status>=400&&t.status<=599&&(i=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,i)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(t){if(this.state!==n.FILE_PENDING_DESTROY){void 0===t&&(t=this.data);const e=this.key,s=this.type;this.loader.emit(r.FILE_COMPLETE,e,s,t),this.loader.emit(`${r.FILE_KEY_COMPLETE+s}-${e}`,e,s,t),this.loader.flagForRemoval(this),this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});u.createObjectURL=function(t,e,s){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{const i=new FileReader;i.onload=function(){t.removeAttribute("crossOrigin"),t.src=`data:${e.type||s};base64,${i.result.split(",")[1]}`},i.onerror=t.onerror,i.readAsDataURL(e)}},u.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=u},9845:t=>{let e={},s={install:function(t){for(const s in e)t[s]=e[s]},register:function(t,s){e[t]=s},destroy:function(){e={}}};t.exports=s},5593:t=>{t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},7410:(t,e,s)=>{const i=s(1030),n=s(707);t.exports=function(t,e){const s=void 0===t?n():i({},t);if(e)for(const t in e)void 0!==e[t]&&(s[t]=e[t]);return s}},3137:(t,e,s)=>{const i=s(7473),n=s(4359),r=s(1179),o=new i({initialize:function(t,e,s,i){const r=[];i.forEach((function(t){t&&r.push(t)})),this.loader=t,this.type=e,this.key=s,this.multiKeyIndex=t.multiKeyIndex++,this.files=r,this.state=n.FILE_PENDING,this.complete=!1,this.pending=r.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(let t=0;t<r.length;t++)r[t].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,t.type,t.key))},pendingDestroy:function(){if(this.state!==n.FILE_PENDING_DESTROY){const t=this.key,e=this.type;this.loader.emit(r.FILE_COMPLETE,t,e),this.loader.emit(`${r.FILE_KEY_COMPLETE+e}-${t}`,t,e),this.loader.flagForRemoval(this);for(let t=0;t<this.files.length;t++)this.files[t].pendingDestroy();this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});t.exports=o},5874:(t,e,s)=>{const i=s(7410);t.exports=function(t,e){const s=i(e,t.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",t.src,s.async,s.user,s.password),n.responseType=t.xhrSettings.responseType,n.timeout=s.timeout,s.headers)for(const t in s.headers)n.setRequestHeader(t,s.headers[t]);return s.header&&s.headerValue&&n.setRequestHeader(s.header,s.headerValue),s.requestedWith&&n.setRequestHeader("X-Requested-With",s.requestedWith),s.overrideMimeType&&n.overrideMimeType(s.overrideMimeType),s.withCredentials&&(n.withCredentials=!0),n.onload=t.onLoad.bind(t,n),n.onerror=t.onError.bind(t,n),n.onprogress=t.onProgress.bind(t),n.send(),n}},707:t=>{t.exports=function(t,e,s,i,n,r){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===s&&(s=""),void 0===i&&(i=""),void 0===n&&(n=0),void 0===r&&(r=!1),{responseType:t,async:e,user:s,password:i,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}}},4359:t=>{t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},462:t=>{t.exports="addfile"},7297:t=>{t.exports="complete"},8660:t=>{t.exports="filecomplete"},6484:t=>{t.exports="filecomplete-"},7972:t=>{t.exports="loaderror"},1906:t=>{t.exports="load"},1441:t=>{t.exports="fileprogress"},1072:t=>{t.exports="postprocess"},1927:t=>{t.exports="progress"},6597:t=>{t.exports="start"},1179:(t,e,s)=>{t.exports={ADD:s(462),COMPLETE:s(7297),FILE_COMPLETE:s(8660),FILE_KEY_COMPLETE:s(6484),FILE_LOAD_ERROR:s(7972),FILE_LOAD:s(1906),FILE_PROGRESS:s(1441),POST_PROCESS:s(1072),PROGRESS:s(1927),START:s(6597)}},6732:(t,e,s)=>{const i=s(7473),n=s(4359),r=s(1593),o=s(9845),a=s(4597),h=s(2482),l=s(5593),c=new i({Extends:r,initialize:function t(e,s,i,n,o){let l,c="png";if(h(s)){const t=s;s=a(t,"key"),i=a(t,"url"),l=a(t,"normalMap"),n=a(t,"xhrSettings"),c=a(t,"extension",c),o=a(t,"frameConfig")}Array.isArray(i)&&(l=i[1],i=i[0]);const u={type:"image",cache:e.textureManager,extension:c,responseType:"blob",key:s,url:i,xhrSettings:n,config:o};if(r.call(this,e,u),l){const s=new t(e,this.key,l,n,o);s.type="normalMap",this.setLink(s),e.addFile(s)}this.useImageElementLoad="HTMLImageElement"===e.imageLoadType,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;const t=this;this.data.onload=function(){r.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(t.data),t.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){const t=this.state;this.state=n.FILE_PROCESSING,t===n.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=n.FILE_LOADING,this.src=l(this,this.loader.baseURL),0===this.src.indexOf("data:"))console.warn(`Local data URIs are not supported: ${this.key}`);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;const t=this;this.data.onload=function(){t.state=n.FILE_LOADED,t.loader.nextFile(t,!0)},this.data.onerror=function(){t.loader.nextFile(t,!1)},this.data.src=this.src}},addToCache:function(){const t=this.linkFile;t?t.state>=n.FILE_COMPLETE&&("normalMap"===this.type?this.cache.addImage(this.key,t.data,this.data):this.cache.addImage(this.key,this.data,t.data)):this.cache.addImage(this.key,this.data)}});o.register("image",(function(t,e,s){if(Array.isArray(t))for(let e=0;e<t.length;e++)this.addFile(new c(this,t[e]));else this.addFile(new c(this,t,e,s));return this})),t.exports=c},704:(t,e,s)=>{const i=s(7473),n=s(4359),r=s(1593),o=s(9845),a=s(4597),h=s(5851),l=s(2482),c=new i({Extends:r,initialize:function(t,e,s,i,o){let c="json";if(l(e)){const t=e;e=a(t,"key"),s=a(t,"url"),i=a(t,"xhrSettings"),c=a(t,"extension",c),o=a(t,"dataKey",o)}const u={type:"json",cache:t.cacheManager.json,extension:c,responseType:"text",key:e,url:s,xhrSettings:i,config:o};r.call(this,t,u),l(s)&&(this.data=o?h(s,o):s,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw this.onProcessError(),t}const e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});o.register("json",(function(t,e,s,i){if(Array.isArray(t))for(let e=0;e<t.length;e++)this.addFile(new c(this,t[e]));else this.addFile(new c(this,t,e,i,s));return this})),t.exports=c},1192:(t,e,s)=>{const i=s(7473),n=s(4359),r=s(1593),o=s(9845),a=s(4597),h=s(2482),l=new i({Extends:r,initialize:function(t,e,s,i){let n="text",o="txt",l=t.cacheManager.text;if(h(e)){const t=e;e=a(t,"key"),s=a(t,"url"),i=a(t,"xhrSettings"),o=a(t,"extension",o),n=a(t,"type",n),l=a(t,"cache",l)}const c={type:n,cache:l,extension:o,responseType:"text",key:e,url:s,xhrSettings:i};r.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",(function(t,e,s){if(Array.isArray(t))for(let e=0;e<t.length;e++)this.addFile(new l(this,t[e]));else this.addFile(new l(this,t,e,s));return this})),t.exports=l},3136:t=>{t.exports=function(t){for(var e=0,s=0;s<t.length;s++)e+=+t[s];return e/t.length}},785:(t,e,s)=>{const i=s(3916);t.exports=function(t,e){return i(t)/i(e)/i(t-e)}},7025:t=>{t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},48:t=>{t.exports=function(t,e,s,i,n){const r=.5*(i-e),o=.5*(n-s),a=t*t;return(2*s-2*i+r+o)*(t*a)+(-3*s+3*i-2*r-o)*a+r*t+s}},5035:t=>{t.exports=function(t,e,s){void 0===e&&(e=0),void 0===s&&(s=10);const i=Math.pow(s,-e);return Math.ceil(t*i)/i}},2915:t=>{t.exports=function(t,e,s){return Math.max(e,Math.min(s,t))}},7149:(t,e,s)=>{const i=s(7425);t.exports=function(t){return t*i.DEG_TO_RAD}},2975:t=>{t.exports=function(t,e){return Math.abs(t-e)}},2107:(t,e,s)=>{const i=s(2915),n=s(7473),r=s(9652),o=s(1984),a=new r,h=new n({initialize:function t(e,s,i,n){void 0===e&&(e=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===n&&(n=t.DefaultOrder),this._x=e,this._y=s,this._z=i,this._order=n,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,s,i){return void 0===i&&(i=this._order),this._x=t,this._y=e,this._z=s,this._order=i,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,s){return void 0===e&&(e=this._order),void 0===s&&(s=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,s)},setFromRotationMatrix:function(t,e,s){void 0===e&&(e=this._order),void 0===s&&(s=!1);let n=t.val,r=n[0],o=n[4],a=n[8],h=n[1],l=n[5],c=n[9],u=n[2],d=n[6],f=n[10],p=0,m=0,g=0,x=.99999;switch(e){case"XYZ":m=Math.asin(i(a,-1,1)),Math.abs(a)<x?(p=Math.atan2(-c,f),g=Math.atan2(-o,r)):p=Math.atan2(d,l);break;case"YXZ":p=Math.asin(-i(c,-1,1)),Math.abs(c)<x?(m=Math.atan2(a,f),g=Math.atan2(h,l)):m=Math.atan2(-u,r);break;case"ZXY":p=Math.asin(i(d,-1,1)),Math.abs(d)<x?(m=Math.atan2(-u,f),g=Math.atan2(-o,l)):g=Math.atan2(h,r);break;case"ZYX":m=Math.asin(-i(u,-1,1)),Math.abs(u)<x?(p=Math.atan2(d,f),g=Math.atan2(h,r)):g=Math.atan2(-o,l);break;case"YZX":g=Math.asin(i(h,-1,1)),Math.abs(h)<x?(p=Math.atan2(-c,l),m=Math.atan2(-u,r)):m=Math.atan2(a,f);break;case"XZY":g=Math.asin(-i(o,-1,1)),Math.abs(o)<x?(p=Math.atan2(d,l),m=Math.atan2(a,r)):p=Math.atan2(-c,f)}return this._x=p,this._y=m,this._z=g,this._order=e,s&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},3916:t=>{t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},104:t=>{t.exports=function(t,e){return Math.random()*(e-t)+t}},4941:t=>{t.exports=function(t,e,s){void 0===e&&(e=0),void 0===s&&(s=10);const i=Math.pow(s,-e);return Math.floor(t*i)/i}},1555:(t,e,s)=>{const i=s(2915);t.exports=function(t,e,s){return(s-e)*(t=i(t,0,1))+e}},5005:t=>{t.exports=function(t,e){return t/e/1e3}},3702:t=>{t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},8820:t=>{t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},1743:t=>{t.exports=function(t,e,s){return(e-t)*s+t}},3416:t=>{t.exports=function(t,e,s){return void 0===s&&(s=0),t.clone().lerp(e,s)}},2149:(t,e,s)=>{var i=new(s(7473))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new i(this)},set:function(t){return this.copy(t)},copy:function(t){const e=this.val,s=t.val;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this},fromMat4:function(t){const e=t.val,s=this.val;return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[4],s[4]=e[5],s[5]=e[6],s[6]=e[8],s[7]=e[9],s[8]=e[10],this},fromArray:function(t){const e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){const t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){const t=this.val,e=t[1],s=t[2],i=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=s,t[7]=i,this},invert:function(){let t=this.val,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=l*r-o*h,u=-l*n+o*a,d=h*n-r*a,f=e*c+s*u+i*d;return f?(f=1/f,t[0]=c*f,t[1]=(-l*s+i*h)*f,t[2]=(o*s-i*r)*f,t[3]=u*f,t[4]=(l*e-i*a)*f,t[5]=(-o*e+i*n)*f,t[6]=d*f,t[7]=(-h*e+s*a)*f,t[8]=(r*e-s*n)*f,this):null},adjoint:function(){const t=this.val,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return t[0]=r*l-o*h,t[1]=i*h-s*l,t[2]=s*o-i*r,t[3]=o*a-n*l,t[4]=e*l-i*a,t[5]=i*n-e*o,t[6]=n*h-r*a,t[7]=s*a-e*h,t[8]=e*r-s*n,this},determinant:function(){const t=this.val,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*(l*r-o*h)+s*(-l*n+o*a)+i*(h*n-r*a)},multiply:function(t){const e=this.val,s=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=t.val,d=u[0],f=u[1],p=u[2],m=u[3],g=u[4],x=u[5],w=u[6],y=u[7],b=u[8];return e[0]=d*s+f*r+p*h,e[1]=d*i+f*o+p*l,e[2]=d*n+f*a+p*c,e[3]=m*s+g*r+x*h,e[4]=m*i+g*o+x*l,e[5]=m*n+g*a+x*c,e[6]=w*s+y*r+b*h,e[7]=w*i+y*o+b*l,e[8]=w*n+y*a+b*c,this},translate:function(t){const e=this.val,s=t.x,i=t.y;return e[6]=s*e[0]+i*e[3]+e[6],e[7]=s*e[1]+i*e[4]+e[7],e[8]=s*e[2]+i*e[5]+e[8],this},rotate:function(t){const e=this.val,s=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],h=Math.sin(t),l=Math.cos(t);return e[0]=l*s+h*r,e[1]=l*i+h*o,e[2]=l*n+h*a,e[3]=l*r-h*s,e[4]=l*o-h*i,e[5]=l*a-h*n,this},scale:function(t){const e=this.val,s=t.x,i=t.y;return e[0]=s*e[0],e[1]=s*e[1],e[2]=s*e[2],e[3]=i*e[3],e[4]=i*e[4],e[5]=i*e[5],this},fromQuat:function(t){const e=t.x,s=t.y,i=t.z,n=t.w,r=e+e,o=s+s,a=i+i,h=e*r,l=e*o,c=e*a,u=s*o,d=s*a,f=i*a,p=n*r,m=n*o,g=n*a,x=this.val;return x[0]=1-(u+f),x[3]=l+g,x[6]=c-m,x[1]=l-g,x[4]=1-(h+f),x[7]=d+p,x[2]=c+m,x[5]=d-p,x[8]=1-(h+u),this},normalFromMat4:function(t){let e=t.val,s=this.val,i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],x=e[14],w=e[15],y=i*h-n*a,b=i*l-r*a,v=i*c-o*a,A=n*l-r*h,S=n*c-o*h,M=r*c-o*l,I=u*g-d*m,E=u*x-f*m,k=u*w-p*m,T=d*x-f*g,C=d*w-p*g,R=f*w-p*x,F=y*R-b*C+v*T+A*k-S*E+M*I;return F?(F=1/F,s[0]=(h*R-l*C+c*T)*F,s[1]=(l*k-a*R-c*E)*F,s[2]=(a*C-h*k+c*I)*F,s[3]=(r*C-n*R-o*T)*F,s[4]=(i*R-r*k+o*E)*F,s[5]=(n*k-i*C-o*I)*F,s[6]=(g*M-x*S+w*A)*F,s[7]=(x*v-m*M-w*b)*F,s[8]=(m*S-g*v+w*y)*F,this):null}});t.exports=i},9652:(t,e,s)=>{var i=s(7473),n=s(5689),r=1e-6,o=new i({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new o(this)},set:function(t){return this.copy(t)},setValues:function(t,e,s,i,n,r,o,a,h,l,c,u,d,f,p,m){const g=this.val;return g[0]=t,g[1]=e,g[2]=s,g[3]=i,g[4]=n,g[5]=r,g[6]=o,g[7]=a,g[8]=h,g[9]=l,g[10]=c,g[11]=u,g[12]=d,g[13]=f,g[14]=p,g[15]=m,this},copy:function(t){const e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,s){const i=a.fromQuat(s).val,n=e.x,r=e.y,o=e.z;return this.setValues(i[0]*n,i[1]*n,i[2]*n,0,i[4]*r,i[5]*r,i[6]*r,0,i[8]*o,i[9]*o,i[10]*o,0,t.x,t.y,t.z,1)},xyz:function(t,e,s){this.identity();const i=this.val;return i[12]=t,i[13]=e,i[14]=s,this},scaling:function(t,e,s){this.zero();const i=this.val;return i[0]=t,i[5]=e,i[10]=s,i[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){const t=this.val,e=t[1],s=t[2],i=t[3],n=t[6],r=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=s,t[9]=n,t[11]=t[14],t[12]=i,t[13]=r,t[14]=o,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){let t=this.val,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],x=e*o-s*r,w=e*a-i*r,y=e*h-n*r,b=s*a-i*o,v=s*h-n*o,A=i*h-n*a,S=l*p-c*f,M=l*m-u*f,I=l*g-d*f,E=c*m-u*p,k=c*g-d*p,T=u*g-d*m,C=x*T-w*k+y*E+b*I-v*M+A*S;return C?(C=1/C,this.setValues((o*T-a*k+h*E)*C,(i*k-s*T-n*E)*C,(p*A-m*v+g*b)*C,(u*v-c*A-d*b)*C,(a*I-r*T-h*M)*C,(e*T-i*I+n*M)*C,(m*y-f*A-g*w)*C,(l*A-u*y+d*w)*C,(r*k-o*I+h*S)*C,(s*I-e*k-n*S)*C,(f*v-p*y+g*x)*C,(c*y-l*v-d*x)*C,(o*M-r*E-a*S)*C,(e*E-s*M+i*S)*C,(p*w-f*b-m*x)*C,(l*b-c*w+u*x)*C)):this},adjoint:function(){const t=this.val,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return this.setValues(o*(u*g-d*m)-c*(a*g-h*m)+p*(a*d-h*u),-(s*(u*g-d*m)-c*(i*g-n*m)+p*(i*d-n*u)),s*(a*g-h*m)-o*(i*g-n*m)+p*(i*h-n*a),-(s*(a*d-h*u)-o*(i*d-n*u)+c*(i*h-n*a)),-(r*(u*g-d*m)-l*(a*g-h*m)+f*(a*d-h*u)),e*(u*g-d*m)-l*(i*g-n*m)+f*(i*d-n*u),-(e*(a*g-h*m)-r*(i*g-n*m)+f*(i*h-n*a)),e*(a*d-h*u)-r*(i*d-n*u)+l*(i*h-n*a),r*(c*g-d*p)-l*(o*g-h*p)+f*(o*d-h*c),-(e*(c*g-d*p)-l*(s*g-n*p)+f*(s*d-n*c)),e*(o*g-h*p)-r*(s*g-n*p)+f*(s*h-n*o),-(e*(o*d-h*c)-r*(s*d-n*c)+l*(s*h-n*o)),-(r*(c*m-u*p)-l*(o*m-a*p)+f*(o*u-a*c)),e*(c*m-u*p)-l*(s*m-i*p)+f*(s*u-i*c),-(e*(o*m-a*p)-r*(s*m-i*p)+f*(s*a-i*o)),e*(o*u-a*c)-r*(s*u-i*c)+l*(s*a-i*o))},determinant:function(){const t=this.val,e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return(e*o-s*r)*(u*g-d*m)-(e*a-i*r)*(c*g-d*p)+(e*h-n*r)*(c*m-u*p)+(s*a-i*o)*(l*g-d*f)-(s*h-n*o)*(l*m-u*f)+(i*h-n*a)*(l*p-c*f)},multiply:function(t){let e=this.val,s=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],x=e[15],w=t.val,y=w[0],b=w[1],v=w[2],A=w[3];return e[0]=y*s+b*o+v*c+A*p,e[1]=y*i+b*a+v*u+A*m,e[2]=y*n+b*h+v*d+A*g,e[3]=y*r+b*l+v*f+A*x,y=w[4],b=w[5],v=w[6],A=w[7],e[4]=y*s+b*o+v*c+A*p,e[5]=y*i+b*a+v*u+A*m,e[6]=y*n+b*h+v*d+A*g,e[7]=y*r+b*l+v*f+A*x,y=w[8],b=w[9],v=w[10],A=w[11],e[8]=y*s+b*o+v*c+A*p,e[9]=y*i+b*a+v*u+A*m,e[10]=y*n+b*h+v*d+A*g,e[11]=y*r+b*l+v*f+A*x,y=w[12],b=w[13],v=w[14],A=w[15],e[12]=y*s+b*o+v*c+A*p,e[13]=y*i+b*a+v*u+A*m,e[14]=y*n+b*h+v*d+A*g,e[15]=y*r+b*l+v*f+A*x,this},multiplyLocal:function(t){const e=this.val,s=t.val;return this.setValues(e[0]*s[0]+e[1]*s[4]+e[2]*s[8]+e[3]*s[12],e[0]*s[1]+e[1]*s[5]+e[2]*s[9]+e[3]*s[13],e[0]*s[2]+e[1]*s[6]+e[2]*s[10]+e[3]*s[14],e[0]*s[3]+e[1]*s[7]+e[2]*s[11]+e[3]*s[15],e[4]*s[0]+e[5]*s[4]+e[6]*s[8]+e[7]*s[12],e[4]*s[1]+e[5]*s[5]+e[6]*s[9]+e[7]*s[13],e[4]*s[2]+e[5]*s[6]+e[6]*s[10]+e[7]*s[14],e[4]*s[3]+e[5]*s[7]+e[6]*s[11]+e[7]*s[15],e[8]*s[0]+e[9]*s[4]+e[10]*s[8]+e[11]*s[12],e[8]*s[1]+e[9]*s[5]+e[10]*s[9]+e[11]*s[13],e[8]*s[2]+e[9]*s[6]+e[10]*s[10]+e[11]*s[14],e[8]*s[3]+e[9]*s[7]+e[10]*s[11]+e[11]*s[15],e[12]*s[0]+e[13]*s[4]+e[14]*s[8]+e[15]*s[12],e[12]*s[1]+e[13]*s[5]+e[14]*s[9]+e[15]*s[13],e[12]*s[2]+e[13]*s[6]+e[14]*s[10]+e[15]*s[14],e[12]*s[3]+e[13]*s[7]+e[14]*s[11]+e[15]*s[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){const s=t.val,i=e.val,n=s[0],r=s[4],o=s[8],a=s[12],h=s[1],l=s[5],c=s[9],u=s[13],d=s[2],f=s[6],p=s[10],m=s[14],g=s[3],x=s[7],w=s[11],y=s[15],b=i[0],v=i[4],A=i[8],S=i[12],M=i[1],I=i[5],E=i[9],k=i[13],T=i[2],C=i[6],R=i[10],F=i[14],Y=i[3],P=i[7],X=i[11],L=i[15];return this.setValues(n*b+r*M+o*T+a*Y,h*b+l*M+c*T+u*Y,d*b+f*M+p*T+m*Y,g*b+x*M+w*T+y*Y,n*v+r*I+o*C+a*P,h*v+l*I+c*C+u*P,d*v+f*I+p*C+m*P,g*v+x*I+w*C+y*P,n*A+r*E+o*R+a*X,h*A+l*E+c*R+u*X,d*A+f*E+p*R+m*X,g*A+x*E+w*R+y*X,n*S+r*k+o*F+a*L,h*S+l*k+c*F+u*L,d*S+f*k+p*F+m*L,g*S+x*k+w*F+y*L)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,s){const i=this.val;return i[12]=i[0]*t+i[4]*e+i[8]*s+i[12],i[13]=i[1]*t+i[5]*e+i[9]*s+i[13],i[14]=i[2]*t+i[6]*e+i[10]*s+i[14],i[15]=i[3]*t+i[7]*e+i[11]*s+i[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,s){const i=this.val;return i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*t,i[3]=i[3]*t,i[4]=i[4]*e,i[5]=i[5]*e,i[6]=i[6]*e,i[7]=i[7]*e,i[8]=i[8]*s,i[9]=i[9]*s,i[10]=i[10]*s,i[11]=i[11]*s,this},makeRotationAxis:function(t,e){const s=Math.cos(e),i=Math.sin(e),n=1-s,r=t.x,o=t.y,a=t.z,h=n*r,l=n*o;return this.setValues(h*r+s,h*o-i*a,h*a+i*o,0,h*o+i*a,l*o+s,l*a-i*r,0,h*a-i*o,l*a+i*r,n*a*a+s,0,0,0,0,1)},rotate:function(t,e){let s=this.val,i=e.x,n=e.y,o=e.z,a=Math.sqrt(i*i+n*n+o*o);if(Math.abs(a)<r)return this;i*=a=1/a,n*=a,o*=a;const h=Math.sin(t),l=Math.cos(t),c=1-l,u=s[0],d=s[1],f=s[2],p=s[3],m=s[4],g=s[5],x=s[6],w=s[7],y=s[8],b=s[9],v=s[10],A=s[11],S=s[12],M=s[13],I=s[14],E=s[15],k=i*i*c+l,T=n*i*c+o*h,C=o*i*c-n*h,R=i*n*c-o*h,F=n*n*c+l,Y=o*n*c+i*h,P=i*o*c+n*h,X=n*o*c-i*h,L=o*o*c+l;return this.setValues(u*k+m*T+y*C,d*k+g*T+b*C,f*k+x*T+v*C,p*k+w*T+A*C,u*R+m*F+y*Y,d*R+g*F+b*Y,f*R+x*F+v*Y,p*R+w*F+A*Y,u*P+m*X+y*L,d*P+g*X+b*L,f*P+x*X+v*L,p*P+w*X+A*L,S,M,I,E)},rotateX:function(t){const e=this.val,s=Math.sin(t),i=Math.cos(t),n=e[4],r=e[5],o=e[6],a=e[7],h=e[8],l=e[9],c=e[10],u=e[11];return e[4]=n*i+h*s,e[5]=r*i+l*s,e[6]=o*i+c*s,e[7]=a*i+u*s,e[8]=h*i-n*s,e[9]=l*i-r*s,e[10]=c*i-o*s,e[11]=u*i-a*s,this},rotateY:function(t){const e=this.val,s=Math.sin(t),i=Math.cos(t),n=e[0],r=e[1],o=e[2],a=e[3],h=e[8],l=e[9],c=e[10],u=e[11];return e[0]=n*i-h*s,e[1]=r*i-l*s,e[2]=o*i-c*s,e[3]=a*i-u*s,e[8]=n*s+h*i,e[9]=r*s+l*i,e[10]=o*s+c*i,e[11]=a*s+u*i,this},rotateZ:function(t){const e=this.val,s=Math.sin(t),i=Math.cos(t),n=e[0],r=e[1],o=e[2],a=e[3],h=e[4],l=e[5],c=e[6],u=e[7];return e[0]=n*i+h*s,e[1]=r*i+l*s,e[2]=o*i+c*s,e[3]=a*i+u*s,e[4]=h*i-n*s,e[5]=l*i-r*s,e[6]=c*i-o*s,e[7]=u*i-a*s,this},fromRotationTranslation:function(t,e){const s=t.x,i=t.y,n=t.z,r=t.w,o=s+s,a=i+i,h=n+n,l=s*o,c=s*a,u=s*h,d=i*a,f=i*h,p=n*h,m=r*o,g=r*a,x=r*h;return this.setValues(1-(d+p),c+x,u-g,0,c-x,1-(l+p),f+m,0,u+g,f-m,1-(l+d),0,e.x,e.y,e.z,1)},fromQuat:function(t){const e=t.x,s=t.y,i=t.z,n=t.w,r=e+e,o=s+s,a=i+i,h=e*r,l=e*o,c=e*a,u=s*o,d=s*a,f=i*a,p=n*r,m=n*o,g=n*a;return this.setValues(1-(u+f),l+g,c-m,0,l-g,1-(h+f),d+p,0,c+m,d-p,1-(h+u),0,0,0,0,1)},frustum:function(t,e,s,i,n,r){const o=1/(e-t),a=1/(i-s),h=1/(n-r);return this.setValues(2*n*o,0,0,0,0,2*n*a,0,0,(e+t)*o,(i+s)*a,(r+n)*h,-1,0,0,r*n*2*h,0)},perspective:function(t,e,s,i){const n=1/Math.tan(t/2),r=1/(s-i);return this.setValues(n/e,0,0,0,0,n,0,0,0,0,(i+s)*r,-1,0,0,2*i*s*r,0)},perspectiveLH:function(t,e,s,i){return this.setValues(2*s/t,0,0,0,0,2*s/e,0,0,0,0,-i/(s-i),1,0,0,s*i/(s-i),0)},ortho:function(t,e,s,i,n,r){let o=t-e,a=s-i,h=n-r;return o=0===o?o:1/o,a=0===a?a:1/a,h=0===h?h:1/h,this.setValues(-2*o,0,0,0,0,-2*a,0,0,0,0,2*h,0,(t+e)*o,(i+s)*a,(r+n)*h,1)},lookAtRH:function(t,e,s){const i=this.val;return u.subVectors(t,e),0===u.getLengthSquared()&&(u.z=1),u.normalize(),l.crossVectors(s,u),0===l.getLengthSquared()&&(1===Math.abs(s.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),l.crossVectors(s,u)),l.normalize(),c.crossVectors(u,l),i[0]=l.x,i[1]=l.y,i[2]=l.z,i[4]=c.x,i[5]=c.y,i[6]=c.z,i[8]=u.x,i[9]=u.y,i[10]=u.z,this},lookAt:function(t,e,s){const i=t.x,n=t.y,o=t.z,a=s.x,h=s.y,l=s.z,c=e.x,u=e.y,d=e.z;if(Math.abs(i-c)<r&&Math.abs(n-u)<r&&Math.abs(o-d)<r)return this.identity();let f=i-c,p=n-u,m=o-d,g=1/Math.sqrt(f*f+p*p+m*m),x=h*(m*=g)-l*(p*=g),w=l*(f*=g)-a*m,y=a*p-h*f;(g=Math.sqrt(x*x+w*w+y*y))?(x*=g=1/g,w*=g,y*=g):(x=0,w=0,y=0);let b=p*y-m*w,v=m*x-f*y,A=f*w-p*x;return(g=Math.sqrt(b*b+v*v+A*A))?(b*=g=1/g,v*=g,A*=g):(b=0,v=0,A=0),this.setValues(x,b,f,0,w,v,p,0,y,A,m,0,-(x*i+w*n+y*o),-(b*i+v*n+A*o),-(f*i+p*n+m*o),1)},yawPitchRoll:function(t,e,s){this.zero(),a.zero(),h.zero();let i=this.val,n=a.val,r=h.val,o=Math.sin(s),l=Math.cos(s);return i[10]=1,i[15]=1,i[0]=l,i[1]=o,i[4]=-o,i[5]=l,o=Math.sin(e),l=Math.cos(e),n[0]=1,n[15]=1,n[5]=l,n[10]=l,n[9]=-o,n[6]=o,o=Math.sin(t),l=Math.cos(t),r[5]=1,r[15]=1,r[0]=l,r[2]=-o,r[8]=o,r[10]=l,this.multiplyLocal(a),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,s,i,n){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(s.x,s.y,s.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(h),i&&this.multiplyLocal(i),n&&this.multiplyLocal(n),this},multiplyToMat4:function(t,e){const s=this.val,i=t.val,n=s[0],r=s[1],o=s[2],a=s[3],h=s[4],l=s[5],c=s[6],u=s[7],d=s[8],f=s[9],p=s[10],m=s[11],g=s[12],x=s[13],w=s[14],y=s[15],b=i[0],v=i[1],A=i[2],S=i[3],M=i[4],I=i[5],E=i[6],k=i[7],T=i[8],C=i[9],R=i[10],F=i[11],Y=i[12],P=i[13],X=i[14],L=i[15];return e.setValues(b*n+v*h+A*d+S*g,v*r+v*l+A*f+S*x,A*o+v*c+A*p+S*w,S*a+v*u+A*m+S*y,M*n+I*h+E*d+k*g,M*r+I*l+E*f+k*x,M*o+I*c+E*p+k*w,M*a+I*u+E*m+k*y,T*n+C*h+R*d+F*g,T*r+C*l+R*f+F*x,T*o+C*c+R*p+F*w,T*a+C*u+R*m+F*y,Y*n+P*h+X*d+L*g,Y*r+P*l+X*f+L*x,Y*o+P*c+X*p+L*w,Y*a+P*u+X*m+L*y)},fromRotationXYTranslation:function(t,e,s){let i=e.x,n=e.y,r=e.z,o=Math.sin(t.x),a=Math.cos(t.x),h=Math.sin(t.y),l=Math.cos(t.y),c=i,u=n,d=r,f=-o,p=0-f*h,m=0-a*h,g=f*l,x=a*l;return s||(c=l*i+h*r,u=p*i+a*n+g*r,d=m*i+o*n+x*r),this.setValues(l,p,m,0,0,a,o,0,h,g,x,0,c,u,d,1)},getMaxScaleOnAxis:function(){const t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,i))}}),a=new o,h=new o,l=new n,c=new n,u=new n;t.exports=o},3733:t=>{t.exports=function(t,e,s){return Math.min(t+e,s)}},44:t=>{t.exports=function(t){const e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));const s=Math.floor(e/2);return e%2==0?(t[s]+t[s-1])/2:t[s]}},5385:t=>{t.exports=function(t,e,s){return Math.max(t-e,s)}},8585:t=>{t.exports=function(t,e,s,i){void 0===s&&(s=e+1);let n=(t-e)/(s-e);return n>1?void 0!==i?(n=(i-t)/(i-s))<0&&(n=0):n=1:n<0&&(n=0),n}},372:(t,e,s)=>{const i=s(7473),n=s(2149),r=s(1984),o=s(5689),a=1e-6,h=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),c=new o(1,0,0),u=new o(0,1,0),d=new o,f=new n,p=new i({initialize:function(t,e,s,i){this.onChangeCallback=r,this.set(t,e,s,i)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,s,i,n){return void 0===n&&(n=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=s||0,this._w=i||0),n&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){const t=this.x,e=this.y,s=this.z,i=this.w;return Math.sqrt(t*t+e*e+s*s+i*i)},lengthSq:function(){const t=this.x,e=this.y,s=this.z,i=this.w;return t*t+e*e+s*s+i*i},normalize:function(){let t=this.x,e=this.y,s=this.z,i=this.w,n=t*t+e*e+s*s+i*i;return n>0&&(n=1/Math.sqrt(n),this._x=t*n,this._y=e*n,this._z=s*n,this._w=i*n),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);const s=this.x,i=this.y,n=this.z,r=this.w;return this.set(s+e*(t.x-s),i+e*(t.y-i),n+e*(t.z-n),r+e*(t.w-r))},rotationTo:function(t,e){const s=t.x*e.x+t.y*e.y+t.z*e.z;return s<-.999999?(d.copy(c).cross(t).length()<a&&d.copy(u).cross(t),d.normalize(),this.setAxisAngle(d,Math.PI)):s>.999999?this.set(0,0,0,1):(d.copy(t).cross(e),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+s,this.normalize())},setAxes:function(t,e,s){const i=f.val;return i[0]=e.x,i[3]=e.y,i[6]=e.z,i[1]=s.x,i[4]=s.y,i[7]=s.z,i[2]=-t.x,i[5]=-t.y,i[8]=-t.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;const s=Math.sin(e);return this.set(s*t.x,s*t.y,s*t.z,Math.cos(e))},multiply:function(t){const e=this.x,s=this.y,i=this.z,n=this.w,r=t.x,o=t.y,a=t.z,h=t.w;return this.set(e*h+n*r+s*a-i*o,s*h+n*o+i*r-e*a,i*h+n*a+e*o-s*r,n*h-e*r-s*o-i*a)},slerp:function(t,e){let s=this.x,i=this.y,n=this.z,r=this.w,o=t.x,h=t.y,l=t.z,c=t.w,u=s*o+i*h+n*l+r*c;u<0&&(u=-u,o=-o,h=-h,l=-l,c=-c);let d=1-e,f=e;if(1-u>a){const t=Math.acos(u),s=Math.sin(t);d=Math.sin((1-e)*t)/s,f=Math.sin(e*t)/s}return this.set(d*s+f*o,d*i+f*h,d*n+f*l,d*r+f*c)},invert:function(){const t=this.x,e=this.y,s=this.z,i=this.w,n=t*t+e*e+s*s+i*i,r=n?1/n:0;return this.set(-t*r,-e*r,-s*r,i*r)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;const e=this.x,s=this.y,i=this.z,n=this.w,r=Math.sin(t),o=Math.cos(t);return this.set(e*o+n*r,s*o+i*r,i*o-s*r,n*o-e*r)},rotateY:function(t){t*=.5;const e=this.x,s=this.y,i=this.z,n=this.w,r=Math.sin(t),o=Math.cos(t);return this.set(e*o-i*r,s*o+n*r,i*o+e*r,n*o-s*r)},rotateZ:function(t){t*=.5;const e=this.x,s=this.y,i=this.z,n=this.w,r=Math.sin(t),o=Math.cos(t);return this.set(e*o+s*r,s*o-e*r,i*o+n*r,n*o-i*r)},calculateW:function(){const t=this.x,e=this.y,s=this.z;return this.w=-Math.sqrt(1-t*t-e*e-s*s),this},setFromEuler:function(t,e){const s=t.x/2,i=t.y/2,n=t.z/2,r=Math.cos(s),o=Math.cos(i),a=Math.cos(n),h=Math.sin(s),l=Math.sin(i),c=Math.sin(n);switch(t.order){case"XYZ":this.set(h*o*a+r*l*c,r*l*a-h*o*c,r*o*c+h*l*a,r*o*a-h*l*c,e);break;case"YXZ":this.set(h*o*a+r*l*c,r*l*a-h*o*c,r*o*c-h*l*a,r*o*a+h*l*c,e);break;case"ZXY":this.set(h*o*a-r*l*c,r*l*a+h*o*c,r*o*c+h*l*a,r*o*a-h*l*c,e);break;case"ZYX":this.set(h*o*a-r*l*c,r*l*a+h*o*c,r*o*c-h*l*a,r*o*a+h*l*c,e);break;case"YZX":this.set(h*o*a+r*l*c,r*l*a+h*o*c,r*o*c-h*l*a,r*o*a-h*l*c,e);break;case"XZY":this.set(h*o*a-r*l*c,r*l*a-h*o*c,r*o*c+h*l*a,r*o*a+h*l*c,e)}return this},setFromRotationMatrix:function(t){let e,s=t.val,i=s[0],n=s[4],r=s[8],o=s[1],a=s[5],h=s[9],l=s[2],c=s[6],u=s[10],d=i+a+u;return d>0?(e=.5/Math.sqrt(d+1),this.set((c-h)*e,(r-l)*e,(o-n)*e,.25/e)):i>a&&i>u?(e=2*Math.sqrt(1+i-a-u),this.set(.25*e,(n+o)/e,(r+l)/e,(c-h)/e)):a>u?(e=2*Math.sqrt(1+a-i-u),this.set((n+o)/e,.25*e,(h+c)/e,(r-l)/e)):(e=2*Math.sqrt(1+u-i-a),this.set((r+l)/e,(h+c)/e,.25*e,(o-n)/e)),this},fromMat3:function(t){let e,s=t.val,i=s[0]+s[4]+s[8];if(i>0)e=Math.sqrt(i+1),this.w=.5*e,e=.5/e,this._x=(s[7]-s[5])*e,this._y=(s[2]-s[6])*e,this._z=(s[3]-s[1])*e;else{let t=0;s[4]>s[0]&&(t=1),s[8]>s[3*t+t]&&(t=2);const i=h[t],n=h[i];e=Math.sqrt(s[3*t+t]-s[3*i+i]-s[3*n+n]+1),l[t]=.5*e,e=.5/e,l[i]=(s[3*i+t]+s[3*t+i])*e,l[n]=(s[3*n+t]+s[3*t+n])*e,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(s[3*n+i]-s[3*i+n])*e}return this.onChangeCallback(this),this}});t.exports=p},4208:(t,e,s)=>{const i=s(7425);t.exports=function(t){return t*i.RAD_TO_DEG}},1705:t=>{t.exports=function(t,e){void 0===e&&(e=1);const s=2*Math.random()*Math.PI;return t.x=Math.cos(s)*e,t.y=Math.sin(s)*e,t}},6650:t=>{t.exports=function(t,e){void 0===e&&(e=1);const s=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*e;return t.x=Math.cos(s)*n,t.y=Math.sin(s)*n,t.z=i*e,t}},2037:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},6283:t=>{t.exports=function(t,e){const s=t.x,i=t.y;return t.x=s*Math.cos(e)-i*Math.sin(e),t.y=s*Math.sin(e)+i*Math.cos(e),t}},9876:t=>{t.exports=function(t,e,s,i){const n=Math.cos(i),r=Math.sin(i),o=t.x-e,a=t.y-s;return t.x=o*n-a*r+e,t.y=o*r+a*n+s,t}},8348:t=>{t.exports=function(t,e,s,i,n){const r=i+Math.atan2(t.y-s,t.x-e);return t.x=e+n*Math.cos(r),t.y=s+n*Math.sin(r),t}},4497:t=>{t.exports=function(t,e,s,i,n){return t.x=e+n*Math.cos(i),t.y=s+n*Math.sin(i),t}},9640:(t,e,s)=>{const i=s(5689),n=s(9652),r=s(372),o=new n,a=new r,h=new i;t.exports=function(t,e,s){return a.setAxisAngle(e,s),o.fromRotationTranslation(a,h.set(0,0,0)),t.transformMat4(o)}},4078:t=>{t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},855:t=>{t.exports=function(t,e,s){void 0===e&&(e=0),void 0===s&&(s=10);const i=Math.pow(s,-e);return Math.round(t*i)/i}},4936:t=>{t.exports=function(t,e,s,i){void 0===e&&(e=1),void 0===s&&(s=1),void 0===i&&(i=1),i*=Math.PI/t;for(var n=[],r=[],o=0;o<t;o++)e+=(s-=e*i)*i,n[o]=s,r[o]=e;return{sin:r,cos:n,length:t}}},2733:t=>{t.exports=function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*(3-2*t)}},278:t=>{t.exports=function(t,e,s){return(t=Math.max(0,Math.min(1,(t-e)/(s-e))))*t*t*(t*(6*t-15)+10)}},163:(t,e,s)=>{const i=s(2529);t.exports=function(t,e,s,n){void 0===n&&(n=new i);let r=0,o=0;return t>0&&t<=e*s&&(r=t>e-1?t-(o=Math.floor(t/e))*e:t),n.set(r,o)}},7556:(t,e,s)=>{const i=s(2529);t.exports=function(t,e,s,n,r,o,a,h){void 0===h&&(h=new i);const l=Math.sin(r),c=Math.cos(r),u=c*o,d=l*o,f=-l*a,p=c*a,m=1/(u*p+f*-d);return h.x=p*m*t+-f*m*e+(n*f-s*p)*m,h.y=u*m*e+-d*m*t+(-n*u+s*d)*m,h}},2529:(t,e,s)=>{var i=s(7473),n=s(12),r=new i({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new r(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return n(this.x,t.x,e)&&n(this.y,t.y,e)},angle:function(){let t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){const e=t.x-this.x,s=t.y-this.y;return Math.sqrt(e*e+s*s)},distanceSq:function(t){const e=t.x-this.x,s=t.y-this.y;return e*e+s*s},length:function(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){const t=this.x,e=this.y;return t*t+e*e},normalize:function(){let t=this.x,e=this.y,s=t*t+e*e;return s>0&&(s=1/Math.sqrt(s),this.x=t*s,this.y=e*s),this},normalizeRightHand:function(){const t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){const t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);const s=this.x,i=this.y;return this.x=s+e*(t.x-s),this.y=i+e*(t.y-i),this},transformMat3:function(t){const e=this.x,s=this.y,i=t.val;return this.x=i[0]*e+i[3]*s+i[6],this.y=i[1]*e+i[4]*s+i[7],this},transformMat4:function(t){const e=this.x,s=this.y,i=t.val;return this.x=i[0]*e+i[4]*s+i[12],this.y=i[1]*e+i[5]*s+i[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){const e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e*this.x-s*this.y,s*this.x+e*this.y)},project:function(t){const e=this.dot(t)/t.dot(t);return this.copy(t).scale(e)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),t.exports=r},5689:(t,e,s)=>{var i=new(s(7473))({initialize:function(t,e,s){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new i(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){const s=t.x,i=t.y,n=t.z,r=e.x,o=e.y,a=e.z;return this.x=i*a-n*o,this.y=n*r-s*a,this.z=s*o-i*r,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,s){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=s||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){const e=t.x-this.x,s=t.y-this.y,i=t.z-this.z||0;return Math.sqrt(e*e+s*s+i*i)},distanceSq:function(t){const e=t.x-this.x,s=t.y-this.y,i=t.z-this.z||0;return e*e+s*s+i*i},length:function(){const t=this.x,e=this.y,s=this.z;return Math.sqrt(t*t+e*e+s*s)},lengthSq:function(){const t=this.x,e=this.y,s=this.z;return t*t+e*e+s*s},normalize:function(){let t=this.x,e=this.y,s=this.z,i=t*t+e*e+s*s;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=s*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){const e=this.x,s=this.y,i=this.z,n=t.x,r=t.y,o=t.z;return this.x=s*o-i*r,this.y=i*n-e*o,this.z=e*r-s*n,this},lerp:function(t,e){void 0===e&&(e=0);const s=this.x,i=this.y,n=this.z;return this.x=s+e*(t.x-s),this.y=i+e*(t.y-i),this.z=n+e*(t.z-n),this},applyMatrix3:function(t){const e=this.x,s=this.y,i=this.z,n=t.val;return this.x=n[0]*e+n[3]*s+n[6]*i,this.y=n[1]*e+n[4]*s+n[7]*i,this.z=n[2]*e+n[5]*s+n[8]*i,this},applyMatrix4:function(t){const e=this.x,s=this.y,i=this.z,n=t.val,r=1/(n[3]*e+n[7]*s+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*s+n[8]*i+n[12])*r,this.y=(n[1]*e+n[5]*s+n[9]*i+n[13])*r,this.z=(n[2]*e+n[6]*s+n[10]*i+n[14])*r,this},transformMat3:function(t){const e=this.x,s=this.y,i=this.z,n=t.val;return this.x=e*n[0]+s*n[3]+i*n[6],this.y=e*n[1]+s*n[4]+i*n[7],this.z=e*n[2]+s*n[5]+i*n[8],this},transformMat4:function(t){const e=this.x,s=this.y,i=this.z,n=t.val;return this.x=n[0]*e+n[4]*s+n[8]*i+n[12],this.y=n[1]*e+n[5]*s+n[9]*i+n[13],this.z=n[2]*e+n[6]*s+n[10]*i+n[14],this},transformCoordinates:function(t){const e=this.x,s=this.y,i=this.z,n=t.val,r=e*n[0]+s*n[4]+i*n[8]+n[12],o=e*n[1]+s*n[5]+i*n[9]+n[13],a=e*n[2]+s*n[6]+i*n[10]+n[14],h=e*n[3]+s*n[7]+i*n[11]+n[15];return this.x=r/h,this.y=o/h,this.z=a/h,this},transformQuat:function(t){const e=this.x,s=this.y,i=this.z,n=t.x,r=t.y,o=t.z,a=t.w,h=a*e+r*i-o*s,l=a*s+o*e-n*i,c=a*i+n*s-r*e,u=-n*e-r*s-o*i;return this.x=h*a+u*-n+l*-o-c*-r,this.y=l*a+u*-r+c*-n-h*-o,this.z=c*a+u*-o+h*-r-l*-n,this},project:function(t){const e=this.x,s=this.y,i=this.z,n=t.val,r=n[0],o=n[1],a=n[2],h=n[3],l=n[4],c=n[5],u=n[6],d=n[7],f=n[8],p=n[9],m=n[10],g=n[11],x=n[12],w=n[13],y=n[14],b=1/(e*h+s*d+i*g+n[15]);return this.x=(e*r+s*l+i*f+x)*b,this.y=(e*o+s*c+i*p+w)*b,this.z=(e*a+s*u+i*m+y)*b,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){const s=t.x,i=t.y,n=t.z,r=t.w,o=this.x-s,a=r-this.y-1-i,h=this.z;return this.x=2*o/n-1,this.y=2*a/r-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});i.ZERO=new i,i.RIGHT=new i(1,0,0),i.LEFT=new i(-1,0,0),i.UP=new i(0,-1,0),i.DOWN=new i(0,1,0),i.FORWARD=new i(0,0,1),i.BACK=new i(0,0,-1),i.ONE=new i(1,1,1),t.exports=i},9279:(t,e,s)=>{var i=new(s(7473))({initialize:function(t,e,s,i){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=s||0,this.w=i||0)},clone:function(){return new i(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,s,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=s||0,this.w=i||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){const t=this.x,e=this.y,s=this.z,i=this.w;return Math.sqrt(t*t+e*e+s*s+i*i)},lengthSq:function(){const t=this.x,e=this.y,s=this.z,i=this.w;return t*t+e*e+s*s+i*i},normalize:function(){let t=this.x,e=this.y,s=this.z,i=this.w,n=t*t+e*e+s*s+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=s*n,this.w=i*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);const s=this.x,i=this.y,n=this.z,r=this.w;return this.x=s+e*(t.x-s),this.y=i+e*(t.y-i),this.z=n+e*(t.z-n),this.w=r+e*(t.w-r),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){const e=t.x-this.x,s=t.y-this.y,i=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(e*e+s*s+i*i+n*n)},distanceSq:function(t){const e=t.x-this.x,s=t.y-this.y,i=t.z-this.z||0,n=t.w-this.w||0;return e*e+s*s+i*i+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){const e=this.x,s=this.y,i=this.z,n=this.w,r=t.val;return this.x=r[0]*e+r[4]*s+r[8]*i+r[12]*n,this.y=r[1]*e+r[5]*s+r[9]*i+r[13]*n,this.z=r[2]*e+r[6]*s+r[10]*i+r[14]*n,this.w=r[3]*e+r[7]*s+r[11]*i+r[15]*n,this},transformQuat:function(t){const e=this.x,s=this.y,i=this.z,n=t.x,r=t.y,o=t.z,a=t.w,h=a*e+r*i-o*s,l=a*s+o*e-n*i,c=a*i+n*s-r*e,u=-n*e-r*s-o*i;return this.x=h*a+u*-n+l*-o-c*-r,this.y=l*a+u*-r+c*-n-h*-o,this.z=c*a+u*-o+h*-r-l*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.distSq=i.prototype.distanceSq,i.prototype.len=i.prototype.length,i.prototype.lenSq=i.prototype.lengthSq,t.exports=i},4119:t=>{t.exports=function(t,e,s){return Math.abs(t-e)<=s}},8445:t=>{t.exports=function(t,e,s){if(t>=e&&t<=s)return t;const i=s-e;return e+((t-e)%i+i)%i}},6412:t=>{t.exports=function(t,e,s,i){return Math.atan2(i-e,s-t)}},760:t=>{t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},6909:t=>{t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},6947:t=>{t.exports=function(t,e,s,i){return Math.atan2(s-t,i-e)}},3426:(t,e,s)=>{const i=s(7425);t.exports=function(t){return t>Math.PI&&(t-=i.PI2),Math.abs(((t+i.TAU)%i.PI2-i.PI2)%i.PI2)}},6906:t=>{t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},3270:(t,e,s)=>{const i=s(104);t.exports=function(){return i(-Math.PI,Math.PI)}},2748:(t,e,s)=>{const i=s(104);t.exports=function(){return i(-180,180)}},936:(t,e,s)=>{const i=s(6906);t.exports=function(t){return i(t+Math.PI)}},1935:(t,e,s)=>{const i=s(7425);t.exports=function(t,e,s){return void 0===s&&(s=.05),t===e||(Math.abs(e-t)<=s||Math.abs(e-t)>=i.PI2-s?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=i.PI2:e-=i.PI2),e>t?t+=s:e<t&&(t-=s))),t}},5393:t=>{t.exports=function(t,e){const s=e-t;return 0===s?0:s-360*Math.floor((s- -180)/360)}},3692:(t,e,s)=>{const i=s(8445);t.exports=function(t){return i(t,-Math.PI,Math.PI)}},2820:(t,e,s)=>{const i=s(8445);t.exports=function(t){return i(t,-180,180)}},1833:(t,e,s)=>{t.exports={Between:s(6412),BetweenPoints:s(760),BetweenPointsY:s(6909),BetweenY:s(6947),CounterClockwise:s(3426),Normalize:s(6906),Random:s(3270),RandomDegrees:s(2748),Reverse:s(936),RotateTo:s(1935),ShortestBetween:s(5393),Wrap:s(3692),WrapDegrees:s(2820)}},7425:t=>{const e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=e},1518:t=>{t.exports=function(t,e,s,i){const n=t-s,r=e-i;return Math.sqrt(n*n+r*r)}},5372:t=>{t.exports=function(t,e){const s=t.x-e.x,i=t.y-e.y;return Math.sqrt(s*s+i*i)}},4430:t=>{t.exports=function(t,e){const s=t.x-e.x,i=t.y-e.y;return s*s+i*i}},4361:t=>{t.exports=function(t,e,s,i){return Math.max(Math.abs(t-s),Math.abs(e-i))}},7798:t=>{t.exports=function(t,e,s,i,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(s-t,n)+Math.pow(i-e,n))}},8290:t=>{t.exports=function(t,e,s,i){return Math.abs(t-s)+Math.abs(e-i)}},3788:t=>{t.exports=function(t,e,s,i){const n=t-s,r=e-i;return n*n+r*r}},6338:(t,e,s)=>{t.exports={Between:s(1518),BetweenPoints:s(5372),BetweenPointsSquared:s(4430),Chebyshev:s(4361),Power:s(7798),Snake:s(8290),Squared:s(3788)}},5751:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},6203:t=>{t.exports=function(t,e){void 0===e&&(e=1.70158);const s=1.525*e;return(t*=2)<1?t*t*((s+1)*t-s)*.5:.5*((t-=2)*t*((s+1)*t+s)+2)}},9103:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},4938:(t,e,s)=>{t.exports={In:s(5751),Out:s(9103),InOut:s(6203)}},8677:t=>{t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},4649:t=>{t.exports=function(t){let e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},504:t=>{t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},8872:(t,e,s)=>{t.exports={In:s(8677),Out:s(504),InOut:s(4649)}},3170:t=>{t.exports=function(t){return 1-Math.sqrt(1-t*t)}},2627:t=>{t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},1349:t=>{t.exports=function(t){return Math.sqrt(1- --t*t)}},5006:(t,e,s)=>{t.exports={In:s(3170),Out:s(1349),InOut:s(2627)}},6046:t=>{t.exports=function(t){return t*t*t}},9531:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},4836:t=>{t.exports=function(t){return--t*t*t+1}},875:(t,e,s)=>{t.exports={In:s(6046),Out:s(4836),InOut:s(9531)}},7619:t=>{t.exports=function(t,e,s){if(void 0===e&&(e=.1),void 0===s&&(s=.1),0===t)return 0;if(1===t)return 1;let i=s/4;return e<1?e=1:i=s*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)}},7437:t=>{t.exports=function(t,e,s){if(void 0===e&&(e=.1),void 0===s&&(s=.1),0===t)return 0;if(1===t)return 1;let i=s/4;return e<1?e=1:i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1}},8119:t=>{t.exports=function(t,e,s){if(void 0===e&&(e=.1),void 0===s&&(s=.1),0===t)return 0;if(1===t)return 1;let i=s/4;return e<1?e=1:i=s*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/s)+1}},2884:(t,e,s)=>{t.exports={In:s(7619),Out:s(8119),InOut:s(7437)}},5456:t=>{t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},3461:t=>{t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},2711:t=>{t.exports=function(t){return 1-Math.pow(2,-10*t)}},6287:(t,e,s)=>{t.exports={In:s(5456),Out:s(2711),InOut:s(3461)}},8613:(t,e,s)=>{t.exports={Back:s(4938),Bounce:s(8872),Circular:s(5006),Cubic:s(875),Elastic:s(2884),Expo:s(6287),Linear:s(4233),Quadratic:s(6341),Quartic:s(762),Quintic:s(345),Sine:s(8698),Stepped:s(7051)}},744:t=>{t.exports=function(t){return t}},4233:(t,e,s)=>{t.exports=s(744)},9810:t=>{t.exports=function(t){return t*t}},8163:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},6123:t=>{t.exports=function(t){return t*(2-t)}},6341:(t,e,s)=>{t.exports={In:s(9810),Out:s(6123),InOut:s(8163)}},7337:t=>{t.exports=function(t){return t*t*t*t}},4878:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},9012:t=>{t.exports=function(t){return 1- --t*t*t*t}},762:(t,e,s)=>{t.exports={In:s(7337),Out:s(9012),InOut:s(4878)}},303:t=>{t.exports=function(t){return t*t*t*t*t}},553:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},1632:t=>{t.exports=function(t){return--t*t*t*t*t+1}},345:(t,e,s)=>{t.exports={In:s(303),Out:s(1632),InOut:s(553)}},8455:t=>{t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},1844:t=>{t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},990:t=>{t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},8698:(t,e,s)=>{t.exports={In:s(8455),Out:s(990),InOut:s(1844)}},6745:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},7051:(t,e,s)=>{t.exports=s(6745)},3158:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},12:t=>{t.exports=function(t,e,s){return void 0===s&&(s=1e-4),Math.abs(t-e)<s}},1326:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},7373:t=>{t.exports=function(t,e,s){return void 0===s&&(s=1e-4),t>e-s}},2622:t=>{t.exports=function(t,e,s){return void 0===s&&(s=1e-4),t<e+s}},7927:(t,e,s)=>{t.exports={Ceil:s(3158),Equal:s(12),Floor:s(1326),GreaterThan:s(7373),LessThan:s(2622)}},4675:(t,e,s)=>{let i=s(7425),n=s(1030),r={Angle:s(1833),Distance:s(6338),Easing:s(8613),Fuzzy:s(7927),Interpolation:s(2140),Pow2:s(7897),Snap:s(3943),RandomDataGenerator:s(6957),Average:s(3136),Bernstein:s(785),Between:s(7025),CatmullRom:s(48),CeilTo:s(5035),Clamp:s(2915),DegToRad:s(7149),Difference:s(2975),Euler:s(2107),Factorial:s(3916),FloatBetween:s(104),FloorTo:s(4941),FromPercent:s(1555),GetSpeed:s(5005),IsEven:s(3702),IsEvenStrict:s(8820),Linear:s(1743),LinearXY:s(3416),MaxAdd:s(3733),Median:s(44),MinSub:s(5385),Percent:s(8585),RadToDeg:s(4208),RandomXY:s(1705),RandomXYZ:s(6650),RandomXYZW:s(2037),Rotate:s(6283),RotateAround:s(9876),RotateAroundDistance:s(8348),RotateTo:s(4497),RoundAwayFromZero:s(4078),RoundTo:s(855),SinCosTableGenerator:s(4936),SmootherStep:s(278),SmoothStep:s(2733),ToXY:s(163),TransformXY:s(7556),Within:s(4119),Wrap:s(8445),Vector2:s(2529),Vector3:s(5689),Vector4:s(9279),Matrix3:s(2149),Matrix4:s(9652),Quaternion:s(372),RotateVec3:s(9640)};r=n(!1,r,i),t.exports=r},1640:(t,e,s)=>{const i=s(785);t.exports=function(t,e){for(var s=0,n=t.length-1,r=0;r<=n;r++)s+=Math.pow(1-e,n-r)*Math.pow(e,r)*t[r]*i(n,r);return s}},6105:(t,e,s)=>{const i=s(48);t.exports=function(t,e){let s=t.length-1,n=s*e,r=Math.floor(n);return t[0]===t[s]?(e<0&&(r=Math.floor(n=s*(1+e))),i(n-r,t[(r-1+s)%s],t[r],t[(r+1)%s],t[(r+2)%s])):e<0?t[0]-(i(-n,t[0],t[0],t[1],t[1])-t[0]):e>1?t[s]-(i(n-s,t[s],t[s],t[s-1],t[s-1])-t[s]):i(n-r,t[r?r-1:0],t[r],t[s<r+1?s:r+1],t[s<r+2?s:r+2])}},4002:t=>{t.exports=function(t,e,s,i,n){return function(t,e){const s=1-t;return s*s*s*e}(t,e)+function(t,e){const s=1-t;return 3*s*s*t*e}(t,s)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,n)}},6765:(t,e,s)=>{const i=s(1743);t.exports=function(t,e){const s=t.length-1,n=s*e,r=Math.floor(n);return e<0?i(t[0],t[1],n):e>1?i(t[s],t[s-1],s-n):i(t[r],t[r+1>s?s:r+1],n-r)}},6388:t=>{t.exports=function(t,e,s,i){return function(t,e){const s=1-t;return s*s*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,s)+function(t,e){return t*t*e}(t,i)}},5735:(t,e,s)=>{const i=s(2733);t.exports=function(t,e,s){return e+(s-e)*i(t,0,1)}},8705:(t,e,s)=>{const i=s(278);t.exports=function(t,e,s){return e+(s-e)*i(t,0,1)}},2140:(t,e,s)=>{t.exports={Bezier:s(1640),CatmullRom:s(6105),CubicBezier:s(4002),Linear:s(6765),QuadraticBezier:s(6388),SmoothStep:s(5735),SmootherStep:s(8705)}},5443:t=>{t.exports=function(t){const e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},725:t=>{t.exports=function(t,e){return t>0&&!(t&t-1)&&e>0&&!(e&e-1)}},167:t=>{t.exports=function(t){return t>0&&!(t&t-1)}},7897:(t,e,s)=>{t.exports={GetNext:s(5443),IsSize:s(725),IsValue:s(167)}},6957:(t,e,s)=>{const i=new(s(7473))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){const t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){let e,s=this.n;t=t.toString();for(let i=0;i<t.length;i++)e=.02519603282416938*(s+=t.charCodeAt(i)),e-=s=e>>>0,s=(e*=s)>>>0,s+=4294967296*(e-=s);return this.n=s,2.3283064365386963e-10*(s>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(let e=0;e<t.length&&null!=t[e];e++){const s=t[e];this.s0-=this.hash(s),this.s0+=~~(this.s0<0),this.s1-=this.hash(s),this.s1+=~~(this.s1<0),this.s2-=this.hash(s),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){let t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(this.frac()*(e+1)),i=t[s];t[s]=t[e],t[e]=i}return t}});t.exports=i},5659:t=>{t.exports=function(t,e,s,i){return void 0===s&&(s=0),0===e?t:(t-=s,t=e*Math.ceil(t/e),i?(s+t)/e:s+t)}},5461:t=>{t.exports=function(t,e,s,i){return void 0===s&&(s=0),0===e?t:(t-=s,t=e*Math.floor(t/e),i?(s+t)/e:s+t)}},5131:t=>{t.exports=function(t,e,s,i){return void 0===s&&(s=0),0===e?t:(t-=s,t=e*Math.round(t/e),i?(s+t)/e:s+t)}},3943:(t,e,s)=>{t.exports={Ceil:s(5659),Floor:s(5461),To:s(5131)}},8666:(t,e,s)=>{const i=new(s(7473))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=i},8456:t=>{const e={},s={},i={register:function(t,s,i,n){void 0===n&&(n=!1),e[t]={plugin:s,mapping:i,custom:n}},registerCustom:function(t,e,i,n){s[t]={plugin:e,mapping:i,data:n}},hasCore:function(t){return e.hasOwnProperty(t)},hasCustom:function(t){return s.hasOwnProperty(t)},getCore:function(t){return e[t]},getCustom:function(t){return s[t]},getCustomClass:function(t){return s.hasOwnProperty(t)?s[t].plugin:null},remove:function(t){e.hasOwnProperty(t)&&delete e[t]},removeCustom:function(t){s.hasOwnProperty(t)&&delete s[t]},destroyCorePlugins:function(){for(const t in e)e.hasOwnProperty(t)&&delete e[t]},destroyCustomPlugins:function(){for(const t in s)s.hasOwnProperty(t)&&delete s[t]}};t.exports=i},5722:(t,e,s)=>{const i=s(8666),n=s(7473),r=s(204),o=new n({Extends:i,initialize:function(t,e,s){i.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=s,t.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},8351:t=>{t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},8196:t=>{t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},3527:t=>{t.exports="resize"},8618:t=>{t.exports="addedtoscene"},4328:t=>{t.exports="boot"},6099:t=>{t.exports="create"},7645:t=>{t.exports="destroy"},2710:t=>{t.exports="pause"},2547:t=>{t.exports="postupdate"},8577:t=>{t.exports="prerender"},8197:t=>{t.exports="preupdate"},8997:t=>{t.exports="ready"},7604:t=>{t.exports="removedfromscene"},8999:t=>{t.exports="render"},9742:t=>{t.exports="resume"},3667:t=>{t.exports="shutdown"},3468:t=>{t.exports="sleep"},7840:t=>{t.exports="start"},9896:t=>{t.exports="transitioncomplete"},5103:t=>{t.exports="transitioninit"},3162:t=>{t.exports="transitionout"},7841:t=>{t.exports="transitionstart"},6454:t=>{t.exports="transitionwake"},6536:t=>{t.exports="update"},3875:t=>{t.exports="wake"},204:(t,e,s)=>{t.exports={ADDED_TO_SCENE:s(8618),BOOT:s(4328),CREATE:s(6099),DESTROY:s(7645),PAUSE:s(2710),POST_UPDATE:s(2547),PRE_RENDER:s(8577),PRE_UPDATE:s(8197),READY:s(8997),REMOVED_FROM_SCENE:s(7604),RENDER:s(8999),RESUME:s(9742),SHUTDOWN:s(3667),SLEEP:s(3468),START:s(7840),TRANSITION_COMPLETE:s(9896),TRANSITION_INIT:s(5103),TRANSITION_OUT:s(3162),TRANSITION_START:s(7841),TRANSITION_WAKE:s(6454),UPDATE:s(6536),WAKE:s(3875)}},2362:(t,e,s)=>{var i=s(7473),n=s(2915),r=s(1030),o=new i({initialize:function(t,e,s,i,n,r,o){this.texture=t,this.name=e,this.source=t.source[s],this.sourceIndex=s,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(r,o,i,n)},setSize:function(t,e,s,i){void 0===s&&(s=0),void 0===i&&(i=0),this.cutX=s,this.cutY=i,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);const n=this.data,r=n.cut;r.x=s,r.y=i,r.w=t,r.h=e,r.r=s+t,r.b=i+e,n.sourceSize.w=t,n.sourceSize.h=e,n.spriteSourceSize.w=t,n.spriteSourceSize.h=e,n.radius=.5*Math.sqrt(t*t+e*e);const o=n.drawImage;return o.x=s,o.y=i,o.width=t,o.height=e,this.updateUVs()},setTrim:function(t,e,s,i,n,r){const o=this.data,a=o.spriteSourceSize;return o.trim=!0,o.sourceSize.w=t,o.sourceSize.h=e,a.x=s,a.y=i,a.w=n,a.h=r,a.r=s+n,a.b=i+r,this.x=s,this.y=i,this.width=n,this.height=r,this.halfWidth=.5*n,this.halfHeight=.5*r,this.centerX=Math.floor(n/2),this.centerY=Math.floor(r/2),this.updateUVs()},setCropUVs:function(t,e,s,i,r,o,a){let h=this.cutX,l=this.cutY,c=this.cutWidth,u=this.cutHeight,d=this.realWidth,f=this.realHeight,p=h+(e=n(e,0,d)),m=l+(s=n(s,0,f)),g=i=n(i,0,d-e),x=r=n(r,0,f-s),w=this.data;if(w.trim){const t=w.spriteSourceSize,d=e+(i=n(i,0,c-e)),f=s+(r=n(r,0,u-s));if(t.r<e||t.b<s||t.x>d||t.y>f)p=0,m=0,g=0,x=0;else{const n=Math.max(t.x,e),w=Math.max(t.y,s),y=Math.min(t.r,d)-n,b=Math.min(t.b,f)-w;g=y,x=b,p=o?h+(c-(n-t.x)-y):h+(n-t.x),m=a?l+(u-(w-t.y)-b):l+(w-t.y),e=n,s=w,i=y,r=b}}else o&&(p=h+(c-e-i)),a&&(m=l+(u-s-r));const y=this.source.width,b=this.source.height;return t.u0=Math.max(0,p/y),t.v0=Math.max(0,m/b),t.u1=Math.min(1,(p+g)/y),t.v1=Math.min(1,(m+x)/b),t.x=e,t.y=s,t.cx=p,t.cy=m,t.cw=g,t.ch=x,t.width=i,t.height=r,t.flipX=o,t.flipY=a,t},updateCropUVs:function(t,e,s){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,s)},setUVs:function(t,e,s,i,n,r){const o=this.data.drawImage;return o.width=t,o.height=e,this.u0=s,this.v0=i,this.u1=n,this.v1=r,this},updateUVs:function(){const t=this.cutX,e=this.cutY,s=this.cutWidth,i=this.cutHeight,n=this.data.drawImage;n.width=s,n.height=i;const r=this.source.width,o=this.source.height;return this.u0=t/r,this.v0=e/o,this.u1=(t+s)/r,this.v1=(e+i)/o,this},updateUVsInverted:function(){const t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){const t=new o(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=r(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=o},1864:t=>{t.exports=function(t,e,s){return t&&t.hasOwnProperty(e)?t[e]:s}},3747:t=>{t.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999}},7473:t=>{function e(t,e,s){let i=s?t[e]:Object.getOwnPropertyDescriptor(t,e);return!s&&i.value&&"object"==typeof i.value&&(i=i.value),!(!i||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(i))&&(void 0===i.enumerable&&(i.enumerable=!0),void 0===i.configurable&&(i.configurable=!0),i)}function s(t,e){let s=Object.getOwnPropertyDescriptor(t,e);return!!s&&(s.value&&"object"==typeof s.value&&(s=s.value),!1===s.configurable)}function i(t,i,n,o){for(const a in i)if(i.hasOwnProperty(a)){const h=e(i,a,n);if(!1!==h){if(s((o||t).prototype,a)){if(r.ignoreFinals)continue;throw new Error(`cannot override final property '${a}', set Class.ignoreFinals = true to skip`)}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=i[a]}}function n(t,e){if(e){Array.isArray(e)||(e=[e]);for(let s=0;s<e.length;s++)i(t,e[s].prototype||e[s])}}function r(t){let e,s;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){const s=t.Extends;e=function(){s.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,s=t.Extends,delete t.Extends):e.prototype.constructor=e;let r=null;return t.Mixins&&(r=t.Mixins,delete t.Mixins),n(e,r),i(e,t,!0,s),e}r.extend=i,r.mixin=n,r.ignoreFinals=!1,t.exports=r},1984:t=>{t.exports=function(){}},1792:t=>{t.exports=function(t,e,s,i,n){if(void 0===n&&(n=t),s>0){var r=s-t.length;if(r<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),i&&i.call(n,e),e):null;for(var o=e.length-1;o>=0;)-1!==t.indexOf(e[o])&&e.splice(o,1),o--;if(0===(o=e.length))return null;s>0&&o>r&&(e.splice(r),o=r);for(let s=0;s<o;s++){const r=e[s];t.push(r),i&&i.call(n,r)}return e}},2280:t=>{t.exports=function(t,e,s,i,n,r){if(void 0===s&&(s=0),void 0===r&&(r=t),i>0){var o=i-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(s,0,e),n&&n.call(r,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;i>0&&a>o&&(e.splice(o),a=o);for(let i=a-1;i>=0;i--){const o=e[i];t.splice(s,0,o),n&&n.call(r,o)}return e}},2513:t=>{t.exports=function(t,e){const s=t.indexOf(e);return-1!==s&&s<t.length&&(t.splice(s,1),t.push(e)),e}},1771:(t,e,s)=>{const i=s(2497);t.exports=function(t,e,s,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);let o=0;if(i(t,n,r))for(let i=n;i<r;i++)t[i][e]===s&&o++;return o}},7883:t=>{t.exports=function(t,e,s){let i,n=[null];for(i=3;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<t.length;i++)n[0]=t[i],e.apply(s,n);return t}},5856:(t,e,s)=>{const i=s(2497);t.exports=function(t,e,s,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),i(t,n,r)){let i,o=[null];for(i=5;i<arguments.length;i++)o.push(arguments[i]);for(i=n;i<r;i++)o[0]=t[i],e.apply(s,o)}return t}},3957:t=>{t.exports=function(t,e,s){if(!e.length)return NaN;if(1===e.length)return e[0];let i,n,r=1;if(s){if(t<e[0][s])return e[0];for(;e[r][s]<t;)r++}else for(;e[r]<t;)r++;return r>e.length&&(r=e.length),s?(i=e[r-1][s],(n=e[r][s])-t<=t-i?e[r]:e[r-1]):(i=e[r-1],(n=e[r])-t<=t-i?n:i)}},4493:t=>{const e=function(t,s){void 0===s&&(s=[]);for(let i=0;i<t.length;i++)Array.isArray(t[i])?e(t[i],s):s.push(t[i]);return s};t.exports=e},6245:(t,e,s)=>{const i=s(2497);t.exports=function(t,e,s,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);const o=[];if(i(t,n,r))for(let i=n;i<r;i++){const n=t[i];(!e||e&&void 0===s&&n.hasOwnProperty(e)||e&&void 0!==s&&n[e]===s)&&o.push(n)}return o}},1647:(t,e,s)=>{const i=s(2497);t.exports=function(t,e,s,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),i(t,n,r))for(let i=n;i<r;i++){const n=t[i];if(!e||e&&void 0===s&&n.hasOwnProperty(e)||e&&void 0!==s&&n[e]===s)return n}return null}},5301:t=>{t.exports=function(t,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);const i=e+Math.floor(Math.random()*s);return void 0===t[i]?null:t[i]}},8683:t=>{t.exports=function(t,e,s){if(e===s)return t;const i=t.indexOf(e),n=t.indexOf(s);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i>n||(t.splice(i,1),n===t.length-1?t.push(e):t.splice(n,0,e)),t}},546:t=>{t.exports=function(t,e,s){if(e===s)return t;const i=t.indexOf(e),n=t.indexOf(s);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i<n||(t.splice(i,1),0===n?t.unshift(e):t.splice(n,0,e)),t}},1842:t=>{t.exports=function(t,e){const s=t.indexOf(e);if(s>0){const i=t[s-1],n=t.indexOf(i);t[s]=i,t[n]=e}return t}},1419:t=>{t.exports=function(t,e,s){const i=t.indexOf(e);if(-1===i||s<0||s>=t.length)throw new Error("Supplied index out of bounds");return i!==s&&(t.splice(i,1),t.splice(s,0,e)),e}},6512:t=>{t.exports=function(t,e){const s=t.indexOf(e);if(-1!==s&&s<t.length-1){const i=t[s+1],n=t.indexOf(i);t[s]=i,t[n]=e}return t}},4130:t=>{t.exports=function(t,e,s,i){let n,r=[],o=!1;if((s||i)&&(o=!0,s||(s=""),i||(i="")),e<t)for(n=t;n>=e;n--)o?r.push(s+n.toString()+i):r.push(n);else for(n=t;n<=e;n++)o?r.push(s+n.toString()+i):r.push(n);return r}},1316:(t,e,s)=>{const i=s(4078);t.exports=function(t,e,s){void 0===t&&(t=0),void 0===e&&(e=null),void 0===s&&(s=1),null===e&&(e=t,t=0);for(var n=[],r=Math.max(i((e-t)/(s||1)),0),o=0;o<r;o++)n.push(t),t+=s;return n}},9465:t=>{function e(t,e,s){const i=t[e];t[e]=t[s],t[s]=i}function s(t,e){return t<e?-1:t>e?1:0}const i=function(t,n,r,o,a){for(void 0===r&&(r=0),void 0===o&&(o=t.length-1),void 0===a&&(a=s);o>r;){if(o-r>600){const e=o-r+1,s=n-r+1,h=Math.log(e),l=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*l*(e-l)/e)*(s-e/2<0?-1:1),u=Math.max(r,Math.floor(n-s*l/e+c)),d=Math.min(o,Math.floor(n+(e-s)*l/e+c));i(t,n,u,d,a)}let s=t[n],h=r,l=o;for(e(t,r,n),a(t[o],s)>0&&e(t,r,o);h<l;){for(e(t,h,l),h++,l--;a(t[h],s)<0;)h++;for(;a(t[l],s)>0;)l--}0===a(t[r],s)?e(t,r,l):e(t,++l,o),l<=n&&(r=l+1),n<=l&&(o=l-1)}};t.exports=i},9703:(t,e,s)=>{const i=s(5851),n=s(4912),r=function(t,e,s){for(var i=[],n=0;n<t.length;n++)for(let r=0;r<e.length;r++)for(let o=0;o<s;o++)i.push({a:t[n],b:e[r]});return i};t.exports=function(t,e,s){let o=i(s,"max",0),a=i(s,"qty",1),h=i(s,"random",!1),l=i(s,"randomB",!1),c=i(s,"repeat",0),u=i(s,"yoyo",!1),d=[];if(l&&n(e),-1===c)if(0===o)c=0;else{let s=t.length*e.length*a;u&&(s*=2),c=Math.ceil(o/s)}for(let s=0;s<=c;s++){const s=r(t,e,a);h&&n(s),d=d.concat(s),u&&(s.reverse(),d=d.concat(s))}return o&&d.splice(o),d}},7161:(t,e,s)=>{const i=s(8935);t.exports=function(t,e,s,n){let r;if(void 0===n&&(n=t),!Array.isArray(e))return-1!==(r=t.indexOf(e))?(i(t,r),s&&s.call(n,e),e):null;for(var o=e.length-1,a=[];o>=0;){const h=e[o];-1!==(r=t.indexOf(h))&&(i(t,r),a.push(h),s&&s.call(n,h)),o--}return a}},4725:(t,e,s)=>{const i=s(8935);t.exports=function(t,e,s,n){if(void 0===n&&(n=t),e<0||e>t.length-1)throw new Error("Index out of bounds");const r=i(t,e);return s&&s.call(n,r),r}},8780:(t,e,s)=>{const i=s(2497);t.exports=function(t,e,s,n,r){if(void 0===e&&(e=0),void 0===s&&(s=t.length),void 0===r&&(r=t),i(t,e,s)){const i=s-e,o=t.splice(e,i);if(n)for(let t=0;t<o.length;t++){const e=o[t];n.call(r,e)}return o}return[]}},5744:(t,e,s)=>{const i=s(8935);t.exports=function(t,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);const n=e+Math.floor(Math.random()*s);return i(t,n)}},6960:t=>{t.exports=function(t,e,s){const i=t.indexOf(e),n=t.indexOf(s);return-1!==i&&-1===n&&(t[i]=s,!0)}},1021:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var s=null,i=0;i<e;i++)s=t.shift(),t.push(s);return s}},4027:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var s=null,i=0;i<e;i++)s=t.pop(),t.unshift(s);return s}},2497:t=>{t.exports=function(t,e,s,i){const n=t.length;if(e<0||e>n||e>=s||s>n){if(i)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},5361:t=>{t.exports=function(t,e){const s=t.indexOf(e);return-1!==s&&s>0&&(t.splice(s,1),t.unshift(e)),e}},3718:(t,e,s)=>{const i=s(2497);t.exports=function(t,e,s,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),i(t,n,r))for(let i=n;i<r;i++){const n=t[i];n.hasOwnProperty(e)&&(n[e]=s)}return t}},4912:t=>{t.exports=function(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[s],t[s]=i}return t}},2071:t=>{t.exports=function(t){const e=/\D/g;return t.sort((function(t,s){return parseInt(t.replace(e,""),10)-parseInt(s.replace(e,""),10)})),t}},8935:t=>{t.exports=function(t,e){if(!(e>=t.length)){for(var s=t.length-1,i=t[e],n=e;n<s;n++)t[n]=t[n+1];return t.length=s,i}}},9992:(t,e,s)=>{const i=s(9356);function n(t,e){return String(t).localeCompare(e)}function r(t,e,s,i){let n,r,o,a,h,l=t.length,c=0,u=2*s;for(n=0;n<l;n+=u)for(o=(r=n+s)+s,r>l&&(r=l),o>l&&(o=l),a=n,h=r;;)if(a<r&&h<o)e(t[a],t[h])<=0?i[c++]=t[a++]:i[c++]=t[h++];else if(a<r)i[c++]=t[a++];else{if(!(h<o))break;i[c++]=t[h++]}}t.exports=function(t,e){if(void 0===e&&(e=n),!t||t.length<2)return t;if(i.features.stableSort)return t.sort(e);const s=function(t,e){const s=t.length;if(s<=1)return t;for(let i=new Array(s),n=1;n<s;n*=2){r(t,e,n,i);const s=t;t=i,i=s}return t}(t,e);return s!==t&&r(s,null,t.length,t),t}},2372:t=>{t.exports=function(t,e,s){if(e===s)return t;const i=t.indexOf(e),n=t.indexOf(s);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return t[i]=s,t[n]=e,t}},1953:(t,e,s)=>{t.exports={Matrix:s(1237),Add:s(1792),AddAt:s(2280),BringToTop:s(2513),CountAllMatching:s(1771),Each:s(7883),EachInRange:s(5856),FindClosestInSorted:s(3957),Flatten:s(4493),GetAll:s(6245),GetFirst:s(1647),GetRandom:s(5301),MoveDown:s(1842),MoveTo:s(1419),MoveUp:s(6512),MoveAbove:s(8683),MoveBelow:s(546),NumberArray:s(4130),NumberArrayStep:s(1316),QuickSelect:s(9465),Range:s(9703),Remove:s(7161),RemoveAt:s(4725),RemoveBetween:s(8780),RemoveRandomElement:s(5744),Replace:s(6960),RotateLeft:s(1021),RotateRight:s(4027),SafeRange:s(2497),SendToBack:s(5361),SetAll:s(3718),Shuffle:s(4912),SortByDigits:s(2071),SpliceOne:s(8935),StableSort:s(9992),Swap:s(2372)}},1816:t=>{t.exports=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(let e=t[0].length,s=1;s<t.length;s++)if(t[s].length!==e)return!1;return!0}},6655:(t,e,s)=>{const i=s(7222),n=s(1816);t.exports=function(t){let e="";if(!n(t))return e;for(let s=0;s<t.length;s++){for(let n=0;n<t[s].length;n++){const r=t[s][n].toString();e+="undefined"!==r?i(r,2):"?",n<t[s].length-1&&(e+=" |")}if(s<t.length-1){e+="\n";for(let i=0;i<t[s].length;i++)e+="---",i<t[s].length-1&&(e+="+");e+="\n"}}return e}},582:t=>{t.exports=function(t){return t.reverse()}},6063:t=>{t.exports=function(t){for(let e=0;e<t.length;e++)t[e].reverse();return t}},8321:(t,e,s)=>{const i=s(7116);t.exports=function(t){return i(t,180)}},2597:(t,e,s)=>{const i=s(7116);t.exports=function(t){return i(t,90)}},7116:(t,e,s)=>{const i=s(1816),n=s(4780);t.exports=function(t,e){if(void 0===e&&(e=90),!i(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=n(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=n(t);else if(180===Math.abs(e)||"rotate180"===e){for(let e=0;e<t.length;e++)t[e].reverse();t.reverse()}return t}},6285:(t,e,s)=>{const i=s(7116);t.exports=function(t){return i(t,-90)}},7711:(t,e,s)=>{const i=s(1021),n=s(4027);t.exports=function(t,e,s){if(void 0===e&&(e=0),void 0===s&&(s=0),0!==s&&(s<0?i(t,Math.abs(s)):n(t,s)),0!==e)for(let s=0;s<t.length;s++){const r=t[s];e<0?i(r,Math.abs(e)):n(r,e)}return t}},4780:t=>{t.exports=function(t){for(var e=t.length,s=t[0].length,i=new Array(s),n=0;n<s;n++){i[n]=new Array(e);for(let s=e-1;s>-1;s--)i[n][s]=t[s][n]}return i}},1237:(t,e,s)=>{t.exports={CheckMatrix:s(1816),MatrixToString:s(6655),ReverseColumns:s(582),ReverseRows:s(6063),Rotate180:s(8321),RotateLeft:s(2597),RotateMatrix:s(7116),RotateRight:s(6285),Translate:s(7711),TransposeMatrix:s(4780)}},3911:t=>{const e=function(t){let s,i,n;if("object"!=typeof t||null===t)return t;for(n in s=Array.isArray(t)?[]:{},t)i=t[n],s[n]=e(i);return s};t.exports=e},1030:(t,e,s)=>{const i=s(2482),n=function(){let t,e,s,r,o,a,h=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof h&&(u=h,h=arguments[1]||{},l=2),c===l&&(h=this,--l);l<c;l++)if(null!=(t=arguments[l]))for(e in t)s=h[e],h!==(r=t[e])&&(u&&r&&(i(r)||(o=Array.isArray(r)))?(o?(o=!1,a=s&&Array.isArray(s)?s:[]):a=s&&i(s)?s:{},h[e]=n(u,a,r)):void 0!==r&&(h[e]=r));return h};t.exports=n},8361:(t,e,s)=>{const i=s(4675),n=s(5851);t.exports=function(t,e,s){const r=n(t,e,null);if(null===r)return s;if(Array.isArray(r))return i.RND.pick(r);if("object"==typeof r){if(r.hasOwnProperty("randInt"))return i.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return i.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if("function"==typeof r)return r(e);return r}},4597:t=>{t.exports=function(t,e,s){const i=typeof t;return t&&"number"!==i&&"string"!==i&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:s}},5851:t=>{t.exports=function(t,e,s,i){if(!t&&!i||"number"==typeof t)return s;if(t&&t.hasOwnProperty(e))return t[e];if(i&&i.hasOwnProperty(e))return i[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),r=t,o=i,a=s,h=s,l=!0,c=!0,u=0;u<n.length;u++)r&&r.hasOwnProperty(n[u])?(a=r[n[u]],r=r[n[u]]):l=!1,o&&o.hasOwnProperty(n[u])?(h=o[n[u]],o=o[n[u]]):c=!1;return l?a:c?h:s}return s}},2482:t=>{t.exports=function(t){if(!t||"object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},7222:t=>{t.exports=function(t,e,s,i){void 0===e&&(e=0),void 0===s&&(s=" "),void 0===i&&(i=3);let n=0;if(e+1>=(t=t.toString()).length)switch(i){case 1:t=new Array(e+1-t.length).join(s)+t;break;case 3:var r=Math.ceil((n=e-t.length)/2);t=new Array(n-r+1).join(s)+t+new Array(r+1).join(s);break;default:t+=new Array(e+1-t.length).join(s)}return t}}},e={},s=function s(i){const n=e[i];if(void 0!==n)return n.exports;const r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}(4513);window.SpinePlugin=s})()}}]);